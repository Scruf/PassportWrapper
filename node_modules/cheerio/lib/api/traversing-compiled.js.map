{"version":3,"sources":["traversing.js"],"names":[],"mappings":"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","file":"traversing-compiled.js","sourcesContent":["var _ = require('lodash'),\n    select = require('css-select'),\n    utils = require('../utils'),\n    domEach = utils.domEach,\n    uniqueSort = require('htmlparser2').DomUtils.uniqueSort,\n    isTag = utils.isTag;\n\nexports.find = function(selectorOrHaystack) {\n  var elems = _.reduce(this, function(memo, elem) {\n    return memo.concat(_.filter(elem.children, isTag));\n  }, []);\n  var contains = this.constructor.contains;\n  var haystack;\n\n  if (selectorOrHaystack && typeof selectorOrHaystack !== 'string') {\n    if (selectorOrHaystack.cheerio) {\n      haystack = selectorOrHaystack.get();\n    } else {\n      haystack = [selectorOrHaystack];\n    }\n\n    return this._make(haystack.filter(function(elem) {\n      var idx, len;\n      for (idx = 0, len = this.length; idx < len; ++idx) {\n        if (contains(this[idx], elem)) {\n          return true;\n        }\n      }\n    }, this));\n  }\n\n  var options = {__proto__: this.options, context: this.toArray()};\n\n  return this._make(select(selectorOrHaystack, elems, options));\n};\n\n// Get the parent of each element in the current set of matched elements,\n// optionally filtered by a selector.\nexports.parent = function(selector) {\n  var set = [];\n\n  domEach(this, function(idx, elem) {\n    var parentElem = elem.parent;\n    if (parentElem && set.indexOf(parentElem) < 0) {\n      set.push(parentElem);\n    }\n  });\n\n  if (arguments.length) {\n    set = exports.filter.call(set, selector, this);\n  }\n\n  return this._make(set);\n};\n\nexports.parents = function(selector) {\n  var parentNodes = [];\n\n  // When multiple DOM elements are in the original set, the resulting set will\n  // be in *reverse* order of the original elements as well, with duplicates\n  // removed.\n  this.get().reverse().forEach(function(elem) {\n    traverseParents(this, elem.parent, selector, Infinity)\n      .forEach(function(node) {\n        if (parentNodes.indexOf(node) === -1) {\n          parentNodes.push(node);\n        }\n      }\n    );\n  }, this);\n\n  return this._make(parentNodes);\n};\n\nexports.parentsUntil = function(selector, filter) {\n  var parentNodes = [], untilNode, untilNodes;\n\n  if (typeof selector === 'string') {\n    untilNode = select(selector, this.parents().toArray(), this.options)[0];\n  } else if (selector && selector.cheerio) {\n    untilNodes = selector.toArray();\n  } else if (selector) {\n    untilNode = selector;\n  }\n\n  // When multiple DOM elements are in the original set, the resulting set will\n  // be in *reverse* order of the original elements as well, with duplicates\n  // removed.\n\n  this.toArray().reverse().forEach(function(elem) {\n    while ((elem = elem.parent)) {\n      if ((untilNode && elem !== untilNode) ||\n        (untilNodes && untilNodes.indexOf(elem) === -1) ||\n        (!untilNode && !untilNodes)) {\n        if (isTag(elem) && parentNodes.indexOf(elem) === -1) { parentNodes.push(elem); }\n      } else {\n        break;\n      }\n    }\n  }, this);\n\n  return this._make(filter ? select(filter, parentNodes, this.options) : parentNodes);\n};\n\n// For each element in the set, get the first element that matches the selector\n// by testing the element itself and traversing up through its ancestors in the\n// DOM tree.\nexports.closest = function(selector) {\n  var set = [];\n\n  if (!selector) {\n    return this._make(set);\n  }\n\n  domEach(this, function(idx, elem) {\n    var closestElem = traverseParents(this, elem, selector, 1)[0];\n\n    // Do not add duplicate elements to the set\n    if (closestElem && set.indexOf(closestElem) < 0) {\n      set.push(closestElem);\n    }\n  }.bind(this));\n\n  return this._make(set);\n};\n\nexports.next = function(selector) {\n  if (!this[0]) { return this; }\n  var elems = [];\n\n  _.forEach(this, function(elem) {\n    while ((elem = elem.next)) {\n      if (isTag(elem)) {\n        elems.push(elem);\n        return;\n      }\n    }\n  });\n\n  return selector ?\n    exports.filter.call(elems, selector, this) :\n    this._make(elems);\n};\n\nexports.nextAll = function(selector) {\n  if (!this[0]) { return this; }\n  var elems = [];\n\n  _.forEach(this, function(elem) {\n    while ((elem = elem.next)) {\n      if (isTag(elem) && elems.indexOf(elem) === -1) {\n        elems.push(elem);\n      }\n    }\n  });\n\n  return selector ?\n    exports.filter.call(elems, selector, this) :\n    this._make(elems);\n};\n\nexports.nextUntil = function(selector, filterSelector) {\n  if (!this[0]) { return this; }\n  var elems = [], untilNode, untilNodes;\n\n  if (typeof selector === 'string') {\n    untilNode = select(selector, this.nextAll().get(), this.options)[0];\n  } else if (selector && selector.cheerio) {\n    untilNodes = selector.get();\n  } else if (selector) {\n    untilNode = selector;\n  }\n\n  _.forEach(this, function(elem) {\n    while ((elem = elem.next)) {\n      if ((untilNode && elem !== untilNode) ||\n        (untilNodes && untilNodes.indexOf(elem) === -1) ||\n        (!untilNode && !untilNodes)) {\n        if (isTag(elem) && elems.indexOf(elem) === -1) {\n          elems.push(elem);\n        }\n      } else {\n        break;\n      }\n    }\n  });\n\n  return filterSelector ?\n    exports.filter.call(elems, filterSelector, this) :\n    this._make(elems);\n};\n\nexports.prev = function(selector) {\n  if (!this[0]) { return this; }\n  var elems = [];\n\n  _.forEach(this, function(elem) {\n    while ((elem = elem.prev)) {\n      if (isTag(elem)) {\n        elems.push(elem);\n        return;\n      }\n    }\n  });\n\n  return selector ?\n    exports.filter.call(elems, selector, this) :\n    this._make(elems);\n};\n\nexports.prevAll = function(selector) {\n  if (!this[0]) { return this; }\n  var elems = [];\n\n  _.forEach(this, function(elem) {\n    while ((elem = elem.prev)) {\n      if (isTag(elem) && elems.indexOf(elem) === -1) {\n        elems.push(elem);\n      }\n    }\n  });\n\n  return selector ?\n    exports.filter.call(elems, selector, this) :\n    this._make(elems);\n};\n\nexports.prevUntil = function(selector, filterSelector) {\n  if (!this[0]) { return this; }\n  var elems = [], untilNode, untilNodes;\n\n  if (typeof selector === 'string') {\n    untilNode = select(selector, this.prevAll().get(), this.options)[0];\n  } else if (selector && selector.cheerio) {\n    untilNodes = selector.get();\n  } else if (selector) {\n    untilNode = selector;\n  }\n\n  _.forEach(this, function(elem) {\n    while ((elem = elem.prev)) {\n      if ((untilNode && elem !== untilNode) ||\n        (untilNodes && untilNodes.indexOf(elem) === -1) ||\n        (!untilNode && !untilNodes)) {\n        if (isTag(elem) && elems.indexOf(elem) === -1) {\n          elems.push(elem);\n        }\n      } else {\n        break;\n      }\n    }\n  });\n\n  return filterSelector ?\n    exports.filter.call(elems, filterSelector, this) :\n    this._make(elems);\n};\n\nexports.siblings = function(selector) {\n  var parent = this.parent();\n\n  var elems = _.filter(\n    parent ? parent.children() : this.siblingsAndMe(),\n    _.bind(function(elem) { return isTag(elem) && !this.is(elem); }, this)\n  );\n\n  if (selector !== undefined) {\n    return exports.filter.call(elems, selector, this);\n  } else {\n    return this._make(elems);\n  }\n};\n\nexports.children = function(selector) {\n\n  var elems = _.reduce(this, function(memo, elem) {\n    return memo.concat(_.filter(elem.children, isTag));\n  }, []);\n\n  if (selector === undefined) return this._make(elems);\n\n  return exports.filter.call(elems, selector, this);\n};\n\nexports.contents = function() {\n  return this._make(_.reduce(this, function(all, elem) {\n    all.push.apply(all, elem.children);\n    return all;\n  }, []));\n};\n\nexports.each = function(fn) {\n  var i = 0, len = this.length;\n  while (i < len && fn.call(this[i], i, this[i]) !== false) ++i;\n  return this;\n};\n\nexports.map = function(fn) {\n  return this._make(_.reduce(this, function(memo, el, i) {\n    var val = fn.call(el, i, el);\n    return val == null ? memo : memo.concat(val);\n  }, []));\n};\n\nvar makeFilterMethod = function(filterFn) {\n  return function(match, container) {\n    var testFn;\n    container = container || this;\n\n    if (typeof match === 'string') {\n      testFn = select.compile(match, container.options);\n    } else if (typeof match === 'function') {\n      testFn = function(el, i) {\n        return match.call(el, i, el);\n      };\n    } else if (match.cheerio) {\n      testFn = match.is.bind(match);\n    } else {\n      testFn = function(el) {\n        return match === el;\n      };\n    }\n\n    return container._make(filterFn(this, testFn));\n  };\n};\n\nexports.filter = makeFilterMethod(_.filter);\nexports.not = makeFilterMethod(_.reject);\n\nexports.has = function(selectorOrHaystack) {\n  var that = this;\n  return exports.filter.call(this, function() {\n    return that._make(this).find(selectorOrHaystack).length > 0;\n  });\n};\n\nexports.first = function() {\n  return this.length > 1 ? this._make(this[0]) : this;\n};\n\nexports.last = function() {\n  return this.length > 1 ? this._make(this[this.length - 1]) : this;\n};\n\n// Reduce the set of matched elements to the one at the specified index.\nexports.eq = function(i) {\n  i = +i;\n\n  // Use the first identity optimization if possible\n  if (i === 0 && this.length <= 1) return this;\n\n  if (i < 0) i = this.length + i;\n  return this[i] ? this._make(this[i]) : this._make([]);\n};\n\n// Retrieve the DOM elements matched by the jQuery object.\nexports.get = function(i) {\n  if (i == null) {\n    return Array.prototype.slice.call(this);\n  } else {\n    return this[i < 0 ? (this.length + i) : i];\n  }\n};\n\n// Search for a given element from among the matched elements.\nexports.index = function(selectorOrNeedle) {\n  var $haystack, needle;\n\n  if (arguments.length === 0) {\n    $haystack = this.parent().children();\n    needle = this[0];\n  } else if (typeof selectorOrNeedle === 'string') {\n    $haystack = this._make(selectorOrNeedle);\n    needle = this[0];\n  } else {\n    $haystack = this;\n    needle = selectorOrNeedle.cheerio ? selectorOrNeedle[0] : selectorOrNeedle;\n  }\n\n  return $haystack.get().indexOf(needle);\n};\n\nexports.slice = function() {\n  return this._make([].slice.apply(this, arguments));\n};\n\nfunction traverseParents(self, elem, selector, limit) {\n  var elems = [];\n  while (elem && elems.length < limit) {\n    if (!selector || exports.filter.call([elem], selector, self).length) {\n      elems.push(elem);\n    }\n    elem = elem.parent;\n  }\n  return elems;\n}\n\n// End the most recent filtering operation in the current chain and return the\n// set of matched elements to its previous state.\nexports.end = function() {\n  return this.prevObject || this._make([]);\n};\n\nexports.add = function(other, context) {\n  var selection = this._make(other, context);\n  var contents = uniqueSort(selection.get().concat(this.get()));\n\n  for (var i = 0; i < contents.length; ++i) {\n    selection[i] = contents[i];\n  }\n  selection.length = contents.length;\n\n  return selection;\n};\n\n// Add the previous set of elements on the stack to the current set, optionally\n// filtered by a selector.\nexports.addBack = function(selector) {\n  return this.add(\n    arguments.length ? this.prevObject.filter(selector) : this.prevObject\n  );\n};\n"]}