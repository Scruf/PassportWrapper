{"version":3,"sources":["css.js"],"names":[],"mappings":"AAAA,IAAI,IAAI,QAAQ,QAAR,CAAJ;IACA,UAAU,QAAQ,UAAR,EAAoB,OAApB;AACd,IAAI,WAAW,OAAO,SAAP,CAAiB,QAAjB;;;;;;;;;;;AAWf,QAAQ,GAAR,GAAc,UAAS,IAAT,EAAe,GAAf,EAAoB;AAChC,MAAI,UAAU,MAAV,KAAqB,CAArB;;AAED,WAAS,IAAT,CAAc,IAAd,MAAwB,iBAAxB,EAA4C;AAC7C,WAAO,QAAQ,IAAR,EAAc,UAAS,GAAT,EAAc,EAAd,EAAkB;AACrC,aAAO,EAAP,EAAW,IAAX,EAAiB,GAAjB,EAAsB,GAAtB,EADqC;KAAlB,CAArB,CAD6C;GAF/C,MAMO;AACL,WAAO,OAAO,KAAK,CAAL,CAAP,EAAgB,IAAhB,CAAP,CADK;GANP;CADY;;;;;;;;;;;;AAsBd,SAAS,MAAT,CAAgB,EAAhB,EAAoB,IAApB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC;AAClC,MAAI,YAAY,OAAO,IAAP,EAAa;AAC3B,QAAI,SAAS,OAAO,EAAP,CAAT,CADuB;AAE3B,QAAI,OAAO,GAAP,KAAe,UAAf,EAA2B;AAC7B,YAAM,IAAI,IAAJ,CAAS,EAAT,EAAa,GAAb,EAAkB,OAAO,IAAP,CAAlB,CAAN,CAD6B;KAA/B;;AAIA,QAAI,QAAQ,EAAR,EAAY;AACd,aAAO,OAAO,IAAP,CAAP,CADc;KAAhB,MAEO,IAAI,OAAO,IAAP,EAAa;AACtB,aAAO,IAAP,IAAe,GAAf,CADsB;KAAjB;;AAIP,OAAG,OAAH,CAAW,KAAX,GAAmB,UAAU,MAAV,CAAnB,CAZ2B;GAA7B,MAaO,IAAI,YAAY,OAAO,IAAP,EAAa;AAClC,WAAO,IAAP,CAAY,IAAZ,EAAkB,OAAlB,CAA0B,UAAS,CAAT,EAAW;AACnC,aAAO,EAAP,EAAW,CAAX,EAAc,KAAK,CAAL,CAAd,EADmC;KAAX,CAA1B,CADkC;GAA7B;CAdT;;;;;;;;;;AA6BA,SAAS,MAAT,CAAgB,EAAhB,EAAoB,IAApB,EAA0B;AACxB,MAAI,SAAS,MAAM,GAAG,OAAH,CAAW,KAAX,CAAf,CADoB;AAExB,MAAI,OAAO,IAAP,KAAgB,QAAhB,EAA0B;AAC5B,WAAO,OAAO,IAAP,CAAP,CAD4B;GAA9B,MAEO,IAAI,MAAM,OAAN,CAAc,IAAd,CAAJ,EAAyB;AAC9B,WAAO,EAAE,IAAF,CAAO,MAAP,EAAe,IAAf,CAAP,CAD8B;GAAzB,MAEA;AACL,WAAO,MAAP,CADK;GAFA;CAJT;;;;;;;;;;AAmBA,SAAS,SAAT,CAAmB,GAAnB,EAAwB;AACtB,SAAO,OAAO,IAAP,CAAY,OAAO,EAAP,CAAZ,CACJ,MADI,CACG,UAAS,GAAT,EAAc,IAAd,EAAmB;AACzB,WAAO,OAAO,MACT,MAAM,GAAN,GAAY,EAAZ,CADS,GAEV,IAFU,GAGV,IAHU,GAIV,IAAI,IAAJ,CAJU,GAKV,GALU,CADW;GAAnB,EAOL,EARE,CAAP,CADsB;CAAxB;;;;;;;;;;AAoBA,SAAS,KAAT,CAAe,MAAf,EAAuB;AACrB,WAAS,CAAC,UAAU,EAAV,CAAD,CAAe,IAAf,EAAT,CADqB;;AAGrB,MAAI,CAAC,MAAD,EAAS,OAAO,EAAP,CAAb;;AAEA,SAAO,OACJ,KADI,CACE,GADF,EAEJ,MAFI,CAEG,UAAS,GAAT,EAAc,GAAd,EAAkB;AACxB,QAAI,IAAI,IAAI,OAAJ,CAAY,GAAZ,CAAJ;;AADoB,QAGpB,IAAI,CAAJ,IAAS,MAAM,IAAI,MAAJ,GAAW,CAAX,EAAc,OAAO,GAAP,CAAjC;AACA,QAAI,IAAI,KAAJ,CAAU,CAAV,EAAY,CAAZ,EAAe,IAAf,EAAJ,IAA6B,IAAI,KAAJ,CAAU,IAAE,CAAF,CAAV,CAAe,IAAf,EAA7B,CAJwB;AAKxB,WAAO,GAAP,CALwB;GAAlB,EAML,EARE,CAAP,CALqB;CAAvB","file":"css-compiled.js","sourcesContent":["var _ = require('lodash'),\n    domEach = require('../utils').domEach;\nvar toString = Object.prototype.toString;\n\n/**\n * Set / Get css.\n *\n * @param {String|Object} prop\n * @param {String} val\n * @return {self}\n * @api public\n */\n\nexports.css = function(prop, val) {\n  if (arguments.length === 2 ||\n    // When `prop` is a \"plain\" object\n    (toString.call(prop) === '[object Object]')) {\n    return domEach(this, function(idx, el) {\n      setCss(el, prop, val, idx);\n    });\n  } else {\n    return getCss(this[0], prop);\n  }\n};\n\n/**\n * Set styles of all elements.\n *\n * @param {String|Object} prop\n * @param {String} val\n * @param {Number} idx - optional index within the selection\n * @return {self}\n * @api private\n */\n\nfunction setCss(el, prop, val, idx) {\n  if ('string' == typeof prop) {\n    var styles = getCss(el);\n    if (typeof val === 'function') {\n      val = val.call(el, idx, styles[prop]);\n    }\n\n    if (val === '') {\n      delete styles[prop];\n    } else if (val != null) {\n      styles[prop] = val;\n    }\n\n    el.attribs.style = stringify(styles);\n  } else if ('object' == typeof prop) {\n    Object.keys(prop).forEach(function(k){\n      setCss(el, k, prop[k]);\n    });\n  }\n}\n\n/**\n * Get parsed styles of the first element.\n *\n * @param {String} prop\n * @return {Object}\n * @api private\n */\n\nfunction getCss(el, prop) {\n  var styles = parse(el.attribs.style);\n  if (typeof prop === 'string') {\n    return styles[prop];\n  } else if (Array.isArray(prop)) {\n    return _.pick(styles, prop);\n  } else {\n    return styles;\n  }\n}\n\n/**\n * Stringify `obj` to styles.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction stringify(obj) {\n  return Object.keys(obj || {})\n    .reduce(function(str, prop){\n      return str += ''\n        + (str ? ' ' : '')\n        + prop\n        + ': '\n        + obj[prop]\n        + ';';\n    }, '');\n}\n\n/**\n * Parse `styles`.\n *\n * @param {String} styles\n * @return {Object}\n * @api private\n */\n\nfunction parse(styles) {\n  styles = (styles || '').trim();\n\n  if (!styles) return {};\n\n  return styles\n    .split(';')\n    .reduce(function(obj, str){\n      var n = str.indexOf(':');\n      // skip if there is no :, or if it is the first/last character\n      if (n < 1 || n === str.length-1) return obj;\n      obj[str.slice(0,n).trim()] = str.slice(n+1).trim();\n      return obj;\n    }, {});\n}\n"]}