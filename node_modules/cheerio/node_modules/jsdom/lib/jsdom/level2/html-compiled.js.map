{"version":3,"sources":["html.js"],"names":[],"mappings":"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","file":"html-compiled.js","sourcesContent":["\"use strict\";\nvar resourceLoader        = require('../browser/resource-loader'),\n    core                  = require(\"../level1/core\"),\n    applyDocumentFeatures = require('../browser/documentfeatures').applyDocumentFeatures,\n    defineGetter          = require('../utils').defineGetter,\n    defineSetter          = require('../utils').defineSetter,\n    inheritFrom           = require(\"../utils\").inheritFrom,\n    URL                   = require(\"../utils\").URL,\n    Window                = require(\"../browser/Window\"),\n    documentBaseURL       = require(\"../living/helpers/document-base-url\").documentBaseURL,\n    fallbackBaseURL       = require(\"../living/helpers/document-base-url\").fallbackBaseURL,\n    mapper                = require(\"../utils\").mapper,\n    addConstants          = require(\"../utils\").addConstants,\n    whatwgUrl             = require(\"whatwg-url-compat\"),\n    mixinURLUtils         = whatwgUrl.mixinURLUtils;\n\nconst DOMException = require ('../web-idl/DOMException');\n\nconst getAttributeValue = require(\"../living/attributes\").getAttributeValue;\nconst cloningSteps = require(\"../living/helpers/internal-constants\").cloningSteps;\nconst clone = require(\"../living/node\").clone;\nconst notImplemented = require(\"../browser/not-implemented\");\nconst proxiedWindowEventHandlers = require(\"../living/helpers/proxied-window-event-handlers\");\nconst internalConstants = require(\"../living/helpers/internal-constants\");\nconst domSymbolTree = internalConstants.domSymbolTree;\nconst accept = internalConstants.accept;\nconst createHTMLCollection = require(\"../living/html-collection\").create;\nconst NODE_TYPE = require(\"../living/node-type\");\n\n// Setup the javascript language processor\ncore.languageProcessors = {\n  javascript : require(\"./languages/javascript\").javascript\n};\n\nfunction define(elementClass, def) {\n  var tagName = def.tagName,\n    tagNames = def.tagNames || (tagName? [tagName] : []),\n    parentClass = def.parentClass || core.HTMLElement,\n    attrs = def.attributes || [],\n    proto = def.proto || {};\n\n  proto.toString = function() {\n    return '[object ' + elementClass + ']';\n  };\n\n  var elem = core[elementClass] = function(document, name) {\n    parentClass.call(this, document, name || tagName.toUpperCase());\n    if (elem._init) {\n      elem._init.call(this);\n    }\n  };\n  elem._init = def.init;\n\n  inheritFrom(parentClass, elem, proto);\n\n  attrs.forEach(function(n) {\n      var prop = n.prop || n,\n        attr = n.attr || prop.toLowerCase();\n\n      if (!n.prop || n.read !== false) {\n        defineGetter(elem.prototype, prop, function() {\n          var s = this.getAttribute(attr);\n          if (n.type && n.type === 'boolean') {\n            return s !== null;\n          }\n          if (n.type && n.type === 'long') {\n            return +s;\n          }\n          if (typeof n === 'object' && n.normalize) { // see GH-491\n            return n.normalize(s);\n          }\n          if (s === null) {\n            s = '';\n          }\n          return s;\n        });\n      }\n\n      if (!n.prop || n.write !== false) {\n        defineSetter(elem.prototype, prop, function(val) {\n          if (!val) {\n            this.removeAttribute(attr);\n          }\n          else {\n            var s = val.toString();\n            if (typeof n === 'object' && n.normalize) {\n              s = n.normalize(s);\n            }\n            this.setAttribute(attr, s);\n          }\n        });\n      }\n  });\n\n  tagNames.forEach(function(tag) {\n    core.Document.prototype._elementBuilders[tag.toLowerCase()] = function(doc, s) {\n      return new elem(doc, s);\n    };\n  });\n}\n\nfunction closest(e, tagName) {\n  tagName = tagName.toUpperCase();\n  while (e) {\n    if (e.nodeName.toUpperCase() === tagName ||\n        (e.tagName && e.tagName.toUpperCase() === tagName))\n    {\n      return e;\n    }\n    e = domSymbolTree.parent(e);\n  }\n  return null;\n}\n\nfunction descendants(e, tagName, recursive) {\n  var owner = recursive ? e._ownerDocument || e : e;\n  return createHTMLCollection(owner, mapper(e, function(n) {\n    return n.tagName === tagName;\n  }, recursive));\n}\n\nfunction firstChild(e, tagName) {\n  if (!e) {\n    return null;\n  }\n  var c = descendants(e, tagName, false);\n  return c.length > 0 ? c[0] : null;\n}\n\nfunction ResourceQueue(paused) {\n  this.paused = !!paused;\n}\nResourceQueue.prototype = {\n  push: function(callback) {\n    var q = this;\n    var item = {\n      prev: q.tail,\n      check: function() {\n        if (!q.paused && !this.prev && this.fired){\n          callback(this.err, this.data);\n          if (this.next) {\n            this.next.prev = null;\n            this.next.check();\n          }else{//q.tail===this\n      q.tail = null;\n    }\n        }\n      }\n    };\n    if (q.tail) {\n      q.tail.next = item;\n    }\n    q.tail = item;\n    return function(err, data) {\n      item.fired = 1;\n      item.err = err;\n      item.data = data;\n      item.check();\n    };\n  },\n  resume: function() {\n    if(!this.paused){\n      return;\n    }\n    this.paused = false;\n    var head = this.tail;\n    while(head && head.prev){\n      head = head.prev;\n    }\n    if(head){\n      head.check();\n    }\n  }\n};\n\nclass RequestManager {\n  constructor() {\n    this.openedRequests = [];\n  }\n  add(req) {\n    this.openedRequests.push(req);\n   }\n  remove(req) {\n    var idx = this.openedRequests.indexOf(req);\n    if(idx !== -1) {\n      this.openedRequests.splice(idx, 1);\n    }\n  }\n  close() {\n    for (const openedRequest of this.openedRequests) {\n      openedRequest.abort();\n    }\n    this.openedRequests = [];\n  }\n  size() {\n    return this.openedRequests.length;\n  }\n}\n\ncore.HTMLDocument = function HTMLDocument(options) {\n  core.Document.call(this, options);\n  this._referrer = options.referrer;\n  this._queue = new ResourceQueue(options.deferClose);\n  this._customResourceLoader = options.resourceLoader;\n  this[internalConstants.pool] = options.pool;\n  this[internalConstants.agentOptions] = options.agentOptions;\n  this[internalConstants.requestManager] = new RequestManager();\n  this.readyState = 'loading';\n\n  // Add level2 features\n  this.implementation._addFeature('core'  , '2.0');\n  this.implementation._addFeature('html'  , '2.0');\n  this.implementation._addFeature('xhtml' , '2.0');\n  this.implementation._addFeature('xml'   , '2.0');\n};\n\nvar nonInheritedTags = new Set([\n  'article', 'section', 'nav', 'aside', 'hgroup', 'header', 'footer', 'address', 'dt',\n  'dd', 'figure', 'figcaption', 'main', 'em', 'strong', 'small', 's', 'cite', 'dfn', 'abbr',\n  'ruby', 'rt', 'rp', 'code', 'var', 'samp', 'kbd', 'i', 'b', 'u', 'mark', 'bdi', 'bdo', 'wbr'\n]);\n\ninheritFrom(core.Document, core.HTMLDocument, {\n  _defaultElementBuilder: function (document, tagName) {\n    if (nonInheritedTags.has(tagName.toLowerCase())) {\n      return new core.HTMLElement(document, tagName);\n    } else {\n      return new core.HTMLUnknownElement(document, tagName);\n    }\n  },\n\n  _referrer : \"\",\n  get referrer() {\n    return this._referrer || '';\n  },\n  get domain() {\n    return \"\";\n  },\n  get images() {\n    return this.getElementsByTagName('IMG');\n  },\n  get applets() {\n    return createHTMLCollection(this, mapper(this, function(el) {\n      if (el && el.tagName) {\n        var upper = el.tagName.toUpperCase();\n        if (upper === \"APPLET\") {\n          return true;\n        } else if (upper === \"OBJECT\" &&\n          el.getElementsByTagName('APPLET').length > 0)\n        {\n          return true;\n        }\n      }\n    }));\n  },\n  get links() {\n    return createHTMLCollection(this, mapper(this, function(el) {\n      if (el && el.tagName) {\n        var upper = el.tagName.toUpperCase();\n        if (upper === \"AREA\" || (upper === \"A\" && el.href)) {\n          return true;\n        }\n      }\n    }));\n  },\n  get forms() {\n    return this.getElementsByTagName('FORM');\n  },\n  get anchors() {\n    return this.getElementsByTagName('A');\n  },\n  open  : function() {\n    for (let child = null; child = domSymbolTree.firstChild(this);) {\n      this.removeChild(child);\n    }\n    this._documentElement = null;\n    this._modified();\n    return this;\n  },\n  close : function() {\n    this._queue.resume();\n\n    // Set the readyState to 'complete' once all resources are loaded.\n    // As a side-effect the document's load-event will be dispatched.\n    resourceLoader.enqueue(this, null, function() {\n      this.readyState = 'complete';\n      var ev = this.createEvent('HTMLEvents');\n      ev.initEvent('DOMContentLoaded', false, false);\n      this.dispatchEvent(ev);\n    })(null, true);\n  },\n\n  getElementsByName : function(elementName) {\n    return createHTMLCollection(this, mapper(this, function(el) {\n      return (el.getAttribute && el.getAttribute(\"name\") === elementName);\n    }));\n  },\n\n  get title() {\n    var head = this.head,\n      title = head ? firstChild(head, 'TITLE') : null;\n    return title ? title.textContent : '';\n  },\n\n  set title(val) {\n    var title = firstChild(this.head, 'TITLE');\n    if (!title) {\n      title = this.createElement('TITLE');\n      var head = this.head;\n      if (!head) {\n        head = this.createElement('HEAD');\n        this.documentElement.insertBefore(head, this.documentElement.firstChild);\n      }\n      head.appendChild(title);\n    }\n    title.textContent = val;\n  },\n\n  get head() {\n    return firstChild(this.documentElement, 'HEAD');\n  },\n\n  set head(unused) { /* noop */ },\n\n  get body() {\n    var body = firstChild(this.documentElement, 'BODY');\n    if (!body) {\n      body = firstChild(this.documentElement, 'FRAMESET');\n    }\n    return body;\n  }\n});\n\ndefine('HTMLElement', {\n  parentClass: core.Element,\n  init: function () {\n    this._settingCssText = false;\n\n    var that = this;\n    this._style = new core.CSSStyleDeclaration(function onCssTextChange(newCssText) {\n      if (!that._settingCssText) {\n        that.setAttribute('style', newCssText);\n      }\n    });\n  },\n  proto : {\n    // Add default event behavior (click link to navigate, click button to submit\n    // form, etc). We start by wrapping dispatchEvent so we can forward events to\n    // the element's _eventDefault function (only events that did not incur\n    // preventDefault).\n    dispatchEvent : function (event) {\n      var outcome = core.Node.prototype.dispatchEvent.call(this, event)\n\n      if (!event.defaultPrevented &&\n          event.target._eventDefaults[event.type] &&\n          typeof event.target._eventDefaults[event.type] === 'function')\n      {\n        event.target._eventDefaults[event.type](event)\n      }\n      return outcome;\n    },\n    getBoundingClientRect: function () {\n      return {\n        bottom: 0,\n        height: 0,\n        left: 0,\n        right: 0,\n        top: 0,\n        width: 0\n      };\n    },\n    focus : function() {\n      this._ownerDocument.activeElement = this;\n    },\n    blur : function() {\n      this._ownerDocument.activeElement = this._ownerDocument.body;\n    },\n    click: function() {\n      // https://html.spec.whatwg.org/multipage/interaction.html#dom-click\n      // https://html.spec.whatwg.org/multipage/interaction.html#run-synthetic-click-activation-steps\n      // Not completely spec compliant due to e.g. incomplete implementations of disabled for form controls, or no\n      // implementation at all of isTrusted.\n\n      if (this.disabled) {\n        return false;\n      }\n\n      var event = new core.MouseEvent(\"click\", { bubbles: true, cancelable: true });\n      this.dispatchEvent(event);\n    },\n\n    get style() {\n      return this._style;\n    },\n    set style(value) {\n      this._style.cssText = value;\n    },\n\n    _eventDefaults : {},\n    _attrModified: function (name, value, oldValue) {\n      if (name === 'style' && value !== oldValue && !this._settingCssText) {\n        this._settingCssText = true;\n        this._style.cssText = value;\n        this._settingCssText = false;\n      }\n\n      core.Element.prototype._attrModified.apply(this, arguments);\n    }\n  },\n  attributes: [\n    'id',\n    'title',\n    'lang',\n    'dir',\n    {prop: 'className', attr: 'class', normalize: function(s) { return s || ''; }}\n  ]\n});\n\ndefine('HTMLUnknownElement', {\n  // no additional properties & attributes\n});\n\n// http://www.whatwg.org/specs/web-apps/current-work/#category-listed\nvar listedElements = /button|fieldset|input|keygen|object|select|textarea/i;\n\ndefine('HTMLFormElement', {\n  tagName: 'FORM',\n  proto: {\n    _descendantAdded: function(parent, child) {\n      var form = this;\n      for (const el of domSymbolTree.treeIterator(child)) {\n        if (typeof el._changedFormOwner === 'function') {\n          el._changedFormOwner(form);\n        }\n      };\n\n      core.HTMLElement.prototype._descendantAdded.apply(this, arguments);\n    },\n    _descendantRemoved: function(parent, child) {\n      for (const el of domSymbolTree.treeIterator(child)) {\n        if (typeof el._changedFormOwner === 'function') {\n          el._changedFormOwner(null);\n        }\n      }\n\n      core.HTMLElement.prototype._descendantRemoved.apply(this, arguments);\n    },\n    get elements() {\n      return createHTMLCollection(this._ownerDocument, mapper(this, function(e) {\n        return listedElements.test(e.nodeName) ; // TODO exclude <input type=\"image\">\n      }));\n    },\n    get length() {\n      return this.elements.length;\n    },\n    _dispatchSubmitEvent: function() {\n      var ev = this._ownerDocument.createEvent('HTMLEvents');\n      ev.initEvent('submit', true, true);\n      if (!this.dispatchEvent(ev)) {\n        this.submit();\n      };\n    },\n    submit: function() {\n    },\n    reset: function() {\n      Array.prototype.forEach.call(this.elements, function(el) {\n        if (typeof el._formReset === 'function') {\n          el._formReset();\n        }\n      });\n    }\n  },\n  attributes: [\n    'name',\n    {prop: 'acceptCharset', attr: 'accept-charset'},\n    'action',\n    'enctype',\n    'method',\n    'target'\n  ]\n});\n\ndefine('HTMLLinkElement', {\n  tagName: 'LINK',\n  proto: {\n    get [accept]() {\n      return \"text/css,*/*;q=0.1\";\n    },\n    get href() {\n      return resourceLoader.resolveResourceUrl(this._ownerDocument, this.getAttribute('href'));\n    }\n  },\n  attributes: [\n    {prop: 'disabled', type: 'boolean'},\n    'charset',\n    'href',\n    'hreflang',\n    'media',\n    'rel',\n    'rev',\n    'target',\n    'type'\n  ]\n});\n\ndefine('HTMLMetaElement', {\n  tagName: 'META',\n  attributes: [\n    'content',\n    {prop: 'httpEquiv', attr: 'http-equiv'},\n    'name',\n    'scheme'\n  ]\n});\n\ndefine('HTMLHtmlElement', {\n  tagName: 'HTML',\n  attributes: [\n    'version'\n  ]\n});\n\ndefine('HTMLHeadElement', {\n  tagName: 'HEAD',\n  attributes: [\n    'profile'\n  ]\n});\n\ndefine('HTMLTitleElement', {\n  tagName: 'TITLE',\n  proto: {\n    get text() {\n      return this.innerHTML;\n    },\n    set text(s) {\n      this.innerHTML = s;\n    }\n  }\n});\n\nfunction reparseAnchors(doc) {\n  var anchors = doc.getElementsByTagName(\"a\");\n  for (var i = 0; i < anchors.length; ++i) {\n    whatwgUrl.reparse(anchors[i]);\n  }\n}\ndefine('HTMLBaseElement', {\n  tagName: 'BASE',\n  attributes: [\n    'target'\n  ],\n  proto: {\n    get href() {\n      if (!this.hasAttribute(\"href\")) {\n        return documentBaseURL(this._ownerDocument);\n      }\n\n      var fbbu = fallbackBaseURL(this._ownerDocument);\n      var url = this.getAttribute(\"href\");\n\n      try {\n        return new URL(url, fbbu).href;\n      } catch (e) {\n        return \"\";\n      }\n    },\n    set href(value) {\n      this.setAttribute(\"href\", String(value));\n    },\n    _attrModified: function (name, value, oldVal) {\n      core.HTMLElement.prototype._attrModified.call(this, name, value, oldVal);\n      if (name === 'href') {\n        reparseAnchors(this._ownerDocument);\n      }\n    },\n\n    _detach: function () {\n      core.HTMLElement.prototype._detach.call(this);\n\n      reparseAnchors(this._ownerDocument);\n    },\n\n    _attach: function () {\n      core.HTMLElement.prototype._attach.call(this);\n\n      reparseAnchors(this._ownerDocument);\n    }\n  }\n});\n\n\ndefine('HTMLStyleElement', {\n  tagName: 'STYLE',\n  attributes: [\n    {prop: 'disabled', type: 'boolean'},\n    'media',\n    'type',\n  ]\n});\n\ndefine('HTMLBodyElement', {\n  proto: (function() {\n    var proto = {};\n    proxiedWindowEventHandlers.forEach(function (name) {\n      defineSetter(proto, name, function (handler) {\n        const window = this._ownerDocument._defaultView;\n        if (window) {\n          window[name] = handler;\n        }\n      });\n      defineGetter(proto, name, function () {\n        const window = this._ownerDocument._defaultView;\n        return window ? window[name] : null;\n      });\n    });\n    return proto;\n  })(),\n  tagName: 'BODY',\n  attributes: [\n    'aLink',\n    'background',\n    'bgColor',\n    'link',\n    'text',\n    'vLink'\n  ]\n});\n\ndefine('HTMLSelectElement', {\n  tagName: 'SELECT',\n  proto: {\n    _formReset: function() {\n      Array.prototype.forEach.call(this.options, function(option) {\n        option._selectedness = option.defaultSelected;\n        option._dirtyness = false;\n      });\n      this._askedForAReset();\n    },\n    _askedForAReset: function() {\n      if (this.hasAttribute('multiple')) {\n        return;\n      }\n\n      var selected = Array.prototype.filter.call(this.options, function(option){\n        return option._selectedness;\n      });\n\n      // size = 1 is default if not multiple\n      if ((!this.size || this.size === 1) && !selected.length) {\n        // select the first option that is not disabled\n        for (var i = 0; i < this.options.length; ++i) {\n          var option = this.options[i];\n          var disabled = option.disabled;\n          const parentNode = domSymbolTree.parent(option);\n          if (parentNode &&\n              parentNode.nodeName.toUpperCase() === 'OPTGROUP' &&\n              parentNode.disabled) {\n            disabled = true;\n          }\n\n          if (!disabled) {\n            // (do not set dirty)\n            option._selectedness = true;\n            break;\n          }\n        }\n      } else if (selected.length >= 2) {\n        // select the last selected option\n        selected.forEach(function(option, index) {\n          option._selectedness = index === selected.length - 1;\n        });\n      }\n    },\n    _descendantAdded: function(parent, child) {\n      if (child.nodeType === NODE_TYPE.ELEMENT_NODE) {\n        this._askedForAReset();\n      }\n\n      core.HTMLElement.prototype._descendantAdded.apply(this, arguments);\n    },\n    _descendantRemoved: function(parent, child) {\n      if (child.nodeType === NODE_TYPE.ELEMENT_NODE) {\n        this._askedForAReset();\n      }\n\n      core.HTMLElement.prototype._descendantRemoved.apply(this, arguments);\n    },\n    _attrModified: function(name, value) {\n      if (name === 'multiple' || name === 'size') {\n        this._askedForAReset();\n      }\n      core.HTMLElement.prototype._attrModified.apply(this, arguments);\n    },\n    get options() {\n      // TODO: implement HTMLOptionsCollection\n      return createHTMLCollection(this, mapper(this, function(n) {\n        return n.nodeName === 'OPTION';\n      }));\n    },\n\n    get length() {\n      return this.options.length;\n    },\n\n    get selectedIndex() {\n      return Array.prototype.reduceRight.call(this.options, function(prev, option, i) {\n        return option.selected ? i : prev;\n      }, -1);\n    },\n\n    set selectedIndex(index) {\n      Array.prototype.forEach.call(this.options, function(option, i) {\n        option.selected = i === index;\n      });\n    },\n\n    get value() {\n      var i = this.selectedIndex;\n      if (this.options.length && (i === -1)) {\n        i = 0;\n      }\n      if (i === -1) {\n        return '';\n      }\n      return this.options[i].value;\n    },\n\n    set value(val) {\n      var self = this;\n      Array.prototype.forEach.call(this.options, function(option) {\n        if (option.value === val) {\n          option.selected = true;\n        } else {\n          if (!self.hasAttribute('multiple')) {\n            // Remove the selected bit from all other options in this group\n            // if the multiple attr is not present on the select\n            option.selected = false;\n          }\n        }\n      });\n    },\n\n    get form() {\n      return closest(this, 'FORM');\n    },\n\n    get type() {\n      return this.multiple ? 'select-multiple' : 'select-one';\n    },\n\n    add: function(opt, before) {\n      if (before) {\n        this.insertBefore(opt, before);\n      }\n      else {\n        this.appendChild(opt);\n      }\n    },\n\n    remove: function(index) {\n      var opts = this.options;\n      if (index >= 0 && index < opts.length) {\n        var el = opts[index];\n        domSymbolTree.parent(el).removeChild(el);\n      }\n    }\n\n  },\n  attributes: [\n    {prop: 'disabled', type: 'boolean'},\n    {prop: 'multiple', type: 'boolean'},\n    'name',\n    {prop: 'size', type: 'long'},\n    {prop: 'tabIndex', type: 'long'},\n  ]\n});\n\ndefine('HTMLOptGroupElement', {\n  tagName: 'OPTGROUP',\n  attributes: [\n    {prop: 'disabled', type: 'boolean'},\n    'label'\n  ]\n});\n\ndefine('HTMLOptionElement', {\n  tagName: 'OPTION',\n  proto: {\n    // whenever selectedness is set to true, make sure all\n    // other options set selectedness to false\n    _selectedness: false,\n    _dirtyness: false,\n    _removeOtherSelectedness: function() {\n      //Remove the selectedness flag from all other options in this select\n      var select = this._selectNode;\n\n      if (select && !select.multiple) {\n        var o = select.options;\n        for (var i = 0; i < o.length; i++) {\n          if (o[i] !== this) {\n            o[i]._selectedness = false;\n          }\n        }\n      }\n    },\n    _askForAReset: function() {\n      var select = this._selectNode;\n      if (select) {\n        select._askedForAReset();\n      }\n    },\n    _attrModified: function(name, value) {\n      if (!this._dirtyness && name === 'selected') {\n        this._selectedness = this.defaultSelected;\n        if (this._selectedness) {\n          this._removeOtherSelectedness();\n        }\n        this._askForAReset();\n      }\n      core.HTMLElement.prototype._attrModified.apply(this, arguments);\n    },\n    get _selectNode() {\n      var select = domSymbolTree.parent(this);\n      if (!select) return null;\n      if (select.nodeName.toUpperCase() !== 'SELECT') {\n        select = domSymbolTree.parent(select);\n        if (!select) return null;\n        if (select.nodeName.toUpperCase() !== 'SELECT') return null;\n      }\n      return select;\n    },\n    get form() {\n      return closest(this, 'FORM');\n    },\n    get defaultSelected() {\n      return this.getAttribute('selected') !== null;\n    },\n    set defaultSelected(s) {\n      if (s) this.setAttribute('selected', 'selected');\n      else this.removeAttribute('selected');\n    },\n    get text() {\n      return this.innerHTML;\n    },\n    get value() {\n      return (this.hasAttribute('value')) ? this.getAttribute('value') : this.innerHTML;\n    },\n    set value(val) {\n      this.setAttribute('value', val);\n    },\n    get index() {\n      return Array.prototype.indexOf.call(closest(this, 'SELECT').options, this);\n    },\n    get selected() {\n      return this._selectedness;\n    },\n    set selected(s) {\n      this._dirtyness = true;\n      this._selectedness = !!s;\n      if (this._selectedness) {\n        this._removeOtherSelectedness();\n      }\n      this._askForAReset();\n    }\n  },\n  attributes: [\n    {prop: 'disabled', type: 'boolean'},\n    'label'\n  ]\n});\n\nconst filesSymbol = Symbol(\"files\");\n\ndefine('HTMLInputElement', {\n  tagName: 'INPUT',\n  init: function() {\n    if (!this.type) {\n      this.type = 'text';\n    }\n    this._selectionStart = this._selectionEnd = 0;\n    this._selectionDirection = \"none\";\n  },\n  proto: {\n    _value: null,\n    _dirtyValue: false,\n    _checkedness: false,\n    _dirtyCheckedness: false,\n    _attrModified: function(name, value) {\n      if (!this._dirtyValue && name === 'value') {\n        this._value = this.defaultValue;\n      }\n      if (!this._dirtyCheckedness && name === 'checked') {\n        this._checkedness = this.defaultChecked;\n        if (this._checkedness) {\n          this._removeOtherRadioCheckedness();\n        }\n      }\n\n      if (name === 'name' || name === 'type') {\n        if (this._checkedness) {\n          this._removeOtherRadioCheckedness();\n        }\n      }\n\n      core.HTMLElement.prototype._attrModified.apply(this, arguments);\n    },\n    _formReset: function() {\n      this._value = this.defaultValue;\n      this._dirtyValue = false;\n      this._checkedness = this.defaultChecked;\n      this._dirtyCheckedness = false;\n      if (this._checkedness) {\n        this._removeOtherRadioCheckedness();\n      }\n    },\n    _changedFormOwner: function(newForm) {\n      if (this._checkedness) {\n        this._removeOtherRadioCheckedness();\n      }\n    },\n    _removeOtherRadioCheckedness: function() {\n      var root = this._radioButtonGroupRoot;\n      if (!root) {\n        return;\n      }\n\n      var name = this.name.toLowerCase();\n      var radios = createHTMLCollection(this, mapper(root, function(el) {\n        return el.type === 'radio' &&\n               el.name &&\n               el.name.toLowerCase() === name &&\n               el._radioButtonGroupRoot === root;\n      }));\n\n      Array.prototype.forEach.call(radios, function(radio) {\n        if (radio !== this) {\n          radio._checkedness = false;\n        }\n      }, this);\n    },\n    get _radioButtonGroupRoot() {\n      if (this.type !== 'radio' || !this.name) {\n        return null;\n      }\n\n      var e = domSymbolTree.parent(this);\n      while (e) {\n        // root node of this home sub tree\n        // or the form element we belong to\n        if (!domSymbolTree.parent(e) || e.nodeName.toUpperCase() === 'FORM') {\n          return e;\n        }\n        e = domSymbolTree.parent(e);\n      }\n      return null;\n    },\n    get form() {\n      return closest(this, 'FORM');\n    },\n    get defaultValue() {\n      var val = this.getAttribute('value');\n      return val !== null ? val : \"\";\n    },\n    set defaultValue(val) {\n      this.setAttribute('value', String(val));\n    },\n    get defaultChecked() {\n      return this.getAttribute('checked') !== null;\n    },\n    set defaultChecked(s) {\n      if (s) this.setAttribute('checked', 'checked');\n      else this.removeAttribute('checked');\n    },\n    get checked() {\n      return this._checkedness;\n    },\n    set checked(checked) {\n      this._checkedness = !!checked;\n      this._dirtyCheckedness = true;\n      if (this._checkedness) {\n        this._removeOtherRadioCheckedness();\n      }\n    },\n    get value() {\n      if (this._value === null) {\n        return '';\n      }\n      return this._value;\n    },\n    set value(val) {\n      this._dirtyValue = true;\n\n      if (val === null) {\n        this._value = null;\n      } else {\n        this._value = String(val);\n      }\n\n      if (this._allowSelection()) {\n        this._selectionStart = 0;\n        this._selectionEnd = 0;\n        this._selectionDirection = 'none';\n      }\n    },\n    get files() {\n      if (this.type === \"file\") {\n        this[filesSymbol] = this[filesSymbol] || new core.FileList();\n      } else {\n        this[filesSymbol] = null;\n      }\n      return this[filesSymbol];\n    },\n    get type() {\n        var type = this.getAttribute('type');\n        return type ? type : 'text';\n    },\n    set type(type) {\n        this.setAttribute('type', type);\n    },\n    blur: function() {\n      this._ownerDocument.activeElement = this._ownerDocument.body;\n    },\n    focus: function() {\n      this._ownerDocument.activeElement = this;\n    },\n\n    //LIVING\n    _dispatchSelectEvent: function() {\n      var event = this._ownerDocument.createEvent(\"HTMLEvents\");\n      event.initEvent(\"select\", true, true);\n      this.dispatchEvent(event);\n    },\n    _getValueLength: function() {\n      return typeof this.value === \"string\" ? this.value.length : 0;\n    },\n    _allowSelection: function() {\n      var type = this.type.toLowerCase();\n      return  type === \"text\" || type === \"search\" || type === \"tel\" ||\n              type === \"url\" || type === \"password\";\n    },\n    select: function() {\n      if (!this._allowSelection()) {\n        throw new DOMException(DOMException.INVALID_STATE_ERR);\n      }\n\n      this._selectionStart = 0;\n      this._selectionEnd = this._getValueLength();\n      this._selectionDirection = \"none\";\n      this._dispatchSelectEvent();\n    },\n    get selectionStart() {\n      if (!this._allowSelection()) {\n        throw new DOMException(DOMException.INVALID_STATE_ERR);\n      }\n\n      return this._selectionStart;\n    },\n    set selectionStart(start) {\n      this.setSelectionRange(start, Math.max(start, this._selectionEnd), this._selectionDirection);\n    },\n    get selectionEnd() {\n      if(!this._allowSelection()) {\n        throw new DOMException(DOMException.INVALID_STATE_ERR);\n      }\n      return this._selectionEnd;\n    },\n    set selectionEnd(end) {\n      this.setSelectionRange(this._selectionStart, end, this._selectionDirection);\n    },\n    get selectionDirection() {\n      if(!this._allowSelection()) {\n        throw new DOMException(DOMException.INVALID_STATE_ERR);\n      }\n      return this._selectionDirection;\n    },\n    set selectionDirection(dir) {\n      this.setSelectionRange(this._selectionStart, this._selectionEnd, dir);\n    },\n    setSelectionRange: function(start, end, dir) {\n      if (!this._allowSelection()) {\n        throw new DOMException(DOMException.INVALID_STATE_ERR);\n      }\n\n      this._selectionEnd = Math.min(end, this._getValueLength());\n      this._selectionStart = Math.min(start, this._selectionEnd);\n      this._selectionDirection = ((dir == \"forward\") || (dir == \"backward\")) ? dir : \"none\";\n      this._dispatchSelectEvent();\n    },\n\n    setRangeText: function(repl, start, end, selectionMode) {\n      if (arguments.length < 2) {\n        start = this._selectionStart;\n        end = this._selectionEnd;\n      } else if (start > end) {\n        throw new core.DOMException(core.INDEX_SIZE_ERR);\n      }\n\n      start = Math.min(start, this._getValueLength());\n      end = Math.min(end, this._getValueLength());\n\n      var val = this.value;\n      var selStart = this._selectionStart;\n      var selEnd = this._selectionEnd;\n\n      this.value = val.slice(0, start) + repl + val.slice(end);\n\n      var newEnd = start + this.value.length;\n\n      if (selectionMode == \"select\") {\n        this.setSelectionRange(start, newEnd);\n      } else if(selectionMode === \"start\") {\n        this.setSelectionRange(start, start);\n      } else if(selectionMode === \"end\") {\n        this.setSelectionRange(newEnd, newEnd);\n      } else {//preserve\n        var delta = repl.length - (end - start);\n\n        if (selStart > end) {\n          selStart += delta;\n        } else if (selStart > start) {\n          selStart = start;\n        }\n\n        if (selEnd > end) {\n          selEnd += delta;\n        } else if (selEnd > start) {\n          selEnd = newEnd;\n        }\n\n        this.setSelectionRange(selStart, selEnd);\n      }\n    },\n\n    _eventDefaults: {\n      click: function (event) {\n        var target = event.target;\n\n        if (target.type === 'checkbox') {\n          target.checked = !target.checked;\n        } else if (target.type === 'radio') {\n          target.checked = true;\n        } else if (target.type === 'submit') {\n          var form = this.form;\n          if (form) {\n            form._dispatchSubmitEvent();\n          }\n        }\n      }\n    }\n  },\n  attributes: [\n    'accept',\n    'accessKey',\n    'align',\n    'alt',\n    {prop: 'disabled', type: 'boolean'},\n    {prop: 'maxLength', type: 'long'},\n    'name',\n    {prop: 'readOnly', type: 'boolean'},\n    {prop: 'size', type: 'long'},\n    'src',\n    {prop: 'tabIndex', type: 'long'},\n    {prop: 'type', normalize: function(val) {\n        return val ? val.toLowerCase() : 'text';\n    }},\n    'useMap'\n  ]\n});\n\ndefine('HTMLTextAreaElement', {\n  tagName: 'TEXTAREA',\n  init: function() {\n    this._selectionStart = this._selectionEnd = 0;\n    this._selectionDirection = \"none\";\n  },\n  proto: {\n    _apiValue: null,\n    _dirtyValue: false,\n    // \"raw value\" and \"value\" are not used here because jsdom has no GUI\n    _formReset: function() {\n      this._apiValue = null;\n      this._dirtyValue = false;\n    },\n    get form() {\n      return closest(this, 'FORM');\n    },\n    get defaultValue() {\n      return this.textContent;\n    },\n    set defaultValue(val) {\n      this.textContent = val;\n    },\n    get value() {\n      // The WHATWG specifies that when \"textContent\" changes, the \"raw value\"\n      // (just the API value in jsdom) must also be updated.\n      // This slightly different solution has identical results, but is a lot less complex.\n      if (this._dirtyValue) {\n        if (this._apiValue === null) {\n          return '';\n        }\n        return this._apiValue;\n      }\n\n      var val = this.defaultValue;\n      val = val.replace(/\\r\\n|\\r/g, '\\n'); // API value normalizes line breaks per WHATWG\n      return val;\n    },\n    set value(val) {\n      if (val) {\n        val = val.replace(/\\r\\n|\\r/g, '\\n'); // API value normalizes line breaks per WHATWG\n      }\n\n      this._dirtyValue = true;\n      this._apiValue = val;\n\n      this._selectionStart = 0;\n      this._selectionEnd = 0;\n      this._selectionDirection = 'none';\n    },\n    get textLength() {\n      return this.value.length; // code unit length (16 bit)\n    },\n    get type() {\n      return 'textarea';\n    },\n    blur : function() {\n      this._ownerDocument.activeElement = this._ownerDocument.body;\n    },\n    focus : function() {\n      this._ownerDocument.activeElement = this;\n    },\n\n    //LIVING\n    _dispatchSelectEvent: function() {\n      var event = this._ownerDocument.createEvent(\"HTMLEvents\");\n      event.initEvent(\"select\", true, true);\n      this.dispatchEvent(event);\n    },\n    _getValueLength: function() {\n      return typeof this.value == \"string\" ? this.value.length : 0;\n    },\n    select: function() {\n      this._selectionStart = 0;\n      this._selectionEnd = this._getValueLength();\n      this._selectionDirection = \"none\";\n      this._dispatchSelectEvent();\n    },\n    get selectionStart() {\n      return this._selectionStart;\n    },\n    set selectionStart(start) {\n      this.setSelectionRange(start, Math.max(start, this._selectionEnd), this._selectionDirection);\n    },\n    get selectionEnd() {\n      return this._selectionEnd;\n    },\n    set selectionEnd(end) {\n      this.setSelectionRange(this._selectionStart, end, this._selectionDirection);\n    },\n    get selectionDirection() {\n      return this._selectionDirection;\n    },\n    set selectionDirection(dir) {\n      this.setSelectionRange(this._selectionStart, this._selectionEnd, dir);\n    },\n    setSelectionRange: function(start, end, dir) {\n      this._selectionEnd = Math.min(end, this._getValueLength());\n      this._selectionStart = Math.min(start, this._selectionEnd);\n      this._selectionDirection = ((dir == \"forward\") || (dir == \"backward\")) ? dir : \"none\";\n      this._dispatchSelectEvent();\n    },\n    setRangeText: function(repl, start, end, selectionMode) {\n      if (arguments.length < 2) {\n        start = this._selectionStart;\n        end = this._selectionEnd;\n      } else if (start > end) {\n        throw new core.DOMException(core.INDEX_SIZE_ERR);\n      }\n\n      start = Math.min(start, this._getValueLength());\n      end = Math.min(end, this._getValueLength());\n\n      var val = this.value;\n      var selStart = this._selectionStart;\n      var selEnd = this._selectionEnd;\n\n      this.value = val.slice(0, start) + repl + val.slice(end);\n\n      var newEnd = start + this.value.length;\n\n      if (selectionMode === \"select\") {\n        this.setSelectionRange(start, newEnd);\n      } else if (selectionMode === \"start\") {\n        this.setSelectionRange(start, start);\n      } else if (selectionMode === \"end\") {\n        this.setSelectionRange(newEnd, newEnd);\n      } else {//preserve\n        var delta = repl.length - (end-start);\n\n        if(selStart > end) {\n          selStart += delta;\n        } else if(selStart > start) {\n          selStart = start;\n        }\n\n        if (selEnd > end) {\n          selEnd += delta;\n        } else if (selEnd > start) {\n          selEnd = newEnd;\n        }\n\n        this.setSelectionRange(selStart, selEnd);\n      }\n    }\n  },\n  attributes: [\n    'accessKey',\n    {prop: 'cols', type: 'long'},\n    {prop: 'disabled', type: 'boolean'},\n    {prop: 'maxLength', type: 'long'},\n    'name',\n    {prop: 'readOnly', type: 'boolean'},\n    {prop: 'rows', type: 'long'},\n    {prop: 'tabIndex', type: 'long'}\n  ]\n});\n\ndefine('HTMLButtonElement', {\n  tagName: 'BUTTON',\n  proto: {\n    get form() {\n      return closest(this, 'FORM');\n    },\n    _eventDefaults: {\n      click: function (event) {\n        var target = event.target;\n        var form = target.form;\n        if (form) {\n          if (target.type === 'submit') {\n            form._dispatchSubmitEvent();\n          }\n        }\n      }\n    },\n    get type() {\n      const typeAttr = (this.getAttribute('type') || '').toLowerCase();\n      switch (typeAttr) {\n        case 'submit':\n        case 'reset':\n        case 'button':\n        case 'menu':\n          return typeAttr;\n        default:\n          return 'submit';\n      }\n    },\n    set type(v) {\n      v = String(v).toLowerCase();\n      switch (v) {\n        case 'submit':\n        case 'reset':\n        case 'button':\n        case 'menu':\n          this.setAttribute('type', v);\n          break;\n        default:\n          this.setAttribute('type', 'submit');\n          break;\n      }\n    }\n  },\n  attributes: [\n    'accessKey',\n    {prop: 'disabled', type: 'boolean'},\n    'name',\n    {prop: 'tabIndex', type: 'long'},\n    'value'\n  ]\n});\n\ndefine('HTMLLabelElement', {\n  tagName: 'LABEL',\n  proto: {\n    get form() {\n      return closest(this, 'FORM');\n    }\n  },\n  attributes: [\n    'accessKey',\n    {prop: 'htmlFor', attr: 'for'}\n  ]\n});\n\ndefine('HTMLFieldSetElement', {\n  tagName: 'FIELDSET',\n  proto: {\n    get form() {\n      return closest(this, 'FORM');\n    }\n  }\n});\n\ndefine('HTMLLegendElement', {\n  tagName: 'LEGEND',\n  proto: {\n    get form() {\n      return closest(this, 'FORM');\n    }\n  },\n  attributes: [\n    'accessKey',\n    'align'\n  ]\n});\n\ndefine('HTMLUListElement', {\n  tagName: 'UL',\n  attributes: [\n    {prop: 'compact', type: 'boolean'},\n    'type'\n  ]\n});\n\ndefine('HTMLOListElement', {\n  tagName: 'OL',\n  attributes: [\n    {prop: 'compact', type: 'boolean'},\n    {prop: 'start', type: 'long'},\n    'type'\n  ]\n});\n\ndefine('HTMLDListElement', {\n  tagName: 'DL',\n  attributes: [\n    {prop: 'compact', type: 'boolean'}\n  ]\n});\n\ndefine('HTMLDirectoryElement', {\n  tagName: 'DIR',\n  attributes: [\n    {prop: 'compact', type: 'boolean'}\n  ]\n});\n\ndefine('HTMLMenuElement', {\n  tagName: 'MENU',\n  attributes: [\n    {prop: 'compact', type: 'boolean'}\n  ]\n});\n\ndefine('HTMLLIElement', {\n  tagName: 'LI',\n  attributes: [\n    'type',\n    {prop: 'value', type: 'long'}\n  ]\n});\n\ndefine('HTMLCanvasElement', {\n  tagName: 'CANVAS',\n  init() {\n    let Canvas;\n    try {\n      Canvas = require(\"canvas\");\n    } catch (e) {}\n\n    if (typeof Canvas === \"function\") { // in browserify, the require will succeed but return an empty object\n      this._nodeCanvas = new Canvas(this.width, this.height);\n    }\n  },\n  proto: {\n    _attrModified(name, value, oldValue) {\n      if ((name == \"width\" || name === \"height\") && this._nodeCanvas) {\n        const Canvas = require(\"canvas\");\n        this._nodeCanvas = new Canvas(this.width, this.height);\n      }\n\n      return core.HTMLElement.prototype._attrModified.apply(this, arguments);\n    },\n    getContext(contextId) {\n      if (this._nodeCanvas) {\n        return this._nodeCanvas.getContext(contextId) || null;\n      }\n\n      notImplemented(\"HTMLCanvasElement.prototype.getContext (without installing the canvas npm package)\",\n        this._ownerDocument._defaultView);\n    },\n    probablySupportsContext(contextId) {\n      if (this._nodeCanvas) {\n        return contextId === \"2d\";\n      }\n      return false;\n    },\n    setContext(context) {\n      notImplemented(\"HTMLCanvasElement.prototype.setContext\");\n    },\n    toDataURL() {\n      if (this._nodeCanvas) {\n        return this._nodeCanvas.toDataURL.apply(this._nodeCanvas, arguments);\n      }\n\n      notImplemented(\"HTMLCanvasElement.prototype.toDataURL (without installing the canvas npm package)\",\n        this._ownerDocument._defaultView);\n    },\n    get width() {\n      const parsed = parseInt(this.getAttribute(\"width\"));\n      return (parsed < 0 || Number.isNaN(parsed)) ? 300 : parsed;\n    },\n    set width(v) {\n      v = parseInt(v);\n      v = (Number.isNaN(v) || v < 0) ? 300 : v;\n      this.setAttribute(\"width\", v);\n    },\n    get height() {\n      const parsed = parseInt(this.getAttribute(\"height\"));\n      return (parsed < 0 || Number.isNaN(parsed)) ? 150 : parsed;\n    },\n    set height(v) {\n      v = parseInt(v);\n      v = (Number.isNaN(v) || v < 0) ? 150 : v;\n      this.setAttribute(\"height\", v);\n    }\n  }\n});\n\ndefine('HTMLDivElement', {\n  tagName: 'DIV',\n  attributes: [\n    'align'\n  ]\n});\n\ndefine('HTMLParagraphElement', {\n  tagName: 'P',\n  attributes: [\n    'align'\n  ]\n});\n\ndefine('HTMLHeadingElement', {\n  tagNames: ['H1','H2','H3','H4','H5','H6'],\n  attributes: [\n    'align'\n  ]\n});\n\ndefine('HTMLQuoteElement', {\n  tagNames: ['Q','BLOCKQUOTE'],\n  attributes: [\n    'cite'\n  ]\n});\n\ndefine('HTMLPreElement', {\n  tagName: 'PRE',\n  attributes: [\n    {prop: 'width', type: 'long'}\n  ]\n});\n\ndefine('HTMLBRElement', {\n  tagName: 'BR',\n  attributes: [\n    'clear'\n  ]\n});\n\ndefine('HTMLBaseFontElement', {\n  tagName: 'BASEFONT',\n  attributes: [\n    'color',\n    'face',\n    {prop: 'size', type: 'long'}\n  ]\n});\n\ndefine('HTMLFontElement', {\n  tagName: 'FONT',\n  attributes: [\n    'color',\n    'face',\n    'size'\n  ]\n});\n\ndefine('HTMLHRElement', {\n  tagName: 'HR',\n  attributes: [\n    'align',\n    {prop: 'noShade', type: 'boolean'},\n    'size',\n    'width'\n  ]\n});\n\ndefine('HTMLModElement', {\n  tagNames: ['INS', 'DEL'],\n  attributes: [\n    'cite',\n    'dateTime'\n  ]\n});\n\ndefine('HTMLAnchorElement', {\n  tagName: 'A',\n\n  init: function () {\n    mixinURLUtils(this, function getTheBase() {\n      return documentBaseURL(this._ownerDocument);\n    }, function updateSteps(value) {\n      this.setAttribute(\"href\", value);\n    });\n  },\n\n  proto: {\n    _attrModified: function(name, value, oldVal) {\n      if (name === 'href') {\n        whatwgUrl.setTheInput(this, value);\n      }\n\n      core.HTMLElement.prototype._attrModified.call(this, name, value, oldVal);\n    },\n  },\n\n  attributes: [\n    'accessKey',\n    'charset',\n    'coords',\n    'hreflang',\n    'name',\n    'rel',\n    'rev',\n    'shape',\n    {prop: 'tabIndex', type: 'long'},\n    'target',\n    'type'\n  ]\n});\n\ndefine('HTMLImageElement', {\n  tagName: 'IMG',\n  proto: {\n    _attrModified: function(name, value, oldVal) {\n      if (name == 'src' && value !== oldVal) {\n        resourceLoader.enqueue(this, null, function () { })();\n      }\n\n      core.HTMLElement.prototype._attrModified.call(this, name, value, oldVal);\n    },\n    get [accept]() {\n      return \"image/png,image/*;q=0.8,*/*;q=0.5\";\n    },\n    get src() {\n      return resourceLoader.resolveResourceUrl(this._ownerDocument, this.getAttribute('src'));\n    }\n  },\n  attributes: [\n    'name',\n    'align',\n    'alt',\n    'border',\n    {prop: 'height', type: 'long'},\n    {prop: 'hspace', type: 'long'},\n    {prop: 'isMap', type: 'boolean'},\n    'longDesc',\n    {prop: 'src', type: 'string', read: false},\n    'useMap',\n    {prop: 'vspace', type: 'long'},\n    {prop: 'width', type: 'long'}\n  ]\n});\n\ndefine('HTMLObjectElement', {\n  tagName: 'OBJECT',\n  proto: {\n    get form() {\n      return closest(this, 'FORM');\n    },\n    get contentDocument() {\n      return null;\n    }\n  },\n  attributes: [\n    'code',\n    'align',\n    'archive',\n    'border',\n    'codeBase',\n    'codeType',\n    'data',\n    {prop: 'declare', type: 'boolean'},\n    {prop: 'height',  type: 'long'},\n    {prop: 'hspace',  type: 'long'},\n    'name',\n    'standby',\n    {prop: 'tabIndex', type: 'long'},\n    'type',\n    'useMap',\n    {prop: 'vspace', type: 'long'},\n    {prop: 'width', type: 'long'}\n  ]\n});\n\ndefine('HTMLParamElement', {\n  tagName: 'PARAM',\n  attributes: [\n    'name',\n    'type',\n    'value',\n    'valueType'\n  ]\n});\n\ndefine('HTMLAppletElement', {\n  tagName: 'APPLET',\n  attributes: [\n    'align',\n    'alt',\n    'archive',\n    'code',\n    'codeBase',\n    'height',\n    {prop: 'hspace', type: 'long'},\n    'name',\n    'object',\n    {prop: 'vspace', type: 'long'},\n    'width'\n  ]\n});\n\ndefine('HTMLMapElement', {\n  tagName: 'MAP',\n  proto: {\n    get areas() {\n      return this.getElementsByTagName(\"AREA\");\n    }\n  },\n  attributes: [\n    'name'\n  ]\n});\n\ndefine('HTMLAreaElement', {\n  tagName: 'AREA',\n  attributes: [\n    'accessKey',\n    'alt',\n    'coords',\n    'href',\n    {prop: 'noHref', type: 'boolean'},\n    'shape',\n    {prop: 'tabIndex', type: 'long'},\n    'target'\n  ]\n});\n\ndefine('HTMLScriptElement', {\n  tagName: 'SCRIPT',\n  init: function() {\n    this.addEventListener('DOMNodeInsertedIntoDocument', function() {\n      if (this.src) {\n        resourceLoader.load(this, this.src, this._eval);\n      }\n      else {\n        resourceLoader.enqueue(this, this._ownerDocument.URL, this._eval)(null, this.text);\n      }\n    });\n  },\n  proto: {\n    _eval: function(text, filename) {\n      if (this._ownerDocument.implementation._hasFeature(\"ProcessExternalResources\", \"script\") &&\n          this.language                                                                      &&\n          core.languageProcessors[this.language])\n      {\n        this._ownerDocument._writeAfterElement = this;\n        core.languageProcessors[this.language](this, text, filename);\n        delete this._ownerDocument._writeAfterElement;\n      }\n    },\n    get language() {\n      var type = this.type || \"text/javascript\";\n      return type.split(\"/\").pop().toLowerCase();\n    },\n    get text() {\n      let text = '';\n      for (const child of domSymbolTree.childrenIterator(this)) {\n        text += child.nodeValue;\n      }\n      return text;\n    },\n    set text(text) {\n      for (let child = null; child = domSymbolTree.firstChild(this);) {\n        this.removeChild(child);\n      }\n      this.appendChild(this._ownerDocument.createTextNode(text));\n    }\n  },\n  attributes : [\n    {prop: 'defer', 'type': 'boolean'},\n    'htmlFor',\n    'event',\n    'charset',\n    'type',\n    'src'\n  ]\n})\n\ndefine('HTMLTableElement', {\n  tagName: 'TABLE',\n  proto: {\n    get caption() {\n      return firstChild(this, 'CAPTION');\n    },\n    get tHead() {\n      return firstChild(this, 'THEAD');\n    },\n    get tFoot() {\n      return firstChild(this, 'TFOOT');\n    },\n    get rows() {\n      if (!this._rows) {\n        var table = this;\n        this._rows = createHTMLCollection(this._ownerDocument, function() {\n          const sections = [];\n          if (table.tHead) {\n            sections.push(table.tHead);\n          }\n          sections.push.apply(sections, table.tBodies);\n          if (table.tFoot) {\n            sections.push(table.tFoot);\n          }\n\n          if (sections.length === 0) {\n            return domSymbolTree.childrenToArray(table, {filter: function(el) {\n              return el.tagName === 'TR';\n            }});\n          }\n\n          const rows = [];\n          for (const s of sections) {\n            rows.push.apply(rows, s.rows);\n          }\n          return rows;\n        });\n      }\n      return this._rows;\n    },\n    get tBodies() {\n      if (!this._tBodies) {\n        this._tBodies = descendants(this, 'TBODY', false);\n      }\n      return this._tBodies;\n    },\n    createTHead: function() {\n      var el = this.tHead;\n      if (!el) {\n        el = this._ownerDocument.createElement('THEAD');\n        this.appendChild(el);\n      }\n      return el;\n    },\n    deleteTHead: function() {\n      var el = this.tHead;\n      if (el) {\n        domSymbolTree.parent(el).removeChild(el);\n      }\n    },\n    createTFoot: function() {\n      var el = this.tFoot;\n      if (!el) {\n        el = this._ownerDocument.createElement('TFOOT');\n        this.appendChild(el);\n      }\n      return el;\n    },\n    deleteTFoot: function() {\n      var el = this.tFoot;\n      if (el) {\n        domSymbolTree.parent(el).removeChild(el);\n      }\n    },\n    createCaption: function() {\n      var el = this.caption;\n      if (!el) {\n        el = this._ownerDocument.createElement('CAPTION');\n        this.appendChild(el);\n      }\n      return el;\n    },\n    deleteCaption: function() {\n      var c = this.caption;\n      if (c) {\n        domSymbolTree.parent(c).removeChild(c);\n      }\n    },\n    insertRow: function(index) {\n      var tr = this._ownerDocument.createElement('TR');\n\n      if (!domSymbolTree.hasChildren(this)) {\n        this.appendChild(this._ownerDocument.createElement('TBODY'));\n      }\n      var rows = this.rows;\n      if (index < -1 || index > rows.length) {\n        throw new core.DOMException(core.DOMException.INDEX_SIZE_ERR);\n      }\n      if (index === -1 || (index === 0 && rows.length === 0)) {\n        this.tBodies.item(0).appendChild(tr);\n      }\n      else if (index === rows.length) {\n        var ref = rows[index-1];\n        domSymbolTree.parent(ref).appendChild(tr);\n      }\n      else {\n        var ref = rows[index];\n        domSymbolTree.parent(ref).insertBefore(tr, ref);\n      }\n      return tr;\n    },\n    deleteRow: function(index) {\n      var rows = this.rows, l = rows.length;\n      if (index === -1) {\n        index = l-1;\n      }\n      if (index < 0 || index >= l) {\n        throw new core.DOMException(core.DOMException.INDEX_SIZE_ERR);\n      }\n      var tr = rows[index];\n      domSymbolTree.parent(tr).removeChild(tr);\n    }\n  },\n  attributes: [\n    'align',\n    'bgColor',\n    'border',\n    'cellPadding',\n    'cellSpacing',\n    'frame',\n    'rules',\n    'summary',\n    'width'\n  ]\n});\n\ndefine('HTMLTableCaptionElement', {\n  tagName: 'CAPTION',\n  attributes: [\n    'align'\n  ]\n});\n\ndefine('HTMLTableColElement', {\n  tagNames: ['COL','COLGROUP'],\n  attributes: [\n    { prop: 'span', type: 'long' },\n    'align',\n    { prop: 'ch', attr: 'char' },\n    { prop: 'chOff', attr: 'charoff' },\n    'vAlign',\n    'width'\n  ]\n});\n\ndefine('HTMLTableSectionElement', {\n  tagNames: ['THEAD','TBODY','TFOOT'],\n  proto: {\n    get rows() {\n      if (!this._rows) {\n        this._rows = descendants(this, 'TR', false);\n      }\n      return this._rows;\n    },\n    insertRow: function(index) {\n      var tr = this._ownerDocument.createElement('TR');\n      var rows = this.rows;\n      if (index < -1 || index > rows.length) {\n        throw new core.DOMException(core.DOMException.INDEX_SIZE_ERR);\n      }\n      if (index === -1 || index === rows.length) {\n        this.appendChild(tr);\n      }\n      else {\n        var ref = rows[index];\n        this.insertBefore(tr, ref);\n      }\n      return tr;\n    },\n    deleteRow: function(index) {\n      var rows = this.rows;\n      if (index === -1) {\n        index = rows.length-1;\n      }\n      if (index < 0 || index >= rows.length) {\n        throw new core.DOMException(core.DOMException.INDEX_SIZE_ERR);\n      }\n      var tr = this.rows[index];\n      this.removeChild(tr);\n    }\n  },\n  attributes: [\n    'align',\n    {prop: 'ch', attr: 'char'},\n    {prop: 'chOff', attr: 'charoff'},\n    'vAlign'\n  ]\n});\n\ndefine('HTMLTableRowElement', {\n  tagName: 'TR',\n  proto: {\n    get cells() {\n      if (!this._cells) {\n        this._cells = createHTMLCollection(this, mapper(this, function(n) {\n          return n.nodeName === 'TD' || n.nodeName === 'TH';\n        }, false));\n      }\n      return this._cells;\n    },\n    get rowIndex() {\n      var table = closest(this, 'TABLE');\n      return table ? Array.prototype.indexOf.call(table.rows, this) : -1;\n    },\n\n    get sectionRowIndex() {\n      return Array.prototype.indexOf.call(domSymbolTree.parent(this).rows, this);\n    },\n    insertCell: function(index) {\n      var td = this._ownerDocument.createElement('TD');\n      var cells = this.cells;\n      if (index < -1 || index > cells.length) {\n        throw new core.DOMException(core.DOMException.INDEX_SIZE_ERR);\n      }\n      if (index === -1 || index === cells.length) {\n        this.appendChild(td);\n      }\n      else {\n        var ref = cells[index];\n        this.insertBefore(td, ref);\n      }\n      return td;\n    },\n    deleteCell: function(index) {\n      var cells = this.cells;\n      if (index === -1) {\n        index = cells.length-1;\n      }\n      if (index < 0 || index >= cells.length) {\n        throw new core.DOMException(core.DOMException.INDEX_SIZE_ERR);\n      }\n      var td = this.cells[index];\n      this.removeChild(td);\n    }\n  },\n  attributes: [\n    'align',\n    { prop: 'ch', attr: 'char' },\n    { prop: 'chOff', attr: 'charoff' },\n    'vAlign',\n    'bgColor'\n  ]\n});\n\ndefine('HTMLTableCellElement', {\n  init() {\n    this._headers = null;\n  },\n  proto: {\n    set headers(h) {\n      if (h === '') {\n        //Handle resetting headers so the dynamic getter returns a query\n        this._headers = null;\n        return;\n      }\n      if (!(h instanceof Array)) {\n        h = [h];\n      }\n      this._headers = h;\n    },\n    get headers() {\n      if (this._headers) {\n        return this._headers.join(' ');\n      }\n      var cellIndex = this.cellIndex,\n          headings  = [],\n          siblings  = domSymbolTree.parent(this).getElementsByTagName(this.tagName);\n\n      for (var i=0; i<siblings.length; i++) {\n        if (siblings.item(i).cellIndex >= cellIndex) {\n          break;\n        }\n        headings.push(siblings.item(i).id);\n      }\n      this._headers = headings;\n      return headings.join(' ');\n    },\n    get cellIndex() {\n      return Array.prototype.indexOf.call(closest(this, 'TR').cells, this);\n    }\n  },\n  attributes: [\n    { prop: 'colSpan', type: 'long' },\n    { prop: 'rowSpan', type: 'long' },\n    'align',\n    'axis',\n    'height',\n    'width',\n    { prop: 'ch', attr: 'char' },\n    { prop: 'chOff', attr: 'charoff' },\n    { prop: 'noWrap', type: 'boolean' },\n    'vAlign',\n    'bgColor'\n  ]\n});\n\ndefine('HTMLTableDataCellElement', {\n  tagName: 'TD',\n  parentClass: core.HTMLTableCellElement,\n  attributes: [\n    'abbr'\n  ]\n});\n\ndefine('HTMLTableHeaderCellElement', {\n  tagName: 'TH',\n  parentClass: core.HTMLTableCellElement,\n  attributes: [\n    'scope',\n    'abbr',\n    'sorted'\n  ]\n});\n\ndefine('HTMLFrameSetElement', {\n  tagName: 'FRAMESET',\n  attributes: [\n    'cols',\n    'rows'\n  ]\n});\n\nfunction loadFrame (frame) {\n  if (frame._contentDocument) {\n    if (frame._contentDocument.defaultView) {\n      // close calls delete on its document.\n      frame._contentDocument.defaultView.close();\n    } else {\n      delete frame._contentDocument;\n    }\n  }\n\n  var parentDoc = frame._ownerDocument;\n\n  // https://html.spec.whatwg.org/#process-the-iframe-attributes\n  let url;\n  const srcAttribute = getAttributeValue(frame, \"src\");\n  if (srcAttribute === null || srcAttribute === \"\") {\n    url = new URL(\"about:blank\");\n  } else {\n    try {\n      url = new URL(srcAttribute, documentBaseURL(parentDoc));\n    } catch (e) {\n      url = new URL(\"about:blank\");\n    }\n  }\n\n  var wnd = new Window({\n    parsingMode: 'html',\n    url: url.protocol === 'javascript:' || url.href === 'about:blank' ? parentDoc.URL : url.href,\n    cookieJar: parentDoc._cookieJar\n  });\n  var contentDoc = frame._contentDocument = wnd.document;\n  applyDocumentFeatures(contentDoc, parentDoc.implementation._features);\n\n  var parent = parentDoc.defaultView;\n  var contentWindow = contentDoc.defaultView;\n  contentWindow._parent = parent;\n  contentWindow._top = parent.top;\n  contentWindow._virtualConsole = parent._virtualConsole;\n\n  // Handle about:blank with a simulated load of an empty document.\n  if (url.href === 'about:blank') {\n    // Cannot be done inside the enqueued callback; the documentElement etc. need to be immediately available.\n    contentDoc.write(\"<html><head></head><body></body></html>\");\n    contentDoc.close();\n    resourceLoader.enqueue(frame, undefined, function () { })(); // to fire the load event\n  } else if (url.protocol === 'javascript:') {\n    // Cannot be done inside the enqueued callback; the documentElement etc. need to be immediately available.\n    contentDoc.write(\"<html><head></head><body></body></html>\");\n    contentDoc.close();\n    contentWindow.eval(url.pathname);\n    resourceLoader.enqueue(frame, undefined, function () { })(); // to fire the load event\n  } else {\n    resourceLoader.load(frame, url.href, function(html) {\n      contentDoc.write(html);\n      contentDoc.close();\n    });\n  }\n}\n\nfunction refreshAccessors(document) {\n  var window = document._defaultView;\n\n  if (!window) {\n    return;\n  }\n\n  var frames = document.querySelectorAll(\"iframe,frame\");\n\n  // delete accessors for all frames\n  for (var i = 0; i < window._length; ++i) {\n    delete window[i];\n  }\n\n  window._length = frames.length;\n  Array.prototype.forEach.call(frames, function (frame, i) {\n    defineGetter(window, i, function () { return frame.contentWindow; });\n  });\n}\n\ndefine('HTMLFrameElement', {\n  tagName: 'FRAME',\n  proto: {\n    _attrModified: function (name, value, oldVal) {\n      core.HTMLElement.prototype._attrModified.call(this, name, value, oldVal);\n      if (name === 'src') {\n        // iframe should never load in a document without a Window\n        // (e.g. implementation.createHTMLDocument)\n        if (this._attached && this._ownerDocument._defaultView) {\n          loadFrame(this);\n        }\n      }\n    },\n\n    _detach: function () {\n      core.HTMLElement.prototype._detach.call(this);\n\n      if (this.contentWindow) {\n        this.contentWindow.close();\n      }\n\n      refreshAccessors(this._ownerDocument);\n    },\n\n    _attach: function () {\n      core.HTMLElement.prototype._attach.call(this);\n\n      if (this._ownerDocument._defaultView) {\n        loadFrame(this);\n      }\n      refreshAccessors(this._ownerDocument);\n    },\n\n    _contentDocument : null,\n    get contentDocument() {\n      return this._contentDocument;\n    },\n    get contentWindow() {\n      return this.contentDocument ? this.contentDocument.defaultView : null;\n    }\n  },\n  attributes: [\n    'frameBorder',\n    'longDesc',\n    'marginHeight',\n    'marginWidth',\n    'name',\n    {prop: 'noResize', type: 'boolean'},\n    'scrolling',\n    {prop: 'src', type: 'string', write: false}\n  ]\n});\n\ndefine('HTMLIFrameElement', {\n  tagName: 'IFRAME',\n  parentClass: core.HTMLFrameElement,\n  attributes: [\n    'align',\n    'frameBorder',\n    'height',\n    'longDesc',\n    'marginHeight',\n    'marginWidth',\n    'name',\n    'scrolling',\n    'src',\n    'width'\n  ]\n});\n\n// HTMLMediaElement and HTMLVideoElement back-ported from Facebook's Jest project:\n// https://github.com/tmpvar/jsdom/pull/1190\n// They are not expected to be perfectly to-spec, and PRs to improve them over time are certainly appreciated.\n\nfunction getTimeRangeDummy() {\n  return {\n    length: 0,\n    start: function() { return 0; },\n    end: function() { return 0; }\n  };\n}\n\ndefine('HTMLMediaElement', {\n  init: function() {\n    this._muted = this.defaultMuted;\n    this._volume = 1.0;\n    this.readyState = 0;\n  },\n  proto: {\n    // Implemented accoring to W3C Draft 22 August 2012\n    set defaultPlaybackRate(v) {\n      if (v === 0.0) {\n        throw new core.DOMException(core.NOT_SUPPORTED_ERR);\n      }\n      if (this._defaultPlaybackRate !== v) {\n        this._defaultPlaybackRate = v;\n        this._dispatchRateChange();\n      }\n    },\n    _dispatchRateChange: function() {\n      var ev = this._ownerDocument.createEvent('HTMLEvents');\n      ev.initEvent('ratechange', false, false);\n      this.dispatchEvent(ev);\n    },\n    get defaultPlaybackRate() {\n      if (this._defaultPlaybackRate === undefined) {\n        return 1.0;\n      }\n      return this._defaultPlaybackRate;\n    },\n    get playbackRate() {\n      if (this._playbackRate === undefined) {\n        return 1.0;\n      }\n      return this._playbackRate;\n    },\n    set playbackRate(v) {\n      if (v !== this._playbackRate) {\n        this._playbackRate = v;\n        this._dispatchRateChange();\n      }\n    },\n    get muted() {\n      return this._muted;\n    },\n    _dispatchVolumeChange: function() {\n      var ev = this._ownerDocument.createEvent('HTMLEvents');\n      ev.initEvent('volumechange', false, false);\n      this.dispatchEvent(ev);\n    },\n    set muted(v) {\n      if (v !== this._muted) {\n        this._muted = v;\n        this._dispatchVolumeChange();\n      }\n    },\n    get defaultMuted() {\n      return this.getAttribute('muted') !== null;\n    },\n    set defaultMuted(v) {\n      if (v) {\n        this.setAttribute('muted', v);\n      } else {\n        this.removeAttribute('muted');\n      }\n    },\n    get volume() {\n      return this._volume;\n    },\n    set volume(v) {\n      if (v < 0 || v > 1) {\n        throw new core.DOMException(core.INDEX_SIZE_ERR);\n      }\n      if (this._volume !== v) {\n        this._volume = v;\n        this._dispatchVolumeChange();\n      }\n    },\n\n    // Not (yet) implemented according to spec\n    // Should return sane default values\n    currentSrc: '',\n    buffered: getTimeRangeDummy(),\n    networkState: 0,\n    load: function() {\n    },\n    canPlayType: function() {\n      return false;\n    },\n    seeking: false,\n    duration: 0,\n    startDate: NaN,\n    paused: true,\n    played: getTimeRangeDummy(),\n    seekable: getTimeRangeDummy(),\n    ended: false,\n    play: function() {\n    },\n    pause: function() {\n    },\n    audioTracks: [],\n    videoTracks: [],\n    textTracks: [],\n    addTextTrack: function() {\n    }\n  },\n  attributes: [\n    { prop: 'autoplay', type: 'boolean' },\n    { prop: 'controls', type: 'boolean' },\n    'crossOrigin',\n    'currentTime',\n    'preload',\n    { prop: 'loop', type: 'boolean' },\n    'mediaGroup',\n  ]\n});\n\naddConstants(core.HTMLMediaElement, {\n  NETWORK_EMPTY: 0,\n  NETWORK_IDLE: 1,\n  NETWORK_LOADED: 2,\n  NETWORK_NO_SOURCE: 3,\n  HAVE_NOTHING: 0,\n  HAVE_METADATA: 1,\n  HAVE_CURRENT_DATA: 2,\n  HAVE_FUTURE_DATA: 3,\n  HAVE_ENOUGH_DATA: 4\n});\n\ndefine('HTMLVideoElement', {\n  tagName: 'VIDEO',\n  parentClass: core.HTMLMediaElement,\n  attributes: [\n    { prop: 'height', type: 'long' },\n    'poster',\n    { prop: 'videoHeight', type: 'long' },\n    { prop: 'videoWidth', type: 'long' },\n    { prop: 'width', type: 'long' }\n  ]\n});\n\ndefine('HTMLAudioElement', {\n  tagName: 'AUDIO',\n  parentClass: core.HTMLMediaElement\n});\n\ndefine('HTMLDataElement', {\n  tagName: 'DATA',\n  attributes: [\n    'value'\n  ]\n});\n\ndefine('HTMLSpanElement', { tagName: 'SPAN' });\n\ndefine('HTMLTimeElement', {\n  tagName: 'TIME',\n  attributes: [\n    'dateTime'\n  ]\n});\n\n// The following are stubs simply so that we have the correct tag name <-> interface correspondences.\n// Feel free to send PRs updating them!\n\ndefine('HTMLDataListElement', { tagName: 'DATALIST' });\n\ndefine('HTMLDialogElement', { tagName: 'DIALOG' });\n\ndefine('HTMLEmbedElement', {\n  tagName: 'EMBED',\n  attributes: [\n    'src',\n    'type',\n    { prop: 'width', type: 'long' },\n    { prop: 'height', type: 'long' },\n    'align',\n    'name'\n  ]\n});\n\ndefine('HTMLMeterElement', { tagName: 'METER' });\n\ndefine('HTMLOutputElement', { tagName: 'OUTPUT' });\n\ndefine('HTMLProgressElement', { tagName: 'PROGRESS' });\n\ndefine('HTMLSourceElement', {\n  tagName: 'SOURCE',\n  attributes: [\n    'src',\n    'type',\n    'srcset',\n    'sizes',\n    'media'\n  ]\n});\n\ndefine('HTMLTemplateElement', {\n  tagName: 'TEMPLATE',\n  init() {\n    // TODO: don't use this._ownerDocument; instead, create a new document\n    this._templateContents = this._ownerDocument.createDocumentFragment();\n  },\n  proto: {\n    get content() {\n      return this._templateContents;\n    },\n    [cloningSteps](copy, node, document, cloneChildren) {\n      if (!cloneChildren) {\n        return;\n      }\n\n      for (const child of domSymbolTree.childrenIterator(node._templateContents)) {\n        const childCopy = clone(core, child, copy._templateContents._ownerDocument, true);\n        copy._templateContents.appendChild(childCopy);\n      }\n    }\n  }\n});\n\ndefine('HTMLTrackElement', {\n  tagName: 'TRACK',\n  attributes: [\n    'kind',\n    'src',\n    'srclang',\n    'label',\n    { prop: 'default', type: 'boolean' }\n  ],\n  proto: {\n    get readyState() {\n      return 0;\n    }\n  }\n});\n\naddConstants(core.HTMLTrackElement, {\n  NONE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3\n});\n"]}