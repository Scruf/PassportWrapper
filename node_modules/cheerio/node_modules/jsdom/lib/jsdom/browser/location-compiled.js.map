{"version":3,"sources":["location.js"],"names":[],"mappings":"AAAA;;AACA,MAAM,YAAY,QAAQ,mBAAR,CAAZ;AACN,MAAM,kBAAkB,QAAQ,qCAAR,EAA+C,eAA/C;AACxB,MAAM,iBAAiB,QAAQ,mBAAR,CAAjB;AACN,MAAM,MAAM,UAAU,oBAAV,EAAN;;AAEN,OAAO,OAAP,GAAiB,QAAjB;;AAEA,MAAM,WAAW,OAAO,mBAAP,CAAX;AACN,MAAM,eAAe,OAAO,gBAAP,CAAf;;AAEN,SAAS,QAAT,CAAkB,SAAlB,EAA6B,gBAA7B,EAA+C;AAC7C,OAAK,QAAL,IAAiB,gBAAjB,CAD6C;AAE7C,YAAU,WAAV,CAAsB,IAAtB,EAA4B,SAA5B,EAF6C;;AAI7C,MAAI;AACF,SAAK,YAAL,IAAqB,IAAI,GAAJ,CAAQ,SAAR,CAArB,CADE;GAAJ,CAEE,OAAO,CAAP,EAAU;AACV,SAAK,YAAL,IAAqB,EAArB,CADU;GAAV;CANJ;;AAWA,UAAU,aAAV,CACE,SAAS,SAAT,EACA,SAAS,UAAT,GAAsB;AACpB,SAAO,gBAAgB,KAAK,QAAL,CAAhB,CAAP,CADoB;CAAtB,EAGA,SAAS,WAAT,GAAuB;AACrB,MAAI,KAAK,YAAL,EAAmB,QAAnB,KAAgC,KAAK,QAAL,IAChC,KAAK,YAAL,EAAmB,QAAnB,KAAgC,KAAK,QAAL,IAChC,KAAK,YAAL,EAAmB,QAAnB,KAAgC,KAAK,QAAL,IAChC,KAAK,YAAL,EAAmB,QAAnB,KAAgC,KAAK,QAAL,IAChC,KAAK,YAAL,EAAmB,IAAnB,KAA4B,KAAK,IAAL,IAC5B,KAAK,YAAL,EAAmB,QAAnB,KAAgC,KAAK,QAAL,IAChC,KAAK,YAAL,EAAmB,MAAnB,KAA8B,KAAK,MAAL,EAAa;AAC7C,mBAAe,uCAAf,EAAwD,KAAK,QAAL,EAAe,YAAf,CAAxD,CAD6C;GAN/C,MAQO,IAAI,KAAK,YAAL,EAAmB,IAAnB,KAA4B,KAAK,IAAL,EAAW;AAChD,UAAM,SAAS,KAAK,QAAL,EAAe,WAAf,CADiC;AAEhD,UAAM,KAAK,IAAI,OAAO,eAAP,CAAuB,YAA3B,EAAyC;AAClD,eAAS,IAAT;AACA,kBAAY,KAAZ;AACA,cAAQ,KAAK,YAAL,EAAmB,IAAnB;AACR,cAAQ,KAAK,IAAL;KAJC,CAAL,CAF0C;;AAShD,WAAO,UAAP,CAAkB,MAAM;AACtB,aAAO,aAAP,CAAqB,EAArB,EADsB;KAAN,EAEf,CAFH,EATgD;GAA3C;;AAcP,OAAK,YAAL,IAAqB,IAAI,GAAJ,CAAQ,KAAK,IAAL,CAA7B,CAvBqB;AAwBrB,OAAK,QAAL,EAAe,IAAf,GAAsB,KAAK,IAAL,CAxBD;CAAvB,CALF;;AAiCA,SAAS,SAAT,CAAmB,MAAnB,GAA4B,YAAY;AACtC,iBAAe,iBAAf,EAAkC,KAAK,QAAL,EAAe,YAAf,CAAlC,CADsC;CAAZ;;AAI5B,SAAS,SAAT,CAAmB,OAAnB,GAA6B,UAAU,GAAV,EAAe;;AAE1C,YAAU,WAAV,CAAsB,IAAtB,EAA4B,GAA5B,EAF0C;CAAf;;AAK7B,SAAS,SAAT,CAAmB,MAAnB,GAA4B,YAAY;AACtC,iBAAe,iBAAf,EAAkC,KAAK,QAAL,EAAe,YAAf,CAAlC,CADsC;CAAZ","file":"location-compiled.js","sourcesContent":["\"use strict\";\nconst whatwgURL = require(\"whatwg-url-compat\");\nconst documentBaseURL = require(\"../living/helpers/document-base-url\").documentBaseURL;\nconst notImplemented = require(\"./not-implemented\");\nconst URL = whatwgURL.createURLConstructor();\n\nmodule.exports = Location;\n\nconst document = Symbol(\"relevant document\");\nconst oldParsedURL = Symbol(\"old parsed URL\");\n\nfunction Location(urlString, relevantDocument) {\n  this[document] = relevantDocument;\n  whatwgURL.setTheInput(this, urlString);\n\n  try {\n    this[oldParsedURL] = new URL(urlString);\n  } catch (e) {\n    this[oldParsedURL] = {};\n  }\n}\n\nwhatwgURL.mixinURLUtils(\n  Location.prototype,\n  function getTheBase() {\n    return documentBaseURL(this[document]);\n  },\n  function updateSteps() {\n    if (this[oldParsedURL].protocol !== this.protocol ||\n        this[oldParsedURL].username !== this.username ||\n        this[oldParsedURL].password !== this.password ||\n        this[oldParsedURL].hostname !== this.hostname ||\n        this[oldParsedURL].port !== this.port ||\n        this[oldParsedURL].pathname !== this.pathname ||\n        this[oldParsedURL].search !== this.search) {\n      notImplemented(\"navigation via the location interface\", this[document]._defaultView);\n    } else if (this[oldParsedURL].hash !== this.hash) {\n      const window = this[document].defaultView;\n      const ev = new window.HashChangeEvent(\"hashchange\", {\n        bubbles: true,\n        cancelable: false,\n        oldURL: this[oldParsedURL].href,\n        newURL: this.href\n      });\n\n      window.setTimeout(() => {\n        window.dispatchEvent(ev);\n      }, 0);\n    }\n\n    this[oldParsedURL] = new URL(this.href);\n    this[document]._URL = this.href;\n  }\n);\n\nLocation.prototype.assign = function () {\n  notImplemented(\"location.assign\", this[document]._defaultView);\n};\n\nLocation.prototype.replace = function (url) {\n  // This is nowhere near spec compliant, but has worked so far.\n  whatwgURL.setTheInput(this, url);\n};\n\nLocation.prototype.reload = function () {\n  notImplemented(\"location.reload\", this[document]._defaultView);\n};\n"]}