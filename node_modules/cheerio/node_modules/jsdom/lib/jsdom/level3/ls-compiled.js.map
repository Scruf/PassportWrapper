{"version":3,"sources":["ls.js"],"names":[],"mappings":";;AAEA,IAAI,OAAO,QAAQ,gBAAR,CAAP;AACJ,IAAI,aAAa,QAAQ,UAAR,EAAoB,UAApB;;AAEjB,IAAI,KAAK,EAAL;;;;;AAKJ,GAAG,WAAH,GAAiB,SAAS,WAAT,CAAqB,IAArB,EAA2B;AAC1C,OAAK,IAAL,GAAY,IAAZ,CAD0C;CAA3B;;AAIjB,GAAG,WAAH,CAAe,SAAf,GAA2B;;AAEzB,aAAkC,EAAlC;AACA,iBAAkC,EAAlC;CAHF;;AAMA,GAAG,mBAAH,GAAyB,SAAS,mBAAT,GAA+B,EAA/B;;AAIzB,IAAI,6BAA6B;;;AAG/B,oBAAoB,CAApB;AACA,qBAAoB,CAApB;;;AAGA,kBAAiB,oBAAmB,IAAnB,cAAsC,UAAtC,EAAkD;AACjE,WAAO,IAAI,GAAG,QAAH,CAAY,IAAhB,EAAsB,UAAtB,CAAP,CADiE;GAAlD;;AAIjB,sBAAqB,YAAW;AAC9B,WAAO,IAAI,GAAG,YAAH,EAAX,CAD8B;GAAX;;AAIrB,iBAAgB,YAAW;AACzB,WAAO,IAAI,GAAG,OAAH,EAAX,CADyB;GAAX;;AAIhB,kBAAiB,YAAW;AAC1B,WAAO,IAAI,GAAG,QAAH,EAAX,CAD0B;GAAX;CAnBf;;AAwBJ,OAAO,IAAP,CAAY,0BAAZ,EAAwC,OAAxC,CAAgD,UAAS,CAAT,EAAY,CAAZ,EAAe;AAC7D,OAAK,iBAAL,CAAuB,SAAvB,CAAiC,CAAjC,IAAsC,2BAA2B,CAA3B,CAAtC,CAD6D;CAAf,CAAhD;;AAIA,GAAG,mBAAH,CAAuB,SAAvB,GAAmC,0BAAnC;;AAEA,KAAK,QAAL,CAAc,UAAd,GAA2B,YAAW;AACpC,SAAO,0BAAP,CADoC;CAAX;;AAI3B,GAAG,QAAH,GAAc,SAAS,QAAT,GAAoB;AAChC,OAAK,UAAL,GAAkB,IAAI,KAAK,gBAAL,EAAtB,CADgC;CAApB;AAGd,GAAG,QAAH,CAAY,SAAZ,GAAwB;AACtB,MAAI,SAAJ,GAAgB;AAAE,WAAO,KAAK,UAAL,CAAT;GAAhB;AACA,MAAI,MAAJ,GAAa;AAAE,WAAO,KAAK,OAAL,IAAgB,IAAhB,CAAT;GAAb;AACA,MAAI,MAAJ,CAAW,KAAX,EAAkB;AAAE,SAAK,OAAL,GAAe,KAAf,CAAF;GAAlB;AACA,MAAI,KAAJ,GAAY;AAAE,WAAO,KAAK,MAAL,CAAT;GAAZ;AACA,MAAI,IAAJ,GAAW;AAAE,WAAO,KAAK,KAAL,CAAT;GAAX;;;AAGA,SAAQ,wBAAwB,KAAxB,EAA+B;AACrC,QAAI,MAAM,IAAI,KAAK,QAAL,EAAV,CADiC;AAErC,QAAI,cAAJ,GAAqB,QAArB,CAFqC;AAGrC,WAAO,GAAP,CAHqC;GAA/B;;;AAOR,YAAW,uBAAsB,GAAtB,EAA2B;AACpC,WAAO,IAAI,KAAK,QAAL,EAAX,CADoC;GAA3B;;;AAKX,6BAAkC,CAAlC;AACA,2BAAkC,CAAlC;AACA,wBAAkC,CAAlC;AACA,uBAAkC,CAAlC;AACA,kBAAkC,CAAlC;;;;AAIA,oBAAkC,wBAAuB,KAAvB,YAAyC,UAAzC,WAA+D,MAA/D,EAAuE;AACvG,WAAO,IAAI,KAAK,IAAL,EAAX,CADuG;GAAvE;;AAIlC,SAAkC,YAAW;;GAAX;CAhCpC;;AAqCA,GAAG,OAAH,GAAa,SAAS,OAAT,GAAmB,EAAnB;AACb,GAAG,OAAH,CAAW,SAAX,GAAuB;AACrB,MAAI,eAAJ,GAAsB;AAAE,WAAO,KAAK,gBAAL,IAAyB,IAAzB,CAAT;GAAtB;AACA,MAAI,eAAJ,CAAoB,KAApB,EAA2B;AAAE,SAAK,gBAAL,GAAwB,KAAxB,CAAF;GAA3B;AACA,MAAI,UAAJ,GAAiB;AAAE,WAAO,KAAK,WAAL,IAAoB,IAApB,CAAT;GAAjB;AACA,MAAI,UAAJ,CAAe,KAAf,EAAsB;AAAE,SAAK,WAAL,GAAmB,KAAnB,CAAF;GAAtB;AACA,MAAI,UAAJ,GAAiB;AAAE,WAAO,KAAK,WAAL,IAAoB,IAApB,CAAT;GAAjB;AACA,MAAI,UAAJ,CAAe,KAAf,EAAsB;AAAE,SAAK,WAAL,GAAmB,KAAnB,CAAF;GAAtB;AACA,MAAI,QAAJ,GAAe;AAAE,WAAO,KAAK,SAAL,IAAkB,IAAlB,CAAT;GAAf;AACA,MAAI,QAAJ,CAAa,KAAb,EAAoB;AAAE,SAAK,SAAL,GAAiB,KAAjB,CAAF;GAApB;AACA,MAAI,QAAJ,GAAe;AAAE,WAAO,KAAK,SAAL,IAAkB,IAAlB,CAAT;GAAf;AACA,MAAI,QAAJ,CAAa,KAAb,EAAoB;AAAE,SAAK,SAAL,GAAiB,KAAjB,CAAF;GAApB;AACA,MAAI,OAAJ,GAAc;AAAE,WAAO,KAAK,QAAL,IAAiB,IAAjB,CAAT;GAAd;AACA,MAAI,OAAJ,CAAY,KAAZ,EAAmB;AAAE,SAAK,QAAL,GAAgB,KAAhB,CAAF;GAAnB;AACA,MAAI,QAAJ,GAAe;AAAE,WAAO,KAAK,SAAL,IAAkB,IAAlB,CAAT;GAAf;AACA,MAAI,QAAJ,CAAa,KAAb,EAAoB;AAAE,SAAK,SAAL,GAAiB,KAAjB,CAAF;GAApB;AACA,MAAI,aAAJ,GAAoB;AAAE,WAAO,KAAK,cAAL,IAAuB,IAAvB,CAAT;GAApB;AACA,MAAI,aAAJ,CAAkB,KAAlB,EAAyB;AAAE,SAAK,cAAL,GAAsB,KAAtB,CAAF;GAAzB;CAhBF;;AAmBA,GAAG,kBAAH,GAAwB,SAAS,kBAAT,GAA8B,EAA9B;;;AAGxB,GAAG,kBAAH,CAAsB,SAAtB,CAAgC,eAAhC,GAAkD,UAAS,IAAT,EAAe,YAAf,EAA6B,QAA7B,EAAuC,QAAvC,EAAiD,OAAjD,EAA0D;AAC1G,SAAO,IAAI,GAAG,OAAH,EAAX,CAD0G;CAA1D;;AAIlD,GAAG,cAAH,GAAoB,SAAS,cAAT,GAA0B,EAA1B;AACpB,GAAG,cAAH,CAAkB,SAAlB,GAA8B;;;AAG5B,iBAAkC,CAAlC;AACA,iBAAkC,CAAlC;AACA,eAAkC,CAAlC;AACA,oBAAkC,CAAlC;;AAEA,MAAI,UAAJ,GAAiB;AAAE,WAAO,KAAK,WAAL,CAAT;GAAjB;;;AAGA,gBAAe,wBAAuB,UAAvB,EAAmC;AAChD,WAAO,CAAP,CADgD;GAAnC;;;AAKf,cAAa,qBAAoB,OAApB,EAA6B;AACxC,WAAO,OAAP,CADwC;GAA7B;CAhBf;;AAqBA,GAAG,YAAH,GAAkB,SAAS,YAAT,GAAwB;AACxC,OAAK,UAAL,GAAkB,IAAI,KAAK,gBAAL,EAAtB,CADwC;CAAxB;AAGlB,GAAG,YAAH,CAAgB,SAAhB,GAA4B;AAC1B,MAAI,SAAJ,GAAgB;AAAE,WAAO,KAAK,UAAL,CAAT;GAAhB;AACA,MAAI,OAAJ,GAAc;AAAE,WAAO,KAAK,QAAL,IAAiB,IAAjB,CAAT;GAAd;AACA,MAAI,OAAJ,CAAY,KAAZ,EAAmB;AAAE,SAAK,QAAL,GAAgB,KAAhB,CAAF;GAAnB;AACA,MAAI,MAAJ,GAAa;AAAE,WAAO,KAAK,OAAL,IAAgB,IAAhB,CAAT;GAAb;AACA,MAAI,MAAJ,CAAW,KAAX,EAAkB;AAAE,SAAK,OAAL,GAAe,KAAf,CAAF;GAAlB;;;;AAIA,SAAQ,qBAAoB,OAApB,gBAA4C,WAA5C,EAAyD;AAChE,WAAO,IAAP,CADgE;GAAzD;;;;AAMR,cAAa,qBAAoB,OAApB,cAA0C,GAA1C,EAA+C;AAC3D,WAAO,IAAP,CAD2D;GAA/C;;;;AAMb,iBAAgB,qBAAoB,OAApB,EAA6B;AAC3C,WAAO,EAAP,CAD2C;GAA7B;CArBlB;;AA0BA,GAAG,QAAH,GAAc,SAAS,QAAT,GAAoB,EAApB;AACd,GAAG,QAAH,CAAY,SAAZ,GAAwB;AACtB,MAAI,eAAJ,GAAsB;AAAE,WAAO,KAAK,gBAAL,IAAyB,IAAzB,CAAT;GAAtB;AACA,MAAI,eAAJ,CAAoB,KAApB,EAA2B;AAAE,SAAK,gBAAL,GAAwB,KAAxB,CAAF;GAA3B;AACA,MAAI,UAAJ,GAAiB;AAAE,WAAO,KAAK,WAAL,IAAoB,IAApB,CAAT;GAAjB;AACA,MAAI,UAAJ,CAAe,KAAf,EAAsB;AAAE,SAAK,WAAL,GAAmB,KAAnB,CAAF;GAAtB;AACA,MAAI,QAAJ,GAAe;AAAE,WAAO,KAAK,SAAL,IAAkB,IAAlB,CAAT;GAAf;AACA,MAAI,QAAJ,CAAa,KAAb,EAAoB;AAAE,SAAK,SAAL,GAAiB,KAAjB,CAAF;GAApB;AACA,MAAI,QAAJ,GAAe;AAAE,WAAO,KAAK,SAAL,IAAkB,IAAlB,CAAT;GAAf;AACA,MAAI,QAAJ,CAAa,KAAb,EAAoB;AAAE,SAAK,SAAL,GAAiB,KAAjB,CAAF;GAApB;CARF;;AAWA,GAAG,eAAH,GAAqB,SAAS,eAAT,GAA2B,EAA3B;AACrB,GAAG,eAAH,CAAmB,SAAnB,GAA+B,WAAW,KAAK,KAAL,EAAY;AACpD,eAAa,GAAG,eAAH;AACb,MAAI,KAAJ,GAAY;AAAE,WAAO,KAAK,MAAL,CAAT;GAAZ;AACA,MAAI,QAAJ,GAAe;AAAE,WAAO,KAAK,SAAL,CAAT;GAAf;AACA,MAAI,SAAJ,GAAgB;AAAE,WAAO,KAAK,UAAL,CAAT;GAAhB;CAJ6B,CAA/B;;AAOA,GAAG,WAAH,GAAiB,SAAS,WAAT,GAAuB,EAAvB;AACjB,GAAG,WAAH,CAAe,SAAf,GAA2B,WAAW,KAAK,KAAL,EAAY;AAChD,MAAI,WAAJ,GAAkB;AAAE,WAAO,KAAK,YAAL,CAAT;GAAlB;AACA,MAAI,KAAJ,GAAY;AAAE,WAAO,KAAK,MAAL,CAAT;GAAZ;CAFyB,CAA3B;;;AAOA,GAAG,kBAAH,GAAwB,SAAS,kBAAT,GAA8B,EAA9B;AACxB,GAAG,kBAAH,CAAsB,SAAtB,GAAkC;AAChC,MAAI,UAAJ,GAAiB;AAAE,WAAO,KAAK,WAAL,CAAT;GAAjB;CADF","file":"ls-compiled.js","sourcesContent":["// w3c Load/Save functionality: http://www.w3.org/TR/2004/REC-DOM-Level-3-LS-20040407/\n\nvar core = require('../level1/core');\nvar createFrom = require('../utils').createFrom;\n\nvar ls = {};\n\n// TODO: what is this?\n//typedef dom::DOMConfiguration DOMConfiguration;\n\nls.LSException = function LSException(code) {\n  this.code = code;\n};\n\nls.LSException.prototype = {\n  // LSExceptionCode\n  PARSE_ERR                       : 81,\n  SERIALIZE_ERR                   : 82\n};\n\nls.DOMImplementationLS = function DOMImplementationLS() {\n\n};\n\nvar DOMImplementationExtension = {\n\n  // DOMImplementationLSMode\n  MODE_SYNCHRONOUS  : 1,\n  MODE_ASYNCHRONOUS : 2,\n\n  // raises(dom::DOMException);\n  createLSParser : function(/* int */ mode, /* string */ schemaType) {\n    return new ls.LSParser(mode, schemaType);\n  },\n\n  createLSSerializer : function() {\n    return new ls.LSSerializer();\n  },\n\n  createLSInput : function() {\n    return new ls.LSInput();\n  },\n\n  createLSOutput : function() {\n    return new ls.LSOutput();\n  }\n};\n\nObject.keys(DOMImplementationExtension).forEach(function(k, v) {\n  core.DOMImplementation.prototype[k] = DOMImplementationExtension[k];\n});\n\nls.DOMImplementationLS.prototype = DOMImplementationExtension;\n\ncore.Document.getFeature = function() {\n  return DOMImplementationExtension;\n};\n\nls.LSParser = function LSParser() {\n  this._domConfig = new core.DOMConfiguration();\n};\nls.LSParser.prototype = {\n  get domConfig() { return this._domConfig; },\n  get filter() { return this._filter || null; },\n  set filter(value) { this._filter = value; },\n  get async() { return this._async; },\n  get busy() { return this._busy; },\n\n  // raises(dom::DOMException, LSException);\n  parse : function (/* LSInput */ input) {\n    var doc = new core.Document();\n    doc._inputEncoding = 'UTF-16';\n    return doc;\n  },\n\n  // raises(dom::DOMException, LSException);\n  parseURI : function(/* string */ uri) {\n    return new core.Document();\n  },\n\n  // ACTION_TYPES\n  ACTION_APPEND_AS_CHILDREN       : 1,\n  ACTION_REPLACE_CHILDREN         : 2,\n  ACTION_INSERT_BEFORE            : 3,\n  ACTION_INSERT_AFTER             : 4,\n  ACTION_REPLACE                  : 5,\n\n  // @returns Node\n  // @raises DOMException, LSException\n  parseWithContext                : function(/* LSInput */ input, /* Node */ contextArg, /* int */ action) {\n    return new core.Node();\n  },\n\n  abort                           : function() {\n    // TODO: implement\n  }\n};\n\nls.LSInput = function LSInput() {};\nls.LSInput.prototype = {\n  get characterStream() { return this._characterStream || null; },\n  set characterStream(value) { this._characterStream = value; },\n  get byteStream() { return this._byteStream || null; },\n  set byteStream(value) { this._byteStream = value; },\n  get stringData() { return this._stringData || null; },\n  set stringData(value) { this._stringData = value; },\n  get systemId() { return this._systemId || null; },\n  set systemId(value) { this._systemId = value; },\n  get publicId() { return this._publicId || null; },\n  set publicId(value) { this._publicId = value; },\n  get baseURI() { return this._baseURI || null; },\n  set baseURI(value) { this._baseURI = value; },\n  get encoding() { return this._encoding || null; },\n  set encoding(value) { this._encoding = value; },\n  get certifiedText() { return this._certifiedText || null; },\n  set certifiedText(value) { this._certifiedText = value; },\n};\n\nls.LSResourceResolver = function LSResourceResolver() {};\n\n// @returns LSInput\nls.LSResourceResolver.prototype.resolveResource = function(type, namespaceURI, publicId, systemId, baseURI) {\n  return new ls.LSInput();\n};\n\nls.LSParserFilter = function LSParserFilter() {};\nls.LSParserFilter.prototype = {\n\n  // Constants returned by startElement and acceptNode\n  FILTER_ACCEPT                   : 1,\n  FILTER_REJECT                   : 2,\n  FILTER_SKIP                     : 3,\n  FILTER_INTERRUPT                : 4,\n\n  get whatToShow() { return this._whatToShow; },\n\n  // @returns int\n  startElement : function(/* Element */ elementArg) {\n    return 0;\n  },\n\n  // @returns int\n  acceptNode : function(/* Node */ nodeArg) {\n    return nodeArg;\n  }\n};\n\nls.LSSerializer = function LSSerializer() {\n  this._domConfig = new core.DOMConfiguration();\n};\nls.LSSerializer.prototype = {\n  get domConfig() { return this._domConfig; },\n  get newLine() { return this._newLine || null; },\n  set newLine(value) { this._newLine = value; },\n  get filter() { return this._filter || null; },\n  set filter(value) { this._filter = value; },\n\n  // @returns boolean\n  // @raises LSException\n  write : function(/* Node */ nodeArg, /* LSOutput */ destination) {\n   return true;\n  },\n\n  // @returns boolean\n  // @raises LSException\n  writeToURI : function(/* Node */ nodeArg, /* string */ uri) {\n   return true;\n  },\n\n  // @returns string\n  // @raises DOMException, LSException\n  writeToString : function(/* Node */ nodeArg) {\n    return \"\";\n  }\n};\n\nls.LSOutput = function LSOutput() {};\nls.LSOutput.prototype = {\n  get characterStream() { return this._characterStream || null; },\n  set characterStream(value) { this._characterStream = value; },\n  get byteStream() { return this._byteStream || null; },\n  set byteStream(value) { this._byteStream = value; },\n  get systemId() { return this._systemId || null; },\n  set systemId(value) { this._systemId = value; },\n  get encoding() { return this._encoding || null; },\n  set encoding(value) { this._encoding = value; },\n};\n\nls.LSProgressEvent = function LSProgressEvent() {};\nls.LSProgressEvent.prototype = createFrom(core.Event, {\n  constructor: ls.LSProgressEvent,\n  get input() { return this._input; },\n  get position() { return this._position; },\n  get totalSize() { return this._totalSize; },\n});\n\nls.LSLoadEvent = function LSLoadEvent() {};\nls.LSLoadEvent.prototype = createFrom(core.Event, {\n  get newDocument() { return this._newDocument; },\n  get input() { return this._input; },\n});\n\n\n// TODO: do traversal\nls.LSSerializerFilter = function LSSerializerFilter() {};\nls.LSSerializerFilter.prototype = {\n  get whatToShow() { return this._whatToShow; },\n};\n\n// ls.LSSerializerFilter.prototype.__proto__ = level2.traversal.NodeFiler;\n\n"]}