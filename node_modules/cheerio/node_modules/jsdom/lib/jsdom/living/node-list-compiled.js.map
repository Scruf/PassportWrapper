{"version":3,"sources":["node-list.js"],"names":[],"mappings":"AAAA;;AACA,MAAM,uBAAuB,QAAQ,UAAR,EAAoB,oBAApB;;AAE7B,MAAM,WAAW,OAAO,yBAAP,CAAX;;AAEN,MAAM,QAAN,CAAe;AACb,cAAY,MAAZ,EAAoB,MAApB,EAA4B;AAC1B,QAAI,WAAW,QAAX,EAAqB;AACvB,YAAM,IAAI,SAAJ,CAAc,qBAAd,CAAN,CADuB;KAAzB;;AAIA,QAAI,OAAO,KAAP,EAAc;AAChB,WAAK,QAAL,IAAiB;AACf,gBAAQ,KAAR;AACA,gBAAQ,OAAO,KAAP,CAAa,MAAb;OAFV,CADgB;;AAMhB,WAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,OAAO,KAAP,CAAa,MAAb,EAAqB,EAAE,CAAF,EAAK;AAC5C,aAAK,CAAL,IAAU,OAAO,KAAP,CAAa,CAAb,CAAV,CAD4C;OAA9C;KANF,MASO;AACL,WAAK,QAAL,IAAiB;AACf,gBAAQ,IAAR;AACA,iBAAS,OAAO,OAAP;AACT,eAAO,OAAO,KAAP;AACP,kBAAU,SAAV;AACA,gBAAQ,CAAR;AACA,iBAAS,CAAC,CAAD;OANX,CADK;AASL,qBAAe,IAAf,EATK;KATP;GALF;;AA2BA,MAAI,MAAJ,GAAa;AACX,mBAAe,IAAf,EADW;AAEX,WAAO,KAAK,QAAL,EAAe,MAAf,CAFI;GAAb;;AAKA,OAAK,KAAL,EAAY;AACV,mBAAe,IAAf,EADU;AAEV,WAAO,KAAK,KAAL,KAAe,IAAf,CAFG;GAAZ;CAjCF;;AAuCA,SAAS,SAAT,CAAmB,OAAO,QAAP,CAAnB,GAAsC,MAAM,SAAN,CAAgB,OAAO,QAAP,CAAtD;;AAEA,SAAS,cAAT,CAAwB,QAAxB,EAAkC;AAChC,MAAI,SAAS,QAAT,EAAmB,MAAnB,EAA2B;AAC7B,QAAI,SAAS,QAAT,EAAmB,OAAnB,GAA6B,SAAS,QAAT,EAAmB,OAAnB,CAA2B,QAA3B,EAAqC;AACpE,eAAS,QAAT,EAAmB,QAAnB,GAA8B,SAAS,QAAT,EAAmB,KAAnB,EAA9B,CADoE;AAEpE,sBAAgB,QAAhB,EAA0B,SAAS,QAAT,EAAmB,QAAnB,CAA1B,CAFoE;AAGpE,eAAS,QAAT,EAAmB,OAAnB,GAA6B,SAAS,QAAT,EAAmB,OAAnB,CAA2B,QAA3B,CAHuC;KAAtE;GADF,MAMO;AACL,aAAS,QAAT,EAAmB,MAAnB,GAA4B,qBAAqB,QAArB,CAA5B,CADK;GANP;CADF;;AAYA,SAAS,eAAT,CAAyB,QAAzB,EAAmC,KAAnC,EAA0C;AACxC,QAAM,iBAAiB,qBAAqB,QAArB,CAAjB,CADkC;AAExC,OAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,cAAJ,EAAoB,EAAE,CAAF,EAAK;AACvC,WAAO,SAAS,CAAT,CAAP,CADuC;GAAzC;;AAIA,OAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,MAAM,MAAN,EAAc,EAAE,CAAF,EAAK;AACrC,aAAS,CAAT,IAAc,MAAM,CAAN,CAAd,CADqC;GAAvC;AAGA,WAAS,QAAT,EAAmB,MAAnB,GAA4B,MAAM,MAAN,CATY;CAA1C;;AAYA,OAAO,OAAP,GAAiB,UAAU,IAAV,EAAgB;AAC/B,OAAK,QAAL,GAAgB,QAAhB,CAD+B;CAAhB;;AAIjB,OAAO,OAAP,CAAe,UAAf,GAA4B,UAAU,OAAV,EAAmB,KAAnB,EAA0B;AACpD,SAAO,IAAI,QAAJ,CAAa,QAAb,EAAuB,EAAE,OAAF,EAAW,KAAX,EAAvB,CAAP,CADoD;CAA1B;;AAI5B,OAAO,OAAP,CAAe,YAAf,GAA8B,UAAU,KAAV,EAAiB;AAC7C,SAAO,IAAI,QAAJ,CAAa,QAAb,EAAuB,EAAE,KAAF,EAAvB,CAAP,CAD6C;CAAjB;;AAI9B,OAAO,OAAP,CAAe,MAAf,GAAwB,cAAxB","file":"node-list-compiled.js","sourcesContent":["\"use strict\";\nconst lengthFromProperties = require(\"../utils\").lengthFromProperties;\n\nconst privates = Symbol(\"NodeList internal slots\");\n\nclass NodeList {\n  constructor(secret, config) {\n    if (secret !== privates) {\n      throw new TypeError(\"Invalid constructor\");\n    }\n\n    if (config.nodes) {\n      this[privates] = {\n        isLive: false,\n        length: config.nodes.length\n      };\n\n      for (let i = 0; i < config.nodes.length; ++i) {\n        this[i] = config.nodes[i];\n      }\n    } else {\n      this[privates] = {\n        isLive: true,\n        element: config.element,\n        query: config.query,\n        snapshot: undefined,\n        length: 0,\n        version: -1\n      };\n      updateNodeList(this);\n    }\n  }\n\n  get length() {\n    updateNodeList(this);\n    return this[privates].length;\n  }\n\n  item(index) {\n    updateNodeList(this);\n    return this[index] || null;\n  }\n}\n\nNodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];\n\nfunction updateNodeList(nodeList) {\n  if (nodeList[privates].isLive) {\n    if (nodeList[privates].version < nodeList[privates].element._version) {\n      nodeList[privates].snapshot = nodeList[privates].query();\n      resetNodeListTo(nodeList, nodeList[privates].snapshot);\n      nodeList[privates].version = nodeList[privates].element._version;\n    }\n  } else {\n    nodeList[privates].length = lengthFromProperties(nodeList);\n  }\n}\n\nfunction resetNodeListTo(nodeList, nodes) {\n  const startingLength = lengthFromProperties(nodeList);\n  for (let i = 0; i < startingLength; ++i) {\n    delete nodeList[i];\n  }\n\n  for (let i = 0; i < nodes.length; ++i) {\n    nodeList[i] = nodes[i];\n  }\n  nodeList[privates].length = nodes.length;\n}\n\nmodule.exports = function (core) {\n  core.NodeList = NodeList;\n};\n\nmodule.exports.createLive = function (element, query) {\n  return new NodeList(privates, { element, query });\n};\n\nmodule.exports.createStatic = function (nodes) {\n  return new NodeList(privates, { nodes });\n};\n\nmodule.exports.update = updateNodeList;\n"]}