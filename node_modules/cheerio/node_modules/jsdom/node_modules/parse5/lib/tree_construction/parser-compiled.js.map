{"version":3,"sources":["parser.js"],"names":[],"mappings":"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","file":"parser-compiled.js","sourcesContent":["'use strict';\r\n\r\nvar Tokenizer = require('../tokenization/tokenizer'),\r\n    OpenElementStack = require('./open_element_stack'),\r\n    FormattingElementList = require('./formatting_element_list'),\r\n    LocationInfoMixin = require('./location_info_mixin'),\r\n    DefaultTreeAdapter = require('../tree_adapters/default'),\r\n    Doctype = require('../common/doctype'),\r\n    ForeignContent = require('../common/foreign_content'),\r\n    Utils = require('../common/utils'),\r\n    UNICODE = require('../common/unicode'),\r\n    HTML = require('../common/html');\r\n\r\n//Aliases\r\nvar $ = HTML.TAG_NAMES,\r\n    NS = HTML.NAMESPACES,\r\n    ATTRS = HTML.ATTRS;\r\n\r\n//Default options\r\nvar DEFAULT_OPTIONS = {\r\n    decodeHtmlEntities: true,\r\n    locationInfo: false\r\n};\r\n\r\n//Misc constants\r\nvar SEARCHABLE_INDEX_DEFAULT_PROMPT = 'This is a searchable index. Enter search keywords: ',\r\n    SEARCHABLE_INDEX_INPUT_NAME = 'isindex',\r\n    HIDDEN_INPUT_TYPE = 'hidden';\r\n\r\n//Adoption agency loops iteration count\r\nvar AA_OUTER_LOOP_ITER = 8,\r\n    AA_INNER_LOOP_ITER = 3;\r\n\r\n//Insertion modes\r\nvar INITIAL_MODE = 'INITIAL_MODE',\r\n    BEFORE_HTML_MODE = 'BEFORE_HTML_MODE',\r\n    BEFORE_HEAD_MODE = 'BEFORE_HEAD_MODE',\r\n    IN_HEAD_MODE = 'IN_HEAD_MODE',\r\n    AFTER_HEAD_MODE = 'AFTER_HEAD_MODE',\r\n    IN_BODY_MODE = 'IN_BODY_MODE',\r\n    TEXT_MODE = 'TEXT_MODE',\r\n    IN_TABLE_MODE = 'IN_TABLE_MODE',\r\n    IN_TABLE_TEXT_MODE = 'IN_TABLE_TEXT_MODE',\r\n    IN_CAPTION_MODE = 'IN_CAPTION_MODE',\r\n    IN_COLUMN_GROUP_MODE = 'IN_COLUMN_GROUP_MODE',\r\n    IN_TABLE_BODY_MODE = 'IN_TABLE_BODY_MODE',\r\n    IN_ROW_MODE = 'IN_ROW_MODE',\r\n    IN_CELL_MODE = 'IN_CELL_MODE',\r\n    IN_SELECT_MODE = 'IN_SELECT_MODE',\r\n    IN_SELECT_IN_TABLE_MODE = 'IN_SELECT_IN_TABLE_MODE',\r\n    IN_TEMPLATE_MODE = 'IN_TEMPLATE_MODE',\r\n    AFTER_BODY_MODE = 'AFTER_BODY_MODE',\r\n    IN_FRAMESET_MODE = 'IN_FRAMESET_MODE',\r\n    AFTER_FRAMESET_MODE = 'AFTER_FRAMESET_MODE',\r\n    AFTER_AFTER_BODY_MODE = 'AFTER_AFTER_BODY_MODE',\r\n    AFTER_AFTER_FRAMESET_MODE = 'AFTER_AFTER_FRAMESET_MODE';\r\n\r\n//Insertion mode reset map\r\nvar INSERTION_MODE_RESET_MAP = {};\r\n\r\nINSERTION_MODE_RESET_MAP[$.TR] = IN_ROW_MODE;\r\nINSERTION_MODE_RESET_MAP[$.TBODY] =\r\nINSERTION_MODE_RESET_MAP[$.THEAD] =\r\nINSERTION_MODE_RESET_MAP[$.TFOOT] = IN_TABLE_BODY_MODE;\r\nINSERTION_MODE_RESET_MAP[$.CAPTION] = IN_CAPTION_MODE;\r\nINSERTION_MODE_RESET_MAP[$.COLGROUP] = IN_COLUMN_GROUP_MODE;\r\nINSERTION_MODE_RESET_MAP[$.TABLE] = IN_TABLE_MODE;\r\nINSERTION_MODE_RESET_MAP[$.BODY] = IN_BODY_MODE;\r\nINSERTION_MODE_RESET_MAP[$.FRAMESET] = IN_FRAMESET_MODE;\r\n\r\n//Template insertion mode switch map\r\nvar TEMPLATE_INSERTION_MODE_SWITCH_MAP = {};\r\n\r\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.CAPTION] =\r\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.COLGROUP] =\r\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TBODY] =\r\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TFOOT] =\r\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.THEAD] = IN_TABLE_MODE;\r\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.COL] = IN_COLUMN_GROUP_MODE;\r\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TR] = IN_TABLE_BODY_MODE;\r\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TD] =\r\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TH] = IN_ROW_MODE;\r\n\r\n//Token handlers map for insertion modes\r\nvar _ = {};\r\n\r\n_[INITIAL_MODE] = {};\r\n_[INITIAL_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[INITIAL_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenInInitialMode;\r\n_[INITIAL_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = ignoreToken;\r\n_[INITIAL_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[INITIAL_MODE][Tokenizer.DOCTYPE_TOKEN] = doctypeInInitialMode;\r\n_[INITIAL_MODE][Tokenizer.START_TAG_TOKEN] =\r\n_[INITIAL_MODE][Tokenizer.END_TAG_TOKEN] =\r\n_[INITIAL_MODE][Tokenizer.EOF_TOKEN] = tokenInInitialMode;\r\n\r\n_[BEFORE_HTML_MODE] = {};\r\n_[BEFORE_HTML_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[BEFORE_HTML_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenBeforeHtml;\r\n_[BEFORE_HTML_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = ignoreToken;\r\n_[BEFORE_HTML_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[BEFORE_HTML_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[BEFORE_HTML_MODE][Tokenizer.START_TAG_TOKEN] = startTagBeforeHtml;\r\n_[BEFORE_HTML_MODE][Tokenizer.END_TAG_TOKEN] = endTagBeforeHtml;\r\n_[BEFORE_HTML_MODE][Tokenizer.EOF_TOKEN] = tokenBeforeHtml;\r\n\r\n_[BEFORE_HEAD_MODE] = {};\r\n_[BEFORE_HEAD_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[BEFORE_HEAD_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenBeforeHead;\r\n_[BEFORE_HEAD_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = ignoreToken;\r\n_[BEFORE_HEAD_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[BEFORE_HEAD_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[BEFORE_HEAD_MODE][Tokenizer.START_TAG_TOKEN] = startTagBeforeHead;\r\n_[BEFORE_HEAD_MODE][Tokenizer.END_TAG_TOKEN] = endTagBeforeHead;\r\n_[BEFORE_HEAD_MODE][Tokenizer.EOF_TOKEN] = tokenBeforeHead;\r\n\r\n_[IN_HEAD_MODE] = {};\r\n_[IN_HEAD_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[IN_HEAD_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenInHead;\r\n_[IN_HEAD_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\r\n_[IN_HEAD_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[IN_HEAD_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[IN_HEAD_MODE][Tokenizer.START_TAG_TOKEN] = startTagInHead;\r\n_[IN_HEAD_MODE][Tokenizer.END_TAG_TOKEN] = endTagInHead;\r\n_[IN_HEAD_MODE][Tokenizer.EOF_TOKEN] = tokenInHead;\r\n\r\n_[AFTER_HEAD_MODE] = {};\r\n_[AFTER_HEAD_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[AFTER_HEAD_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenAfterHead;\r\n_[AFTER_HEAD_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\r\n_[AFTER_HEAD_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[AFTER_HEAD_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[AFTER_HEAD_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterHead;\r\n_[AFTER_HEAD_MODE][Tokenizer.END_TAG_TOKEN] = endTagAfterHead;\r\n_[AFTER_HEAD_MODE][Tokenizer.EOF_TOKEN] = tokenAfterHead;\r\n\r\n_[IN_BODY_MODE] = {};\r\n_[IN_BODY_MODE][Tokenizer.CHARACTER_TOKEN] = characterInBody;\r\n_[IN_BODY_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\r\n_[IN_BODY_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\r\n_[IN_BODY_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[IN_BODY_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[IN_BODY_MODE][Tokenizer.START_TAG_TOKEN] = startTagInBody;\r\n_[IN_BODY_MODE][Tokenizer.END_TAG_TOKEN] = endTagInBody;\r\n_[IN_BODY_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\r\n\r\n_[TEXT_MODE] = {};\r\n_[TEXT_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[TEXT_MODE][Tokenizer.NULL_CHARACTER_TOKEN] =\r\n_[TEXT_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\r\n_[TEXT_MODE][Tokenizer.COMMENT_TOKEN] =\r\n_[TEXT_MODE][Tokenizer.DOCTYPE_TOKEN] =\r\n_[TEXT_MODE][Tokenizer.START_TAG_TOKEN] = ignoreToken;\r\n_[TEXT_MODE][Tokenizer.END_TAG_TOKEN] = endTagInText;\r\n_[TEXT_MODE][Tokenizer.EOF_TOKEN] = eofInText;\r\n\r\n_[IN_TABLE_MODE] = {};\r\n_[IN_TABLE_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[IN_TABLE_MODE][Tokenizer.NULL_CHARACTER_TOKEN] =\r\n_[IN_TABLE_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = characterInTable;\r\n_[IN_TABLE_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[IN_TABLE_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[IN_TABLE_MODE][Tokenizer.START_TAG_TOKEN] = startTagInTable;\r\n_[IN_TABLE_MODE][Tokenizer.END_TAG_TOKEN] = endTagInTable;\r\n_[IN_TABLE_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\r\n\r\n_[IN_TABLE_TEXT_MODE] = {};\r\n_[IN_TABLE_TEXT_MODE][Tokenizer.CHARACTER_TOKEN] = characterInTableText;\r\n_[IN_TABLE_TEXT_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\r\n_[IN_TABLE_TEXT_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInTableText;\r\n_[IN_TABLE_TEXT_MODE][Tokenizer.COMMENT_TOKEN] =\r\n_[IN_TABLE_TEXT_MODE][Tokenizer.DOCTYPE_TOKEN] =\r\n_[IN_TABLE_TEXT_MODE][Tokenizer.START_TAG_TOKEN] =\r\n_[IN_TABLE_TEXT_MODE][Tokenizer.END_TAG_TOKEN] =\r\n_[IN_TABLE_TEXT_MODE][Tokenizer.EOF_TOKEN] = tokenInTableText;\r\n\r\n_[IN_CAPTION_MODE] = {};\r\n_[IN_CAPTION_MODE][Tokenizer.CHARACTER_TOKEN] = characterInBody;\r\n_[IN_CAPTION_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\r\n_[IN_CAPTION_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\r\n_[IN_CAPTION_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[IN_CAPTION_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[IN_CAPTION_MODE][Tokenizer.START_TAG_TOKEN] = startTagInCaption;\r\n_[IN_CAPTION_MODE][Tokenizer.END_TAG_TOKEN] = endTagInCaption;\r\n_[IN_CAPTION_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\r\n\r\n_[IN_COLUMN_GROUP_MODE] = {};\r\n_[IN_COLUMN_GROUP_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[IN_COLUMN_GROUP_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenInColumnGroup;\r\n_[IN_COLUMN_GROUP_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\r\n_[IN_COLUMN_GROUP_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[IN_COLUMN_GROUP_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[IN_COLUMN_GROUP_MODE][Tokenizer.START_TAG_TOKEN] = startTagInColumnGroup;\r\n_[IN_COLUMN_GROUP_MODE][Tokenizer.END_TAG_TOKEN] = endTagInColumnGroup;\r\n_[IN_COLUMN_GROUP_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\r\n\r\n_[IN_TABLE_BODY_MODE] = {};\r\n_[IN_TABLE_BODY_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[IN_TABLE_BODY_MODE][Tokenizer.NULL_CHARACTER_TOKEN] =\r\n_[IN_TABLE_BODY_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = characterInTable;\r\n_[IN_TABLE_BODY_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[IN_TABLE_BODY_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[IN_TABLE_BODY_MODE][Tokenizer.START_TAG_TOKEN] = startTagInTableBody;\r\n_[IN_TABLE_BODY_MODE][Tokenizer.END_TAG_TOKEN] = endTagInTableBody;\r\n_[IN_TABLE_BODY_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\r\n\r\n_[IN_ROW_MODE] = {};\r\n_[IN_ROW_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[IN_ROW_MODE][Tokenizer.NULL_CHARACTER_TOKEN] =\r\n_[IN_ROW_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = characterInTable;\r\n_[IN_ROW_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[IN_ROW_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[IN_ROW_MODE][Tokenizer.START_TAG_TOKEN] = startTagInRow;\r\n_[IN_ROW_MODE][Tokenizer.END_TAG_TOKEN] = endTagInRow;\r\n_[IN_ROW_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\r\n\r\n_[IN_CELL_MODE] = {};\r\n_[IN_CELL_MODE][Tokenizer.CHARACTER_TOKEN] = characterInBody;\r\n_[IN_CELL_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\r\n_[IN_CELL_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\r\n_[IN_CELL_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[IN_CELL_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[IN_CELL_MODE][Tokenizer.START_TAG_TOKEN] = startTagInCell;\r\n_[IN_CELL_MODE][Tokenizer.END_TAG_TOKEN] = endTagInCell;\r\n_[IN_CELL_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\r\n\r\n_[IN_SELECT_MODE] = {};\r\n_[IN_SELECT_MODE][Tokenizer.CHARACTER_TOKEN] = insertCharacters;\r\n_[IN_SELECT_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\r\n_[IN_SELECT_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\r\n_[IN_SELECT_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[IN_SELECT_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[IN_SELECT_MODE][Tokenizer.START_TAG_TOKEN] = startTagInSelect;\r\n_[IN_SELECT_MODE][Tokenizer.END_TAG_TOKEN] = endTagInSelect;\r\n_[IN_SELECT_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\r\n\r\n_[IN_SELECT_IN_TABLE_MODE] = {};\r\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.CHARACTER_TOKEN] = insertCharacters;\r\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\r\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\r\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.START_TAG_TOKEN] = startTagInSelectInTable;\r\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.END_TAG_TOKEN] = endTagInSelectInTable;\r\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\r\n\r\n_[IN_TEMPLATE_MODE] = {};\r\n_[IN_TEMPLATE_MODE][Tokenizer.CHARACTER_TOKEN] = characterInBody;\r\n_[IN_TEMPLATE_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\r\n_[IN_TEMPLATE_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\r\n_[IN_TEMPLATE_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[IN_TEMPLATE_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[IN_TEMPLATE_MODE][Tokenizer.START_TAG_TOKEN] = startTagInTemplate;\r\n_[IN_TEMPLATE_MODE][Tokenizer.END_TAG_TOKEN] = endTagInTemplate;\r\n_[IN_TEMPLATE_MODE][Tokenizer.EOF_TOKEN] = eofInTemplate;\r\n\r\n_[AFTER_BODY_MODE] = {};\r\n_[AFTER_BODY_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[AFTER_BODY_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenAfterBody;\r\n_[AFTER_BODY_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\r\n_[AFTER_BODY_MODE][Tokenizer.COMMENT_TOKEN] = appendCommentToRootHtmlElement;\r\n_[AFTER_BODY_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[AFTER_BODY_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterBody;\r\n_[AFTER_BODY_MODE][Tokenizer.END_TAG_TOKEN] = endTagAfterBody;\r\n_[AFTER_BODY_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\r\n\r\n_[IN_FRAMESET_MODE] = {};\r\n_[IN_FRAMESET_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[IN_FRAMESET_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\r\n_[IN_FRAMESET_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\r\n_[IN_FRAMESET_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[IN_FRAMESET_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[IN_FRAMESET_MODE][Tokenizer.START_TAG_TOKEN] = startTagInFrameset;\r\n_[IN_FRAMESET_MODE][Tokenizer.END_TAG_TOKEN] = endTagInFrameset;\r\n_[IN_FRAMESET_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\r\n\r\n_[AFTER_FRAMESET_MODE] = {};\r\n_[AFTER_FRAMESET_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[AFTER_FRAMESET_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\r\n_[AFTER_FRAMESET_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\r\n_[AFTER_FRAMESET_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\r\n_[AFTER_FRAMESET_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[AFTER_FRAMESET_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterFrameset;\r\n_[AFTER_FRAMESET_MODE][Tokenizer.END_TAG_TOKEN] = endTagAfterFrameset;\r\n_[AFTER_FRAMESET_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\r\n\r\n_[AFTER_AFTER_BODY_MODE] = {};\r\n_[AFTER_AFTER_BODY_MODE][Tokenizer.CHARACTER_TOKEN] = tokenAfterAfterBody;\r\n_[AFTER_AFTER_BODY_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenAfterAfterBody;\r\n_[AFTER_AFTER_BODY_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\r\n_[AFTER_AFTER_BODY_MODE][Tokenizer.COMMENT_TOKEN] = appendCommentToDocument;\r\n_[AFTER_AFTER_BODY_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[AFTER_AFTER_BODY_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterAfterBody;\r\n_[AFTER_AFTER_BODY_MODE][Tokenizer.END_TAG_TOKEN] = tokenAfterAfterBody;\r\n_[AFTER_AFTER_BODY_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\r\n\r\n_[AFTER_AFTER_FRAMESET_MODE] = {};\r\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.CHARACTER_TOKEN] =\r\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\r\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\r\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.COMMENT_TOKEN] = appendCommentToDocument;\r\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\r\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterAfterFrameset;\r\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.END_TAG_TOKEN] = ignoreToken;\r\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\r\n\r\n//Searchable index building utils (<isindex> tag)\r\nfunction getSearchableIndexFormAttrs(isindexStartTagToken) {\r\n    var indexAction = Tokenizer.getTokenAttr(isindexStartTagToken, ATTRS.ACTION),\r\n        attrs = [];\r\n\r\n    if (indexAction !== null) {\r\n        attrs.push({\r\n            name: ATTRS.ACTION,\r\n            value: indexAction\r\n        });\r\n    }\r\n\r\n    return attrs;\r\n}\r\n\r\nfunction getSearchableIndexLabelText(isindexStartTagToken) {\r\n    var indexPrompt = Tokenizer.getTokenAttr(isindexStartTagToken, ATTRS.PROMPT);\r\n\r\n    return indexPrompt === null ? SEARCHABLE_INDEX_DEFAULT_PROMPT : indexPrompt;\r\n}\r\n\r\nfunction getSearchableIndexInputAttrs(isindexStartTagToken) {\r\n    var isindexAttrs = isindexStartTagToken.attrs,\r\n        inputAttrs = [];\r\n\r\n    for (var i = 0; i < isindexAttrs.length; i++) {\r\n        var name = isindexAttrs[i].name;\r\n\r\n        if (name !== ATTRS.NAME && name !== ATTRS.ACTION && name !== ATTRS.PROMPT)\r\n            inputAttrs.push(isindexAttrs[i]);\r\n    }\r\n\r\n    inputAttrs.push({\r\n        name: ATTRS.NAME,\r\n        value: SEARCHABLE_INDEX_INPUT_NAME\r\n    });\r\n\r\n    return inputAttrs;\r\n}\r\n\r\n//Parser\r\nvar Parser = module.exports = function (treeAdapter, options) {\r\n    this.treeAdapter = treeAdapter || DefaultTreeAdapter;\r\n    this.options = Utils.mergeOptions(DEFAULT_OPTIONS, options);\r\n    this.scriptHandler = null;\r\n\r\n    if (this.options.locationInfo)\r\n        LocationInfoMixin.assign(this);\r\n};\r\n\r\n//API\r\nParser.prototype.parse = function (html) {\r\n    var document = this.treeAdapter.createDocument();\r\n\r\n    this._reset(html, document, null);\r\n    this._runParsingLoop();\r\n\r\n    return document;\r\n};\r\n\r\nParser.prototype.parseFragment = function (html, fragmentContext) {\r\n    //NOTE: use <template> element as a fragment context if context element was not provided,\r\n    //so we will parse in \"forgiving\" manner\r\n    if (!fragmentContext)\r\n        fragmentContext = this.treeAdapter.createElement($.TEMPLATE, NS.HTML, []);\r\n\r\n    //NOTE: create fake element which will be used as 'document' for fragment parsing.\r\n    //This is important for jsdom there 'document' can't be recreated, therefore\r\n    //fragment parsing causes messing of the main `document`.\r\n    var documentMock = this.treeAdapter.createElement('documentmock', NS.HTML, []);\r\n\r\n    this._reset(html, documentMock, fragmentContext);\r\n\r\n    if (this.treeAdapter.getTagName(fragmentContext) === $.TEMPLATE)\r\n        this._pushTmplInsertionMode(IN_TEMPLATE_MODE);\r\n\r\n    this._initTokenizerForFragmentParsing();\r\n    this._insertFakeRootElement();\r\n    this._resetInsertionMode();\r\n    this._findFormInFragmentContext();\r\n    this._runParsingLoop();\r\n\r\n    var rootElement = this.treeAdapter.getFirstChild(documentMock),\r\n        fragment = this.treeAdapter.createDocumentFragment();\r\n\r\n    this._adoptNodes(rootElement, fragment);\r\n\r\n    return fragment;\r\n};\r\n\r\n//Reset state\r\nParser.prototype._reset = function (html, document, fragmentContext) {\r\n    this.tokenizer = new Tokenizer(html, this.options);\r\n\r\n    this.stopped = false;\r\n\r\n    this.insertionMode = INITIAL_MODE;\r\n    this.originalInsertionMode = '';\r\n\r\n    this.document = document;\r\n    this.fragmentContext = fragmentContext;\r\n\r\n    this.headElement = null;\r\n    this.formElement = null;\r\n\r\n    this.openElements = new OpenElementStack(this.document, this.treeAdapter);\r\n    this.activeFormattingElements = new FormattingElementList(this.treeAdapter);\r\n\r\n    this.tmplInsertionModeStack = [];\r\n    this.tmplInsertionModeStackTop = -1;\r\n    this.currentTmplInsertionMode = null;\r\n\r\n    this.pendingCharacterTokens = [];\r\n    this.hasNonWhitespacePendingCharacterToken = false;\r\n\r\n    this.framesetOk = true;\r\n    this.skipNextNewLine = false;\r\n    this.fosterParentingEnabled = false;\r\n};\r\n\r\n//Parsing loop\r\nParser.prototype._iterateParsingLoop = function () {\r\n    this._setupTokenizerCDATAMode();\r\n\r\n    var token = this.tokenizer.getNextToken();\r\n\r\n    if (this.skipNextNewLine) {\r\n        this.skipNextNewLine = false;\r\n\r\n        if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN && token.chars[0] === '\\n') {\r\n            if (token.chars.length === 1)\r\n                return;\r\n\r\n            token.chars = token.chars.substr(1);\r\n        }\r\n    }\r\n\r\n    if (this._shouldProcessTokenInForeignContent(token))\r\n        this._processTokenInForeignContent(token);\r\n\r\n    else\r\n        this._processToken(token);\r\n};\r\n\r\nParser.prototype._runParsingLoop = function () {\r\n    while (!this.stopped)\r\n        this._iterateParsingLoop();\r\n};\r\n\r\n//Text parsing\r\nParser.prototype._setupTokenizerCDATAMode = function () {\r\n    var current = this._getAdjustedCurrentElement();\r\n\r\n    this.tokenizer.allowCDATA = current && current !== this.document &&\r\n                                this.treeAdapter.getNamespaceURI(current) !== NS.HTML &&\r\n                                (!this._isHtmlIntegrationPoint(current)) &&\r\n                                (!this._isMathMLTextIntegrationPoint(current));\r\n};\r\n\r\nParser.prototype._switchToTextParsing = function (currentToken, nextTokenizerState) {\r\n    this._insertElement(currentToken, NS.HTML);\r\n    this.tokenizer.state = nextTokenizerState;\r\n    this.originalInsertionMode = this.insertionMode;\r\n    this.insertionMode = TEXT_MODE;\r\n};\r\n\r\n//Fragment parsing\r\nParser.prototype._getAdjustedCurrentElement = function () {\r\n    return this.openElements.stackTop === 0 && this.fragmentContext ?\r\n           this.fragmentContext :\r\n           this.openElements.current;\r\n};\r\n\r\nParser.prototype._findFormInFragmentContext = function () {\r\n    var node = this.fragmentContext;\r\n\r\n    do {\r\n        if (this.treeAdapter.getTagName(node) === $.FORM) {\r\n            this.formElement = node;\r\n            break;\r\n        }\r\n\r\n        node = this.treeAdapter.getParentNode(node);\r\n    } while (node);\r\n};\r\n\r\nParser.prototype._initTokenizerForFragmentParsing = function () {\r\n    var tn = this.treeAdapter.getTagName(this.fragmentContext);\r\n\r\n    if (tn === $.TITLE || tn === $.TEXTAREA)\r\n        this.tokenizer.state = Tokenizer.MODE.RCDATA;\r\n\r\n    else if (tn === $.STYLE || tn === $.XMP || tn === $.IFRAME ||\r\n             tn === $.NOEMBED || tn === $.NOFRAMES || tn === $.NOSCRIPT) {\r\n        this.tokenizer.state = Tokenizer.MODE.RAWTEXT;\r\n    }\r\n\r\n    else if (tn === $.SCRIPT)\r\n        this.tokenizer.state = Tokenizer.MODE.SCRIPT_DATA;\r\n\r\n    else if (tn === $.PLAINTEXT)\r\n        this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\r\n};\r\n\r\n//Tree mutation\r\nParser.prototype._setDocumentType = function (token) {\r\n    this.treeAdapter.setDocumentType(this.document, token.name, token.publicId, token.systemId);\r\n};\r\n\r\nParser.prototype._attachElementToTree = function (element) {\r\n    if (this._shouldFosterParentOnInsertion())\r\n        this._fosterParentElement(element);\r\n\r\n    else {\r\n        var parent = this.openElements.currentTmplContent || this.openElements.current;\r\n\r\n        this.treeAdapter.appendChild(parent, element);\r\n    }\r\n};\r\n\r\nParser.prototype._appendElement = function (token, namespaceURI) {\r\n    var element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\r\n\r\n    this._attachElementToTree(element);\r\n};\r\n\r\nParser.prototype._insertElement = function (token, namespaceURI) {\r\n    var element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\r\n\r\n    this._attachElementToTree(element);\r\n    this.openElements.push(element);\r\n};\r\n\r\nParser.prototype._insertTemplate = function (token) {\r\n    var tmpl = this.treeAdapter.createElement(token.tagName, NS.HTML, token.attrs),\r\n        content = this.treeAdapter.createDocumentFragment();\r\n\r\n    this.treeAdapter.appendChild(tmpl, content);\r\n    this._attachElementToTree(tmpl);\r\n    this.openElements.push(tmpl);\r\n};\r\n\r\nParser.prototype._insertFakeRootElement = function () {\r\n    var element = this.treeAdapter.createElement($.HTML, NS.HTML, []);\r\n\r\n    this.treeAdapter.appendChild(this.openElements.current, element);\r\n    this.openElements.push(element);\r\n};\r\n\r\nParser.prototype._appendCommentNode = function (token, parent) {\r\n    var commentNode = this.treeAdapter.createCommentNode(token.data);\r\n\r\n    this.treeAdapter.appendChild(parent, commentNode);\r\n};\r\n\r\nParser.prototype._insertCharacters = function (token) {\r\n    if (this._shouldFosterParentOnInsertion())\r\n        this._fosterParentText(token.chars);\r\n\r\n    else {\r\n        var parent = this.openElements.currentTmplContent || this.openElements.current;\r\n\r\n        this.treeAdapter.insertText(parent, token.chars);\r\n    }\r\n};\r\n\r\nParser.prototype._adoptNodes = function (donor, recipient) {\r\n    while (true) {\r\n        var child = this.treeAdapter.getFirstChild(donor);\r\n\r\n        if (!child)\r\n            break;\r\n\r\n        this.treeAdapter.detachNode(child);\r\n        this.treeAdapter.appendChild(recipient, child);\r\n    }\r\n};\r\n\r\n//Token processing\r\nParser.prototype._shouldProcessTokenInForeignContent = function (token) {\r\n    var current = this._getAdjustedCurrentElement();\r\n\r\n    if (!current || current === this.document)\r\n        return false;\r\n\r\n    var ns = this.treeAdapter.getNamespaceURI(current);\r\n\r\n    if (ns === NS.HTML)\r\n        return false;\r\n\r\n    if (this.treeAdapter.getTagName(current) === $.ANNOTATION_XML && ns === NS.MATHML &&\r\n        token.type === Tokenizer.START_TAG_TOKEN && token.tagName === $.SVG) {\r\n        return false;\r\n    }\r\n\r\n    var isCharacterToken = token.type === Tokenizer.CHARACTER_TOKEN ||\r\n                           token.type === Tokenizer.NULL_CHARACTER_TOKEN ||\r\n                           token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN,\r\n        isMathMLTextStartTag = token.type === Tokenizer.START_TAG_TOKEN &&\r\n                               token.tagName !== $.MGLYPH &&\r\n                               token.tagName !== $.MALIGNMARK;\r\n\r\n    if ((isMathMLTextStartTag || isCharacterToken) && this._isMathMLTextIntegrationPoint(current))\r\n        return false;\r\n\r\n    if ((token.type === Tokenizer.START_TAG_TOKEN || isCharacterToken) && this._isHtmlIntegrationPoint(current))\r\n        return false;\r\n\r\n    return token.type !== Tokenizer.EOF_TOKEN;\r\n};\r\n\r\nParser.prototype._processToken = function (token) {\r\n    _[this.insertionMode][token.type](this, token);\r\n};\r\n\r\nParser.prototype._processTokenInBodyMode = function (token) {\r\n    _[IN_BODY_MODE][token.type](this, token);\r\n};\r\n\r\nParser.prototype._processTokenInForeignContent = function (token) {\r\n    if (token.type === Tokenizer.CHARACTER_TOKEN)\r\n        characterInForeignContent(this, token);\r\n\r\n    else if (token.type === Tokenizer.NULL_CHARACTER_TOKEN)\r\n        nullCharacterInForeignContent(this, token);\r\n\r\n    else if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN)\r\n        insertCharacters(this, token);\r\n\r\n    else if (token.type === Tokenizer.COMMENT_TOKEN)\r\n        appendComment(this, token);\r\n\r\n    else if (token.type === Tokenizer.START_TAG_TOKEN)\r\n        startTagInForeignContent(this, token);\r\n\r\n    else if (token.type === Tokenizer.END_TAG_TOKEN)\r\n        endTagInForeignContent(this, token);\r\n};\r\n\r\nParser.prototype._processFakeStartTagWithAttrs = function (tagName, attrs) {\r\n    var fakeToken = this.tokenizer.buildStartTagToken(tagName);\r\n\r\n    fakeToken.attrs = attrs;\r\n    this._processToken(fakeToken);\r\n};\r\n\r\nParser.prototype._processFakeStartTag = function (tagName) {\r\n    var fakeToken = this.tokenizer.buildStartTagToken(tagName);\r\n\r\n    this._processToken(fakeToken);\r\n    return fakeToken;\r\n};\r\n\r\nParser.prototype._processFakeEndTag = function (tagName) {\r\n    var fakeToken = this.tokenizer.buildEndTagToken(tagName);\r\n\r\n    this._processToken(fakeToken);\r\n    return fakeToken;\r\n};\r\n\r\n//Integration points\r\nParser.prototype._isMathMLTextIntegrationPoint = function (element) {\r\n    var tn = this.treeAdapter.getTagName(element),\r\n        ns = this.treeAdapter.getNamespaceURI(element);\r\n\r\n    return ForeignContent.isMathMLTextIntegrationPoint(tn, ns);\r\n};\r\n\r\nParser.prototype._isHtmlIntegrationPoint = function (element) {\r\n    var tn = this.treeAdapter.getTagName(element),\r\n        ns = this.treeAdapter.getNamespaceURI(element),\r\n        attrs = this.treeAdapter.getAttrList(element);\r\n\r\n    return ForeignContent.isHtmlIntegrationPoint(tn, ns, attrs);\r\n};\r\n\r\n//Active formatting elements reconstruction\r\nParser.prototype._reconstructActiveFormattingElements = function () {\r\n    var listLength = this.activeFormattingElements.length;\r\n\r\n    if (listLength) {\r\n        var unopenIdx = listLength,\r\n            entry = null;\r\n\r\n        do {\r\n            unopenIdx--;\r\n            entry = this.activeFormattingElements.entries[unopenIdx];\r\n\r\n            if (entry.type === FormattingElementList.MARKER_ENTRY || this.openElements.contains(entry.element)) {\r\n                unopenIdx++;\r\n                break;\r\n            }\r\n        } while (unopenIdx > 0);\r\n\r\n        for (var i = unopenIdx; i < listLength; i++) {\r\n            entry = this.activeFormattingElements.entries[i];\r\n            this._insertElement(entry.token, this.treeAdapter.getNamespaceURI(entry.element));\r\n            entry.element = this.openElements.current;\r\n        }\r\n    }\r\n};\r\n\r\n//Close elements\r\nParser.prototype._closeTableCell = function () {\r\n    if (this.openElements.hasInTableScope($.TD))\r\n        this._processFakeEndTag($.TD);\r\n\r\n    else\r\n        this._processFakeEndTag($.TH);\r\n};\r\n\r\nParser.prototype._closePElement = function () {\r\n    this.openElements.generateImpliedEndTagsWithExclusion($.P);\r\n    this.openElements.popUntilTagNamePopped($.P);\r\n};\r\n\r\n//Insertion modes\r\nParser.prototype._resetInsertionMode = function () {\r\n    for (var i = this.openElements.stackTop, last = false; i >= 0; i--) {\r\n        var element = this.openElements.items[i];\r\n\r\n        if (i === 0) {\r\n            last = true;\r\n\r\n            if (this.fragmentContext)\r\n                element = this.fragmentContext;\r\n        }\r\n\r\n        var tn = this.treeAdapter.getTagName(element),\r\n            newInsertionMode = INSERTION_MODE_RESET_MAP[tn];\r\n\r\n        if (newInsertionMode) {\r\n            this.insertionMode = newInsertionMode;\r\n            break;\r\n        }\r\n\r\n        else if (!last && (tn === $.TD || tn === $.TH)) {\r\n            this.insertionMode = IN_CELL_MODE;\r\n            break;\r\n        }\r\n\r\n        else if (!last && tn === $.HEAD) {\r\n            this.insertionMode = IN_HEAD_MODE;\r\n            break;\r\n        }\r\n\r\n        else if (tn === $.SELECT) {\r\n            this._resetInsertionModeForSelect(i);\r\n            break;\r\n        }\r\n\r\n        else if (tn === $.TEMPLATE) {\r\n            this.insertionMode = this.currentTmplInsertionMode;\r\n            break;\r\n        }\r\n\r\n        else if (tn === $.HTML) {\r\n            this.insertionMode = this.headElement ? AFTER_HEAD_MODE : BEFORE_HEAD_MODE;\r\n            break;\r\n        }\r\n\r\n        else if (last) {\r\n            this.insertionMode = IN_BODY_MODE;\r\n            break;\r\n        }\r\n    }\r\n};\r\n\r\nParser.prototype._resetInsertionModeForSelect = function (selectIdx) {\r\n    if (selectIdx > 0) {\r\n        for (var i = selectIdx - 1; i > 0; i--) {\r\n            var ancestor = this.openElements.items[i],\r\n                tn = this.treeAdapter.getTagName(ancestor);\r\n\r\n            if (tn === $.TEMPLATE)\r\n                break;\r\n\r\n            else if (tn === $.TABLE) {\r\n                this.insertionMode = IN_SELECT_IN_TABLE_MODE;\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    this.insertionMode = IN_SELECT_MODE;\r\n};\r\n\r\nParser.prototype._pushTmplInsertionMode = function (mode) {\r\n    this.tmplInsertionModeStack.push(mode);\r\n    this.tmplInsertionModeStackTop++;\r\n    this.currentTmplInsertionMode = mode;\r\n};\r\n\r\nParser.prototype._popTmplInsertionMode = function () {\r\n    this.tmplInsertionModeStack.pop();\r\n    this.tmplInsertionModeStackTop--;\r\n    this.currentTmplInsertionMode = this.tmplInsertionModeStack[this.tmplInsertionModeStackTop];\r\n};\r\n\r\n//Foster parenting\r\nParser.prototype._isElementCausesFosterParenting = function (element) {\r\n    var tn = this.treeAdapter.getTagName(element);\r\n\r\n    return tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn == $.THEAD || tn === $.TR;\r\n};\r\n\r\nParser.prototype._shouldFosterParentOnInsertion = function () {\r\n    return this.fosterParentingEnabled && this._isElementCausesFosterParenting(this.openElements.current);\r\n};\r\n\r\nParser.prototype._findFosterParentingLocation = function () {\r\n    var location = {\r\n        parent: null,\r\n        beforeElement: null\r\n    };\r\n\r\n    for (var i = this.openElements.stackTop; i >= 0; i--) {\r\n        var openElement = this.openElements.items[i],\r\n            tn = this.treeAdapter.getTagName(openElement),\r\n            ns = this.treeAdapter.getNamespaceURI(openElement);\r\n\r\n        if (tn === $.TEMPLATE && ns === NS.HTML) {\r\n            location.parent = this.treeAdapter.getChildNodes(openElement)[0];\r\n            break;\r\n        }\r\n\r\n        else if (tn === $.TABLE) {\r\n            location.parent = this.treeAdapter.getParentNode(openElement);\r\n\r\n            if (location.parent)\r\n                location.beforeElement = openElement;\r\n            else\r\n                location.parent = this.openElements.items[i - 1];\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (!location.parent)\r\n        location.parent = this.openElements.items[0];\r\n\r\n    return location;\r\n};\r\n\r\nParser.prototype._fosterParentElement = function (element) {\r\n    var location = this._findFosterParentingLocation();\r\n\r\n    if (location.beforeElement)\r\n        this.treeAdapter.insertBefore(location.parent, element, location.beforeElement);\r\n    else\r\n        this.treeAdapter.appendChild(location.parent, element);\r\n};\r\n\r\nParser.prototype._fosterParentText = function (chars) {\r\n    var location = this._findFosterParentingLocation();\r\n\r\n    if (location.beforeElement)\r\n        this.treeAdapter.insertTextBefore(location.parent, chars, location.beforeElement);\r\n    else\r\n        this.treeAdapter.insertText(location.parent, chars);\r\n};\r\n\r\n//Special elements\r\nParser.prototype._isSpecialElement = function (element) {\r\n    var tn = this.treeAdapter.getTagName(element),\r\n        ns = this.treeAdapter.getNamespaceURI(element);\r\n\r\n    return HTML.SPECIAL_ELEMENTS[ns][tn];\r\n};\r\n\r\n//Adoption agency algorithm\r\n//(see: http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#adoptionAgency)\r\n//------------------------------------------------------------------\r\n\r\n//Steps 5-8 of the algorithm\r\nfunction aaObtainFormattingElementEntry(p, token) {\r\n    var formattingElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName(token.tagName);\r\n\r\n    if (formattingElementEntry) {\r\n        if (!p.openElements.contains(formattingElementEntry.element)) {\r\n            p.activeFormattingElements.removeEntry(formattingElementEntry);\r\n            formattingElementEntry = null;\r\n        }\r\n\r\n        else if (!p.openElements.hasInScope(token.tagName))\r\n            formattingElementEntry = null;\r\n    }\r\n\r\n    else\r\n        genericEndTagInBody(p, token);\r\n\r\n    return formattingElementEntry;\r\n}\r\n\r\n//Steps 9 and 10 of the algorithm\r\nfunction aaObtainFurthestBlock(p, formattingElementEntry) {\r\n    var furthestBlock = null;\r\n\r\n    for (var i = p.openElements.stackTop; i >= 0; i--) {\r\n        var element = p.openElements.items[i];\r\n\r\n        if (element === formattingElementEntry.element)\r\n            break;\r\n\r\n        if (p._isSpecialElement(element))\r\n            furthestBlock = element;\r\n    }\r\n\r\n    if (!furthestBlock) {\r\n        p.openElements.popUntilElementPopped(formattingElementEntry.element);\r\n        p.activeFormattingElements.removeEntry(formattingElementEntry);\r\n    }\r\n\r\n    return furthestBlock;\r\n}\r\n\r\n//Step 13 of the algorithm\r\nfunction aaInnerLoop(p, furthestBlock, formattingElement) {\r\n    var element = null,\r\n        lastElement = furthestBlock,\r\n        nextElement = p.openElements.getCommonAncestor(furthestBlock);\r\n\r\n    for (var i = 0; i < AA_INNER_LOOP_ITER; i++) {\r\n        element = nextElement;\r\n\r\n        //NOTE: store next element for the next loop iteration (it may be deleted from the stack by step 9.5)\r\n        nextElement = p.openElements.getCommonAncestor(element);\r\n\r\n        var elementEntry = p.activeFormattingElements.getElementEntry(element);\r\n\r\n        if (!elementEntry) {\r\n            p.openElements.remove(element);\r\n            continue;\r\n        }\r\n\r\n        if (element === formattingElement)\r\n            break;\r\n\r\n        element = aaRecreateElementFromEntry(p, elementEntry);\r\n\r\n        if (lastElement === furthestBlock)\r\n            p.activeFormattingElements.bookmark = elementEntry;\r\n\r\n        p.treeAdapter.detachNode(lastElement);\r\n        p.treeAdapter.appendChild(element, lastElement);\r\n        lastElement = element;\r\n    }\r\n\r\n    return lastElement;\r\n}\r\n\r\n//Step 13.7 of the algorithm\r\nfunction aaRecreateElementFromEntry(p, elementEntry) {\r\n    var ns = p.treeAdapter.getNamespaceURI(elementEntry.element),\r\n        newElement = p.treeAdapter.createElement(elementEntry.token.tagName, ns, elementEntry.token.attrs);\r\n\r\n    p.openElements.replace(elementEntry.element, newElement);\r\n    elementEntry.element = newElement;\r\n\r\n    return newElement;\r\n}\r\n\r\n//Step 14 of the algorithm\r\nfunction aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement) {\r\n    if (p._isElementCausesFosterParenting(commonAncestor))\r\n        p._fosterParentElement(lastElement);\r\n\r\n    else {\r\n        var tn = p.treeAdapter.getTagName(commonAncestor),\r\n            ns = p.treeAdapter.getNamespaceURI(commonAncestor);\r\n\r\n        if (tn === $.TEMPLATE && ns === NS.HTML)\r\n            commonAncestor = p.treeAdapter.getChildNodes(commonAncestor)[0];\r\n\r\n        p.treeAdapter.appendChild(commonAncestor, lastElement);\r\n    }\r\n}\r\n\r\n//Steps 15-19 of the algorithm\r\nfunction aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry) {\r\n    var ns = p.treeAdapter.getNamespaceURI(formattingElementEntry.element),\r\n        token = formattingElementEntry.token,\r\n        newElement = p.treeAdapter.createElement(token.tagName, ns, token.attrs);\r\n\r\n    p._adoptNodes(furthestBlock, newElement);\r\n    p.treeAdapter.appendChild(furthestBlock, newElement);\r\n\r\n    p.activeFormattingElements.insertElementAfterBookmark(newElement, formattingElementEntry.token);\r\n    p.activeFormattingElements.removeEntry(formattingElementEntry);\r\n\r\n    p.openElements.remove(formattingElementEntry.element);\r\n    p.openElements.insertAfter(furthestBlock, newElement);\r\n}\r\n\r\n//Algorithm entry point\r\nfunction callAdoptionAgency(p, token) {\r\n    for (var i = 0; i < AA_OUTER_LOOP_ITER; i++) {\r\n        var formattingElementEntry = aaObtainFormattingElementEntry(p, token, formattingElementEntry);\r\n\r\n        if (!formattingElementEntry)\r\n            break;\r\n\r\n        var furthestBlock = aaObtainFurthestBlock(p, formattingElementEntry);\r\n\r\n        if (!furthestBlock)\r\n            break;\r\n\r\n        p.activeFormattingElements.bookmark = formattingElementEntry;\r\n\r\n        var lastElement = aaInnerLoop(p, furthestBlock, formattingElementEntry.element),\r\n            commonAncestor = p.openElements.getCommonAncestor(formattingElementEntry.element);\r\n\r\n        p.treeAdapter.detachNode(lastElement);\r\n        aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement);\r\n        aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry);\r\n    }\r\n}\r\n\r\n\r\n//Generic token handlers\r\n//------------------------------------------------------------------\r\nfunction ignoreToken(p, token) {\r\n    //NOTE: do nothing =)\r\n}\r\n\r\nfunction appendComment(p, token) {\r\n    p._appendCommentNode(token, p.openElements.currentTmplContent || p.openElements.current)\r\n}\r\n\r\nfunction appendCommentToRootHtmlElement(p, token) {\r\n    p._appendCommentNode(token, p.openElements.items[0]);\r\n}\r\n\r\nfunction appendCommentToDocument(p, token) {\r\n    p._appendCommentNode(token, p.document);\r\n}\r\n\r\nfunction insertCharacters(p, token) {\r\n    p._insertCharacters(token);\r\n}\r\n\r\nfunction stopParsing(p, token) {\r\n    p.stopped = true;\r\n}\r\n\r\n//12.2.5.4.1 The \"initial\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction doctypeInInitialMode(p, token) {\r\n    p._setDocumentType(token);\r\n\r\n    if (token.forceQuirks || Doctype.isQuirks(token.name, token.publicId, token.systemId))\r\n        p.treeAdapter.setQuirksMode(p.document);\r\n\r\n    p.insertionMode = BEFORE_HTML_MODE;\r\n}\r\n\r\nfunction tokenInInitialMode(p, token) {\r\n    p.treeAdapter.setQuirksMode(p.document);\r\n    p.insertionMode = BEFORE_HTML_MODE;\r\n    p._processToken(token);\r\n}\r\n\r\n\r\n//12.2.5.4.2 The \"before html\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagBeforeHtml(p, token) {\r\n    if (token.tagName === $.HTML) {\r\n        p._insertElement(token, NS.HTML);\r\n        p.insertionMode = BEFORE_HEAD_MODE;\r\n    }\r\n\r\n    else\r\n        tokenBeforeHtml(p, token);\r\n}\r\n\r\nfunction endTagBeforeHtml(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.HTML || tn === $.HEAD || tn === $.BODY || tn === $.BR)\r\n        tokenBeforeHtml(p, token);\r\n}\r\n\r\nfunction tokenBeforeHtml(p, token) {\r\n    p._insertFakeRootElement();\r\n    p.insertionMode = BEFORE_HEAD_MODE;\r\n    p._processToken(token);\r\n}\r\n\r\n\r\n//12.2.5.4.3 The \"before head\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagBeforeHead(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.HTML)\r\n        startTagInBody(p, token);\r\n\r\n    else if (tn === $.HEAD) {\r\n        p._insertElement(token, NS.HTML);\r\n        p.headElement = p.openElements.current;\r\n        p.insertionMode = IN_HEAD_MODE;\r\n    }\r\n\r\n    else\r\n        tokenBeforeHead(p, token);\r\n}\r\n\r\nfunction endTagBeforeHead(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.HEAD || tn === $.BODY || tn === $.HTML || tn === $.BR)\r\n        tokenBeforeHead(p, token);\r\n}\r\n\r\nfunction tokenBeforeHead(p, token) {\r\n    p._processFakeStartTag($.HEAD);\r\n    p._processToken(token);\r\n}\r\n\r\n\r\n//12.2.5.4.4 The \"in head\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagInHead(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.HTML)\r\n        startTagInBody(p, token);\r\n\r\n    else if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND ||\r\n             tn === $.COMMAND || tn === $.LINK || tn === $.META) {\r\n        p._appendElement(token, NS.HTML);\r\n    }\r\n\r\n    else if (tn === $.TITLE)\r\n        p._switchToTextParsing(token, Tokenizer.MODE.RCDATA);\r\n\r\n    //NOTE: here we assume that we always act as an interactive user agent with enabled scripting, so we parse\r\n    //<noscript> as a rawtext.\r\n    else if (tn === $.NOSCRIPT || tn === $.NOFRAMES || tn === $.STYLE)\r\n        p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\r\n\r\n    else if (tn === $.SCRIPT)\r\n        p._switchToTextParsing(token, Tokenizer.MODE.SCRIPT_DATA);\r\n\r\n    else if (tn === $.TEMPLATE) {\r\n        p._insertTemplate(token, NS.HTML);\r\n        p.activeFormattingElements.insertMarker();\r\n        p.framesetOk = false;\r\n        p.insertionMode = IN_TEMPLATE_MODE;\r\n        p._pushTmplInsertionMode(IN_TEMPLATE_MODE);\r\n    }\r\n\r\n    else if (tn !== $.HEAD)\r\n        tokenInHead(p, token);\r\n}\r\n\r\nfunction endTagInHead(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.HEAD) {\r\n        p.openElements.pop();\r\n        p.insertionMode = AFTER_HEAD_MODE;\r\n    }\r\n\r\n    else if (tn === $.BODY || tn === $.BR || tn === $.HTML)\r\n        tokenInHead(p, token);\r\n\r\n    else if (tn === $.TEMPLATE && p.openElements.tmplCount > 0) {\r\n        p.openElements.generateImpliedEndTags();\r\n        p.openElements.popUntilTemplatePopped();\r\n        p.activeFormattingElements.clearToLastMarker();\r\n        p._popTmplInsertionMode();\r\n        p._resetInsertionMode();\r\n    }\r\n}\r\n\r\nfunction tokenInHead(p, token) {\r\n    p._processFakeEndTag($.HEAD);\r\n    p._processToken(token);\r\n}\r\n\r\n\r\n//12.2.5.4.6 The \"after head\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagAfterHead(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.HTML)\r\n        startTagInBody(p, token);\r\n\r\n    else if (tn === $.BODY) {\r\n        p._insertElement(token, NS.HTML);\r\n        p.framesetOk = false;\r\n        p.insertionMode = IN_BODY_MODE;\r\n    }\r\n\r\n    else if (tn === $.FRAMESET) {\r\n        p._insertElement(token, NS.HTML);\r\n        p.insertionMode = IN_FRAMESET_MODE;\r\n    }\r\n\r\n    else if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META ||\r\n             tn === $.NOFRAMES || tn === $.SCRIPT || tn === $.STYLE || tn === $.TEMPLATE || tn === $.TITLE) {\r\n        p.openElements.push(p.headElement);\r\n        startTagInHead(p, token);\r\n        p.openElements.remove(p.headElement);\r\n    }\r\n\r\n    else if (tn !== $.HEAD)\r\n        tokenAfterHead(p, token);\r\n}\r\n\r\nfunction endTagAfterHead(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.BODY || tn === $.HTML || tn === $.BR)\r\n        tokenAfterHead(p, token);\r\n\r\n    else if (tn === $.TEMPLATE)\r\n        endTagInHead(p, token);\r\n}\r\n\r\nfunction tokenAfterHead(p, token) {\r\n    p._processFakeStartTag($.BODY);\r\n    p.framesetOk = true;\r\n    p._processToken(token);\r\n}\r\n\r\n\r\n//12.2.5.4.7 The \"in body\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction whitespaceCharacterInBody(p, token) {\r\n    p._reconstructActiveFormattingElements();\r\n    p._insertCharacters(token);\r\n}\r\n\r\nfunction characterInBody(p, token) {\r\n    p._reconstructActiveFormattingElements();\r\n    p._insertCharacters(token);\r\n    p.framesetOk = false;\r\n}\r\n\r\nfunction htmlStartTagInBody(p, token) {\r\n    if (p.openElements.tmplCount === 0)\r\n        p.treeAdapter.adoptAttributes(p.openElements.items[0], token.attrs);\r\n}\r\n\r\nfunction bodyStartTagInBody(p, token) {\r\n    var bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\r\n\r\n    if (bodyElement && p.openElements.tmplCount === 0) {\r\n        p.framesetOk = false;\r\n        p.treeAdapter.adoptAttributes(bodyElement, token.attrs);\r\n    }\r\n}\r\n\r\nfunction framesetStartTagInBody(p, token) {\r\n    var bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\r\n\r\n    if (p.framesetOk && bodyElement) {\r\n        p.treeAdapter.detachNode(bodyElement);\r\n        p.openElements.popAllUpToHtmlElement();\r\n        p._insertElement(token, NS.HTML);\r\n        p.insertionMode = IN_FRAMESET_MODE;\r\n    }\r\n}\r\n\r\nfunction addressStartTagInBody(p, token) {\r\n    if (p.openElements.hasInButtonScope($.P))\r\n        p._closePElement();\r\n\r\n    p._insertElement(token, NS.HTML);\r\n}\r\n\r\nfunction numberedHeaderStartTagInBody(p, token) {\r\n    if (p.openElements.hasInButtonScope($.P))\r\n        p._closePElement();\r\n\r\n    var tn = p.openElements.currentTagName;\r\n\r\n    if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6)\r\n        p.openElements.pop();\r\n\r\n    p._insertElement(token, NS.HTML);\r\n}\r\n\r\nfunction preStartTagInBody(p, token) {\r\n    if (p.openElements.hasInButtonScope($.P))\r\n        p._closePElement();\r\n\r\n    p._insertElement(token, NS.HTML);\r\n    //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\r\n    //on to the next one. (Newlines at the start of pre blocks are ignored as an authoring convenience.)\r\n    p.skipNextNewLine = true;\r\n    p.framesetOk = false;\r\n}\r\n\r\nfunction formStartTagInBody(p, token) {\r\n    var inTemplate = p.openElements.tmplCount > 0;\r\n\r\n    if (!p.formElement || inTemplate) {\r\n        if (p.openElements.hasInButtonScope($.P))\r\n            p._closePElement();\r\n\r\n        p._insertElement(token, NS.HTML);\r\n\r\n        if (!inTemplate)\r\n            p.formElement = p.openElements.current;\r\n    }\r\n}\r\n\r\nfunction listItemStartTagInBody(p, token) {\r\n    p.framesetOk = false;\r\n\r\n    for (var i = p.openElements.stackTop; i >= 0; i--) {\r\n        var element = p.openElements.items[i],\r\n            tn = p.treeAdapter.getTagName(element);\r\n\r\n        if ((token.tagName === $.LI && tn === $.LI) ||\r\n            ((token.tagName === $.DD || token.tagName === $.DT) && (tn === $.DD || tn == $.DT))) {\r\n            p._processFakeEndTag(tn);\r\n            break;\r\n        }\r\n\r\n        if (tn !== $.ADDRESS && tn !== $.DIV && tn !== $.P && p._isSpecialElement(element))\r\n            break;\r\n    }\r\n\r\n    if (p.openElements.hasInButtonScope($.P))\r\n        p._closePElement();\r\n\r\n    p._insertElement(token, NS.HTML);\r\n}\r\n\r\nfunction plaintextStartTagInBody(p, token) {\r\n    if (p.openElements.hasInButtonScope($.P))\r\n        p._closePElement();\r\n\r\n    p._insertElement(token, NS.HTML);\r\n    p.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\r\n}\r\n\r\nfunction buttonStartTagInBody(p, token) {\r\n    if (p.openElements.hasInScope($.BUTTON)) {\r\n        p._processFakeEndTag($.BUTTON);\r\n        buttonStartTagInBody(p, token);\r\n    }\r\n\r\n    else {\r\n        p._reconstructActiveFormattingElements();\r\n        p._insertElement(token, NS.HTML);\r\n        p.framesetOk = false;\r\n    }\r\n}\r\n\r\nfunction aStartTagInBody(p, token) {\r\n    var activeElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName($.A);\r\n\r\n    if (activeElementEntry) {\r\n        p._processFakeEndTag($.A);\r\n        p.openElements.remove(activeElementEntry.element);\r\n        p.activeFormattingElements.removeEntry(activeElementEntry);\r\n    }\r\n\r\n    p._reconstructActiveFormattingElements();\r\n    p._insertElement(token, NS.HTML);\r\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\r\n}\r\n\r\nfunction bStartTagInBody(p, token) {\r\n    p._reconstructActiveFormattingElements();\r\n    p._insertElement(token, NS.HTML);\r\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\r\n}\r\n\r\nfunction nobrStartTagInBody(p, token) {\r\n    p._reconstructActiveFormattingElements();\r\n\r\n    if (p.openElements.hasInScope($.NOBR)) {\r\n        p._processFakeEndTag($.NOBR);\r\n        p._reconstructActiveFormattingElements();\r\n    }\r\n\r\n    p._insertElement(token, NS.HTML);\r\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\r\n}\r\n\r\nfunction appletStartTagInBody(p, token) {\r\n    p._reconstructActiveFormattingElements();\r\n    p._insertElement(token, NS.HTML);\r\n    p.activeFormattingElements.insertMarker();\r\n    p.framesetOk = false;\r\n}\r\n\r\nfunction tableStartTagInBody(p, token) {\r\n    if (!p.treeAdapter.isQuirksMode(p.document) && p.openElements.hasInButtonScope($.P))\r\n        p._closePElement();\r\n\r\n    p._insertElement(token, NS.HTML);\r\n    p.framesetOk = false;\r\n    p.insertionMode = IN_TABLE_MODE;\r\n}\r\n\r\nfunction areaStartTagInBody(p, token) {\r\n    p._reconstructActiveFormattingElements();\r\n    p._appendElement(token, NS.HTML);\r\n    p.framesetOk = false;\r\n}\r\n\r\nfunction inputStartTagInBody(p, token) {\r\n    p._reconstructActiveFormattingElements();\r\n    p._appendElement(token, NS.HTML);\r\n\r\n    var inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\r\n\r\n    if (!inputType || inputType.toLowerCase() !== HIDDEN_INPUT_TYPE)\r\n        p.framesetOk = false;\r\n\r\n}\r\n\r\nfunction paramStartTagInBody(p, token) {\r\n    p._appendElement(token, NS.HTML);\r\n}\r\n\r\nfunction hrStartTagInBody(p, token) {\r\n    if (p.openElements.hasInButtonScope($.P))\r\n        p._closePElement();\r\n\r\n    p._appendElement(token, NS.HTML);\r\n    p.framesetOk = false;\r\n}\r\n\r\nfunction imageStartTagInBody(p, token) {\r\n    token.tagName = $.IMG;\r\n    areaStartTagInBody(p, token);\r\n}\r\n\r\nfunction isindexStartTagInBody(p, token) {\r\n    if (!p.formElement || p.openElements.tmplCount > 0) {\r\n        p._processFakeStartTagWithAttrs($.FORM, getSearchableIndexFormAttrs(token));\r\n        p._processFakeStartTag($.HR);\r\n        p._processFakeStartTag($.LABEL);\r\n        p.treeAdapter.insertText(p.openElements.current, getSearchableIndexLabelText(token));\r\n        p._processFakeStartTagWithAttrs($.INPUT, getSearchableIndexInputAttrs(token));\r\n        p._processFakeEndTag($.LABEL);\r\n        p._processFakeStartTag($.HR);\r\n        p._processFakeEndTag($.FORM);\r\n    }\r\n}\r\n\r\nfunction textareaStartTagInBody(p, token) {\r\n    p._insertElement(token, NS.HTML);\r\n    //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\r\n    //on to the next one. (Newlines at the start of textarea elements are ignored as an authoring convenience.)\r\n    p.skipNextNewLine = true;\r\n    p.tokenizer.state = Tokenizer.MODE.RCDATA;\r\n    p.originalInsertionMode = p.insertionMode;\r\n    p.framesetOk = false;\r\n    p.insertionMode = TEXT_MODE;\r\n}\r\n\r\nfunction xmpStartTagInBody(p, token) {\r\n    if (p.openElements.hasInButtonScope($.P))\r\n        p._closePElement();\r\n\r\n    p._reconstructActiveFormattingElements();\r\n    p.framesetOk = false;\r\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\r\n}\r\n\r\nfunction iframeStartTagInBody(p, token) {\r\n    p.framesetOk = false;\r\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\r\n}\r\n\r\n//NOTE: here we assume that we always act as an user agent with enabled plugins, so we parse\r\n//<noembed> as a rawtext.\r\nfunction noembedStartTagInBody(p, token) {\r\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\r\n}\r\n\r\nfunction selectStartTagInBody(p, token) {\r\n    p._reconstructActiveFormattingElements();\r\n    p._insertElement(token, NS.HTML);\r\n    p.framesetOk = false;\r\n\r\n    if (p.insertionMode === IN_TABLE_MODE || p.insertionMode === IN_CAPTION_MODE ||\r\n        p.insertionMode === IN_TABLE_BODY_MODE || p.insertionMode === IN_ROW_MODE ||\r\n        p.insertionMode === IN_CELL_MODE) {\r\n        p.insertionMode = IN_SELECT_IN_TABLE_MODE;\r\n    }\r\n\r\n    else\r\n        p.insertionMode = IN_SELECT_MODE;\r\n}\r\n\r\nfunction optgroupStartTagInBody(p, token) {\r\n    if (p.openElements.currentTagName === $.OPTION)\r\n        p._processFakeEndTag($.OPTION);\r\n\r\n    p._reconstructActiveFormattingElements();\r\n    p._insertElement(token, NS.HTML);\r\n}\r\n\r\nfunction rpStartTagInBody(p, token) {\r\n    if (p.openElements.hasInScope($.RUBY))\r\n        p.openElements.generateImpliedEndTags();\r\n\r\n    p._insertElement(token, NS.HTML);\r\n}\r\n\r\nfunction menuitemStartTagInBody(p, token) {\r\n    p._appendElement(token, NS.HTML);\r\n}\r\n\r\nfunction mathStartTagInBody(p, token) {\r\n    p._reconstructActiveFormattingElements();\r\n\r\n    ForeignContent.adjustTokenMathMLAttrs(token);\r\n    ForeignContent.adjustTokenXMLAttrs(token);\r\n\r\n    if (token.selfClosing)\r\n        p._appendElement(token, NS.MATHML);\r\n    else\r\n        p._insertElement(token, NS.MATHML);\r\n}\r\n\r\nfunction svgStartTagInBody(p, token) {\r\n    p._reconstructActiveFormattingElements();\r\n\r\n    ForeignContent.adjustTokenSVGAttrs(token);\r\n    ForeignContent.adjustTokenXMLAttrs(token);\r\n\r\n    if (token.selfClosing)\r\n        p._appendElement(token, NS.SVG);\r\n    else\r\n        p._insertElement(token, NS.SVG);\r\n}\r\n\r\nfunction genericStartTagInBody(p, token) {\r\n    p._reconstructActiveFormattingElements();\r\n    p._insertElement(token, NS.HTML);\r\n}\r\n\r\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\r\n//It's faster than using dictionary.\r\nfunction startTagInBody(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    switch (tn.length) {\r\n        case 1:\r\n            if (tn === $.I || tn === $.S || tn === $.B || tn === $.U)\r\n                bStartTagInBody(p, token);\r\n\r\n            else if (tn === $.P)\r\n                addressStartTagInBody(p, token);\r\n\r\n            else if (tn === $.A)\r\n                aStartTagInBody(p, token);\r\n\r\n            else\r\n                genericStartTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 2:\r\n            if (tn === $.DL || tn === $.OL || tn === $.UL)\r\n                addressStartTagInBody(p, token);\r\n\r\n            else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6)\r\n                numberedHeaderStartTagInBody(p, token);\r\n\r\n            else if (tn === $.LI || tn === $.DD || tn === $.DT)\r\n                listItemStartTagInBody(p, token);\r\n\r\n            else if (tn === $.EM || tn === $.TT)\r\n                bStartTagInBody(p, token);\r\n\r\n            else if (tn === $.BR)\r\n                areaStartTagInBody(p, token);\r\n\r\n            else if (tn === $.HR)\r\n                hrStartTagInBody(p, token);\r\n\r\n            else if (tn === $.RP || tn === $.RT)\r\n                rpStartTagInBody(p, token);\r\n\r\n            else if (tn !== $.TH && tn !== $.TD && tn !== $.TR)\r\n                genericStartTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 3:\r\n            if (tn === $.DIV || tn === $.DIR || tn === $.NAV)\r\n                addressStartTagInBody(p, token);\r\n\r\n            else if (tn === $.PRE)\r\n                preStartTagInBody(p, token);\r\n\r\n            else if (tn === $.BIG)\r\n                bStartTagInBody(p, token);\r\n\r\n            else if (tn === $.IMG || tn === $.WBR)\r\n                areaStartTagInBody(p, token);\r\n\r\n            else if (tn === $.XMP)\r\n                xmpStartTagInBody(p, token);\r\n\r\n            else if (tn === $.SVG)\r\n                svgStartTagInBody(p, token);\r\n\r\n            else if (tn !== $.COL)\r\n                genericStartTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 4:\r\n            if (tn === $.HTML)\r\n                htmlStartTagInBody(p, token);\r\n\r\n            else if (tn === $.BASE || tn === $.LINK || tn === $.META)\r\n                startTagInHead(p, token);\r\n\r\n            else if (tn === $.BODY)\r\n                bodyStartTagInBody(p, token);\r\n\r\n            else if (tn === $.MAIN || tn === $.MENU)\r\n                addressStartTagInBody(p, token);\r\n\r\n            else if (tn === $.FORM)\r\n                formStartTagInBody(p, token);\r\n\r\n            else if (tn === $.CODE || tn === $.FONT)\r\n                bStartTagInBody(p, token);\r\n\r\n            else if (tn === $.NOBR)\r\n                nobrStartTagInBody(p, token);\r\n\r\n            else if (tn === $.AREA)\r\n                areaStartTagInBody(p, token);\r\n\r\n            else if (tn === $.MATH)\r\n                mathStartTagInBody(p, token);\r\n\r\n            else if (tn !== $.HEAD)\r\n                genericStartTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 5:\r\n            if (tn === $.STYLE || tn === $.TITLE)\r\n                startTagInHead(p, token);\r\n\r\n            else if (tn === $.ASIDE)\r\n                addressStartTagInBody(p, token);\r\n\r\n            else if (tn === $.SMALL)\r\n                bStartTagInBody(p, token);\r\n\r\n            else if (tn === $.TABLE)\r\n                tableStartTagInBody(p, token);\r\n\r\n            else if (tn === $.EMBED)\r\n                areaStartTagInBody(p, token);\r\n\r\n            else if (tn === $.INPUT)\r\n                inputStartTagInBody(p, token);\r\n\r\n            else if (tn === $.PARAM || tn === $.TRACK)\r\n                paramStartTagInBody(p, token);\r\n\r\n            else if (tn === $.IMAGE)\r\n                imageStartTagInBody(p, token);\r\n\r\n            else if (tn !== $.FRAME && tn !== $.TBODY && tn !== $.TFOOT && tn !== $.THEAD)\r\n                genericStartTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 6:\r\n            if (tn === $.SCRIPT)\r\n                startTagInHead(p, token);\r\n\r\n            else if (tn === $.CENTER || tn === $.FIGURE || tn === $.FOOTER || tn === $.HEADER || tn === $.HGROUP)\r\n                addressStartTagInBody(p, token);\r\n\r\n            else if (tn === $.BUTTON)\r\n                buttonStartTagInBody(p, token);\r\n\r\n            else if (tn === $.STRIKE || tn === $.STRONG)\r\n                bStartTagInBody(p, token);\r\n\r\n            else if (tn === $.APPLET || tn === $.OBJECT)\r\n                appletStartTagInBody(p, token);\r\n\r\n            else if (tn === $.KEYGEN)\r\n                areaStartTagInBody(p, token);\r\n\r\n            else if (tn === $.SOURCE)\r\n                paramStartTagInBody(p, token);\r\n\r\n            else if (tn === $.IFRAME)\r\n                iframeStartTagInBody(p, token);\r\n\r\n            else if (tn === $.SELECT)\r\n                selectStartTagInBody(p, token);\r\n\r\n            else if (tn === $.OPTION)\r\n                optgroupStartTagInBody(p, token);\r\n\r\n            else\r\n                genericStartTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 7:\r\n            if (tn === $.BGSOUND || tn === $.COMMAND)\r\n                startTagInHead(p, token);\r\n\r\n            else if (tn === $.DETAILS || tn === $.ADDRESS || tn === $.ARTICLE || tn === $.SECTION || tn === $.SUMMARY)\r\n                addressStartTagInBody(p, token);\r\n\r\n            else if (tn === $.LISTING)\r\n                preStartTagInBody(p, token);\r\n\r\n            else if (tn === $.MARQUEE)\r\n                appletStartTagInBody(p, token);\r\n\r\n            else if (tn === $.ISINDEX)\r\n                isindexStartTagInBody(p, token);\r\n\r\n            else if (tn === $.NOEMBED)\r\n                noembedStartTagInBody(p, token);\r\n\r\n            else if (tn !== $.CAPTION)\r\n                genericStartTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 8:\r\n            if (tn === $.BASEFONT || tn === $.MENUITEM)\r\n                menuitemStartTagInBody(p, token);\r\n\r\n            else if (tn === $.FRAMESET)\r\n                framesetStartTagInBody(p, token);\r\n\r\n            else if (tn === $.FIELDSET)\r\n                addressStartTagInBody(p, token);\r\n\r\n            else if (tn === $.TEXTAREA)\r\n                textareaStartTagInBody(p, token);\r\n\r\n            else if (tn === $.TEMPLATE)\r\n                startTagInHead(p, token);\r\n\r\n            else if (tn === $.NOSCRIPT)\r\n                noembedStartTagInBody(p, token);\r\n\r\n            else if (tn === $.OPTGROUP)\r\n                optgroupStartTagInBody(p, token);\r\n\r\n            else if (tn !== $.COLGROUP)\r\n                genericStartTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 9:\r\n            if (tn === $.PLAINTEXT)\r\n                plaintextStartTagInBody(p, token);\r\n\r\n            else\r\n                genericStartTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 10:\r\n            if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION)\r\n                addressStartTagInBody(p, token);\r\n\r\n            else\r\n                genericStartTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        default:\r\n            genericStartTagInBody(p, token);\r\n    }\r\n}\r\n\r\nfunction bodyEndTagInBody(p, token) {\r\n    if (p.openElements.hasInScope($.BODY))\r\n        p.insertionMode = AFTER_BODY_MODE;\r\n\r\n    else\r\n        token.ignored = true;\r\n}\r\n\r\nfunction htmlEndTagInBody(p, token) {\r\n    var fakeToken = p._processFakeEndTag($.BODY);\r\n\r\n    if (!fakeToken.ignored)\r\n        p._processToken(token);\r\n}\r\n\r\nfunction addressEndTagInBody(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (p.openElements.hasInScope(tn)) {\r\n        p.openElements.generateImpliedEndTags();\r\n        p.openElements.popUntilTagNamePopped(tn);\r\n    }\r\n}\r\n\r\nfunction formEndTagInBody(p, token) {\r\n    var inTemplate = p.openElements.tmplCount > 0,\r\n        formElement = p.formElement;\r\n\r\n    if (!inTemplate)\r\n        p.formElement = null;\r\n\r\n    if ((formElement || inTemplate) && p.openElements.hasInScope($.FORM)) {\r\n        p.openElements.generateImpliedEndTags();\r\n\r\n        if (inTemplate)\r\n            p.openElements.popUntilTagNamePopped($.FORM);\r\n\r\n        else\r\n            p.openElements.remove(formElement);\r\n    }\r\n}\r\n\r\nfunction pEndTagInBody(p, token) {\r\n    if (p.openElements.hasInButtonScope($.P)) {\r\n        p.openElements.generateImpliedEndTagsWithExclusion($.P);\r\n        p.openElements.popUntilTagNamePopped($.P);\r\n    }\r\n\r\n    else {\r\n        p._processFakeStartTag($.P);\r\n        p._processToken(token);\r\n    }\r\n}\r\n\r\nfunction liEndTagInBody(p, token) {\r\n    if (p.openElements.hasInListItemScope($.LI)) {\r\n        p.openElements.generateImpliedEndTagsWithExclusion($.LI);\r\n        p.openElements.popUntilTagNamePopped($.LI);\r\n    }\r\n}\r\n\r\nfunction ddEndTagInBody(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (p.openElements.hasInScope(tn)) {\r\n        p.openElements.generateImpliedEndTagsWithExclusion(tn);\r\n        p.openElements.popUntilTagNamePopped(tn);\r\n    }\r\n}\r\n\r\nfunction numberedHeaderEndTagInBody(p, token) {\r\n    if (p.openElements.hasNumberedHeaderInScope()) {\r\n        p.openElements.generateImpliedEndTags();\r\n        p.openElements.popUntilNumberedHeaderPopped();\r\n    }\r\n}\r\n\r\nfunction appletEndTagInBody(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (p.openElements.hasInScope(tn)) {\r\n        p.openElements.generateImpliedEndTags();\r\n        p.openElements.popUntilTagNamePopped(tn);\r\n        p.activeFormattingElements.clearToLastMarker();\r\n    }\r\n}\r\n\r\nfunction brEndTagInBody(p, token) {\r\n    p._processFakeStartTag($.BR);\r\n}\r\n\r\nfunction genericEndTagInBody(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    for (var i = p.openElements.stackTop; i > 0; i--) {\r\n        var element = p.openElements.items[i];\r\n\r\n        if (p.treeAdapter.getTagName(element) === tn) {\r\n            p.openElements.generateImpliedEndTagsWithExclusion(tn);\r\n            p.openElements.popUntilElementPopped(element);\r\n            break;\r\n        }\r\n\r\n        if (p._isSpecialElement(element))\r\n            break;\r\n    }\r\n}\r\n\r\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\r\n//It's faster than using dictionary.\r\nfunction endTagInBody(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    switch (tn.length) {\r\n        case 1:\r\n            if (tn === $.A || tn === $.B || tn === $.I || tn === $.S || tn == $.U)\r\n                callAdoptionAgency(p, token);\r\n\r\n            else if (tn === $.P)\r\n                pEndTagInBody(p, token);\r\n\r\n            else\r\n                genericEndTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 2:\r\n            if (tn == $.DL || tn === $.UL || tn === $.OL)\r\n                addressEndTagInBody(p, token);\r\n\r\n            else if (tn === $.LI)\r\n                liEndTagInBody(p, token);\r\n\r\n            else if (tn === $.DD || tn === $.DT)\r\n                ddEndTagInBody(p, token);\r\n\r\n            else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6)\r\n                numberedHeaderEndTagInBody(p, token);\r\n\r\n            else if (tn === $.BR)\r\n                brEndTagInBody(p, token);\r\n\r\n            else if (tn === $.EM || tn === $.TT)\r\n                callAdoptionAgency(p, token);\r\n\r\n            else\r\n                genericEndTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 3:\r\n            if (tn === $.BIG)\r\n                callAdoptionAgency(p, token);\r\n\r\n            else if (tn === $.DIR || tn === $.DIV || tn === $.NAV)\r\n                addressEndTagInBody(p, token);\r\n\r\n            else\r\n                genericEndTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 4:\r\n            if (tn === $.BODY)\r\n                bodyEndTagInBody(p, token);\r\n\r\n            else if (tn === $.HTML)\r\n                htmlEndTagInBody(p, token);\r\n\r\n            else if (tn === $.FORM)\r\n                formEndTagInBody(p, token);\r\n\r\n            else if (tn === $.CODE || tn === $.FONT || tn === $.NOBR)\r\n                callAdoptionAgency(p, token);\r\n\r\n            else if (tn === $.MAIN || tn === $.MENU)\r\n                addressEndTagInBody(p, token);\r\n\r\n            else\r\n                genericEndTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 5:\r\n            if (tn === $.ASIDE)\r\n                addressEndTagInBody(p, token);\r\n\r\n            else if (tn === $.SMALL)\r\n                callAdoptionAgency(p, token);\r\n\r\n            else\r\n                genericEndTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 6:\r\n            if (tn === $.CENTER || tn === $.FIGURE || tn === $.FOOTER || tn === $.HEADER || tn === $.HGROUP)\r\n                addressEndTagInBody(p, token);\r\n\r\n            else if (tn === $.APPLET || tn === $.OBJECT)\r\n                appletEndTagInBody(p, token);\r\n\r\n            else if (tn == $.STRIKE || tn === $.STRONG)\r\n                callAdoptionAgency(p, token);\r\n\r\n            else\r\n                genericEndTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 7:\r\n            if (tn === $.ADDRESS || tn === $.ARTICLE || tn === $.DETAILS || tn === $.SECTION || tn === $.SUMMARY)\r\n                addressEndTagInBody(p, token);\r\n\r\n            else if (tn === $.MARQUEE)\r\n                appletEndTagInBody(p, token);\r\n\r\n            else\r\n                genericEndTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 8:\r\n            if (tn === $.FIELDSET)\r\n                addressEndTagInBody(p, token);\r\n\r\n            else if (tn === $.TEMPLATE)\r\n                endTagInHead(p, token);\r\n\r\n            else\r\n                genericEndTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        case 10:\r\n            if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION)\r\n                addressEndTagInBody(p, token);\r\n\r\n            else\r\n                genericEndTagInBody(p, token);\r\n\r\n            break;\r\n\r\n        default :\r\n            genericEndTagInBody(p, token);\r\n    }\r\n}\r\n\r\nfunction eofInBody(p, token) {\r\n    if (p.tmplInsertionModeStackTop > -1)\r\n        eofInTemplate(p, token);\r\n\r\n    else\r\n        p.stopped = true;\r\n}\r\n\r\n//12.2.5.4.8 The \"text\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction endTagInText(p, token) {\r\n    if (!p.fragmentContext && p.scriptHandler && token.tagName === $.SCRIPT)\r\n        p.scriptHandler(p.document, p.openElements.current);\r\n\r\n    p.openElements.pop();\r\n    p.insertionMode = p.originalInsertionMode;\r\n}\r\n\r\n\r\nfunction eofInText(p, token) {\r\n    p.openElements.pop();\r\n    p.insertionMode = p.originalInsertionMode;\r\n    p._processToken(token);\r\n}\r\n\r\n\r\n//12.2.5.4.9 The \"in table\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction characterInTable(p, token) {\r\n    var curTn = p.openElements.currentTagName;\r\n\r\n    if (curTn === $.TABLE || curTn === $.TBODY || curTn === $.TFOOT || curTn === $.THEAD || curTn === $.TR) {\r\n        p.pendingCharacterTokens = [];\r\n        p.hasNonWhitespacePendingCharacterToken = false;\r\n        p.originalInsertionMode = p.insertionMode;\r\n        p.insertionMode = IN_TABLE_TEXT_MODE;\r\n        p._processToken(token);\r\n    }\r\n\r\n    else\r\n        tokenInTable(p, token);\r\n}\r\n\r\nfunction captionStartTagInTable(p, token) {\r\n    p.openElements.clearBackToTableContext();\r\n    p.activeFormattingElements.insertMarker();\r\n    p._insertElement(token, NS.HTML);\r\n    p.insertionMode = IN_CAPTION_MODE;\r\n}\r\n\r\nfunction colgroupStartTagInTable(p, token) {\r\n    p.openElements.clearBackToTableContext();\r\n    p._insertElement(token, NS.HTML);\r\n    p.insertionMode = IN_COLUMN_GROUP_MODE;\r\n}\r\n\r\nfunction colStartTagInTable(p, token) {\r\n    p._processFakeStartTag($.COLGROUP);\r\n    p._processToken(token);\r\n}\r\n\r\nfunction tbodyStartTagInTable(p, token) {\r\n    p.openElements.clearBackToTableContext();\r\n    p._insertElement(token, NS.HTML);\r\n    p.insertionMode = IN_TABLE_BODY_MODE;\r\n}\r\n\r\nfunction tdStartTagInTable(p, token) {\r\n    p._processFakeStartTag($.TBODY);\r\n    p._processToken(token);\r\n}\r\n\r\nfunction tableStartTagInTable(p, token) {\r\n    var fakeToken = p._processFakeEndTag($.TABLE);\r\n\r\n    //NOTE: The fake end tag token here can only be ignored in the fragment case.\r\n    if (!fakeToken.ignored)\r\n        p._processToken(token);\r\n}\r\n\r\nfunction inputStartTagInTable(p, token) {\r\n    var inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\r\n\r\n    if (inputType && inputType.toLowerCase() === HIDDEN_INPUT_TYPE)\r\n        p._appendElement(token, NS.HTML);\r\n\r\n    else\r\n        tokenInTable(p, token);\r\n}\r\n\r\nfunction formStartTagInTable(p, token) {\r\n    if (!p.formElement && p.openElements.tmplCount === 0) {\r\n        p._insertElement(token, NS.HTML);\r\n        p.formElement = p.openElements.current;\r\n        p.openElements.pop();\r\n    }\r\n}\r\n\r\nfunction startTagInTable(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    switch (tn.length) {\r\n        case 2:\r\n            if (tn === $.TD || tn === $.TH || tn === $.TR)\r\n                tdStartTagInTable(p, token);\r\n\r\n            else\r\n                tokenInTable(p, token);\r\n\r\n            break;\r\n\r\n        case 3:\r\n            if (tn === $.COL)\r\n                colStartTagInTable(p, token);\r\n\r\n            else\r\n                tokenInTable(p, token);\r\n\r\n            break;\r\n\r\n        case 4:\r\n            if (tn === $.FORM)\r\n                formStartTagInTable(p, token);\r\n\r\n            else\r\n                tokenInTable(p, token);\r\n\r\n            break;\r\n\r\n        case 5:\r\n            if (tn === $.TABLE)\r\n                tableStartTagInTable(p, token);\r\n\r\n            else if (tn === $.STYLE)\r\n                startTagInHead(p, token);\r\n\r\n            else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD)\r\n                tbodyStartTagInTable(p, token);\r\n\r\n            else if (tn === $.INPUT)\r\n                inputStartTagInTable(p, token);\r\n\r\n            else\r\n                tokenInTable(p, token);\r\n\r\n            break;\r\n\r\n        case 6:\r\n            if (tn === $.SCRIPT)\r\n                startTagInHead(p, token);\r\n\r\n            else\r\n                tokenInTable(p, token);\r\n\r\n            break;\r\n\r\n        case 7:\r\n            if (tn === $.CAPTION)\r\n                captionStartTagInTable(p, token);\r\n\r\n            else\r\n                tokenInTable(p, token);\r\n\r\n            break;\r\n\r\n        case 8:\r\n            if (tn === $.COLGROUP)\r\n                colgroupStartTagInTable(p, token);\r\n\r\n            else if (tn === $.TEMPLATE)\r\n                startTagInHead(p, token);\r\n\r\n            else\r\n                tokenInTable(p, token);\r\n\r\n            break;\r\n\r\n        default:\r\n            tokenInTable(p, token);\r\n    }\r\n\r\n}\r\n\r\nfunction endTagInTable(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.TABLE) {\r\n        if (p.openElements.hasInTableScope($.TABLE)) {\r\n            p.openElements.popUntilTagNamePopped($.TABLE);\r\n            p._resetInsertionMode();\r\n        }\r\n\r\n        else\r\n            token.ignored = true;\r\n    }\r\n\r\n    else if (tn === $.TEMPLATE)\r\n        endTagInHead(p, token);\r\n\r\n    else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML &&\r\n             tn !== $.TBODY && tn !== $.TD && tn !== $.TFOOT && tn !== $.TH && tn !== $.THEAD && tn !== $.TR) {\r\n        tokenInTable(p, token);\r\n    }\r\n}\r\n\r\nfunction tokenInTable(p, token) {\r\n    var savedFosterParentingState = p.fosterParentingEnabled;\r\n\r\n    p.fosterParentingEnabled = true;\r\n    p._processTokenInBodyMode(token);\r\n    p.fosterParentingEnabled = savedFosterParentingState;\r\n}\r\n\r\n\r\n//12.2.5.4.10 The \"in table text\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction whitespaceCharacterInTableText(p, token) {\r\n    p.pendingCharacterTokens.push(token);\r\n}\r\n\r\nfunction characterInTableText(p, token) {\r\n    p.pendingCharacterTokens.push(token);\r\n    p.hasNonWhitespacePendingCharacterToken = true;\r\n}\r\n\r\nfunction tokenInTableText(p, token) {\r\n    if (p.hasNonWhitespacePendingCharacterToken) {\r\n        for (var i = 0; i < p.pendingCharacterTokens.length; i++)\r\n            tokenInTable(p, p.pendingCharacterTokens[i]);\r\n    }\r\n\r\n    else {\r\n        for (var i = 0; i < p.pendingCharacterTokens.length; i++)\r\n            p._insertCharacters(p.pendingCharacterTokens[i]);\r\n    }\r\n\r\n    p.insertionMode = p.originalInsertionMode;\r\n    p._processToken(token);\r\n}\r\n\r\n\r\n//12.2.5.4.11 The \"in caption\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagInCaption(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY ||\r\n        tn === $.TD || tn === $.TFOOT || tn === $.TH || tn === $.THEAD || tn === $.TR) {\r\n        var fakeToken = p._processFakeEndTag($.CAPTION);\r\n\r\n        //NOTE: The fake end tag token here can only be ignored in the fragment case.\r\n        if (!fakeToken.ignored)\r\n            p._processToken(token);\r\n    }\r\n\r\n    else\r\n        startTagInBody(p, token);\r\n}\r\n\r\nfunction endTagInCaption(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.CAPTION) {\r\n        if (p.openElements.hasInTableScope($.CAPTION)) {\r\n            p.openElements.generateImpliedEndTags();\r\n            p.openElements.popUntilTagNamePopped($.CAPTION);\r\n            p.activeFormattingElements.clearToLastMarker();\r\n            p.insertionMode = IN_TABLE_MODE;\r\n        }\r\n\r\n        else\r\n            token.ignored = true;\r\n    }\r\n\r\n    else if (tn === $.TABLE) {\r\n        var fakeToken = p._processFakeEndTag($.CAPTION);\r\n\r\n        //NOTE: The fake end tag token here can only be ignored in the fragment case.\r\n        if (!fakeToken.ignored)\r\n            p._processToken(token);\r\n    }\r\n\r\n    else if (tn !== $.BODY && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML && tn !== $.TBODY &&\r\n             tn !== $.TD && tn !== $.TFOOT && tn !== $.TH && tn !== $.THEAD && tn !== $.TR) {\r\n        endTagInBody(p, token);\r\n    }\r\n}\r\n\r\n\r\n//12.2.5.4.12 The \"in column group\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagInColumnGroup(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.HTML)\r\n        startTagInBody(p, token);\r\n\r\n    else if (tn === $.COL)\r\n        p._appendElement(token, NS.HTML);\r\n\r\n    else if (tn === $.TEMPLATE)\r\n        startTagInHead(p, token);\r\n\r\n    else\r\n        tokenInColumnGroup(p, token);\r\n}\r\n\r\nfunction endTagInColumnGroup(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.COLGROUP) {\r\n        if (p.openElements.currentTagName !== $.COLGROUP)\r\n            token.ignored = true;\r\n\r\n        else {\r\n            p.openElements.pop();\r\n            p.insertionMode = IN_TABLE_MODE;\r\n        }\r\n    }\r\n\r\n    else if (tn === $.TEMPLATE)\r\n        endTagInHead(p, token);\r\n\r\n    else if (tn !== $.COL)\r\n        tokenInColumnGroup(p, token);\r\n}\r\n\r\nfunction tokenInColumnGroup(p, token) {\r\n    var fakeToken = p._processFakeEndTag($.COLGROUP);\r\n\r\n    //NOTE: The fake end tag token here can only be ignored in the fragment case.\r\n    if (!fakeToken.ignored)\r\n        p._processToken(token);\r\n}\r\n\r\n//12.2.5.4.13 The \"in table body\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagInTableBody(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.TR) {\r\n        p.openElements.clearBackToTableBodyContext();\r\n        p._insertElement(token, NS.HTML);\r\n        p.insertionMode = IN_ROW_MODE;\r\n    }\r\n\r\n    else if (tn === $.TH || tn === $.TD) {\r\n        p._processFakeStartTag($.TR);\r\n        p._processToken(token);\r\n    }\r\n\r\n    else if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP ||\r\n             tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\r\n\r\n        if (p.openElements.hasTableBodyContextInTableScope()) {\r\n            p.openElements.clearBackToTableBodyContext();\r\n            p._processFakeEndTag(p.openElements.currentTagName);\r\n            p._processToken(token);\r\n        }\r\n    }\r\n\r\n    else\r\n        startTagInTable(p, token);\r\n}\r\n\r\nfunction endTagInTableBody(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\r\n        if (p.openElements.hasInTableScope(tn)) {\r\n            p.openElements.clearBackToTableBodyContext();\r\n            p.openElements.pop();\r\n            p.insertionMode = IN_TABLE_MODE;\r\n        }\r\n    }\r\n\r\n    else if (tn === $.TABLE) {\r\n        if (p.openElements.hasTableBodyContextInTableScope()) {\r\n            p.openElements.clearBackToTableBodyContext();\r\n            p._processFakeEndTag(p.openElements.currentTagName);\r\n            p._processToken(token);\r\n        }\r\n    }\r\n\r\n    else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP ||\r\n             tn !== $.HTML && tn !== $.TD && tn !== $.TH && tn !== $.TR) {\r\n        endTagInTable(p, token);\r\n    }\r\n}\r\n\r\n//12.2.5.4.14 The \"in row\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagInRow(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.TH || tn === $.TD) {\r\n        p.openElements.clearBackToTableRowContext();\r\n        p._insertElement(token, NS.HTML);\r\n        p.insertionMode = IN_CELL_MODE;\r\n        p.activeFormattingElements.insertMarker();\r\n    }\r\n\r\n    else if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY ||\r\n             tn === $.TFOOT || tn === $.THEAD || tn === $.TR) {\r\n        var fakeToken = p._processFakeEndTag($.TR);\r\n\r\n        //NOTE: The fake end tag token here can only be ignored in the fragment case.\r\n        if (!fakeToken.ignored)\r\n            p._processToken(token);\r\n    }\r\n\r\n    else\r\n        startTagInTable(p, token);\r\n}\r\n\r\nfunction endTagInRow(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.TR) {\r\n        if (p.openElements.hasInTableScope($.TR)) {\r\n            p.openElements.clearBackToTableRowContext();\r\n            p.openElements.pop();\r\n            p.insertionMode = IN_TABLE_BODY_MODE;\r\n        }\r\n\r\n        else\r\n            token.ignored = true;\r\n    }\r\n\r\n    else if (tn === $.TABLE) {\r\n        var fakeToken = p._processFakeEndTag($.TR);\r\n\r\n        //NOTE: The fake end tag token here can only be ignored in the fragment case.\r\n        if (!fakeToken.ignored)\r\n            p._processToken(token);\r\n    }\r\n\r\n    else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\r\n        if (p.openElements.hasInTableScope(tn)) {\r\n            p._processFakeEndTag($.TR);\r\n            p._processToken(token);\r\n        }\r\n    }\r\n\r\n    else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP ||\r\n             tn !== $.HTML && tn !== $.TD && tn !== $.TH) {\r\n        endTagInTable(p, token);\r\n    }\r\n}\r\n\r\n\r\n//12.2.5.4.15 The \"in cell\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagInCell(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY ||\r\n        tn === $.TD || tn === $.TFOOT || tn === $.TH || tn === $.THEAD || tn === $.TR) {\r\n\r\n        if (p.openElements.hasInTableScope($.TD) || p.openElements.hasInTableScope($.TH)) {\r\n            p._closeTableCell();\r\n            p._processToken(token);\r\n        }\r\n    }\r\n\r\n    else\r\n        startTagInBody(p, token);\r\n}\r\n\r\nfunction endTagInCell(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.TD || tn === $.TH) {\r\n        if (p.openElements.hasInTableScope(tn)) {\r\n            p.openElements.generateImpliedEndTags();\r\n            p.openElements.popUntilTagNamePopped(tn);\r\n            p.activeFormattingElements.clearToLastMarker();\r\n            p.insertionMode = IN_ROW_MODE;\r\n        }\r\n    }\r\n\r\n    else if (tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR) {\r\n        if (p.openElements.hasInTableScope(tn)) {\r\n            p._closeTableCell();\r\n            p._processToken(token);\r\n        }\r\n    }\r\n\r\n    else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML)\r\n        endTagInBody(p, token);\r\n}\r\n\r\n//12.2.5.4.16 The \"in select\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagInSelect(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.HTML)\r\n        startTagInBody(p, token);\r\n\r\n    else if (tn === $.OPTION) {\r\n        if (p.openElements.currentTagName === $.OPTION)\r\n            p._processFakeEndTag($.OPTION);\r\n\r\n        p._insertElement(token, NS.HTML);\r\n    }\r\n\r\n    else if (tn === $.OPTGROUP) {\r\n        if (p.openElements.currentTagName === $.OPTION)\r\n            p._processFakeEndTag($.OPTION);\r\n\r\n        if (p.openElements.currentTagName === $.OPTGROUP)\r\n            p._processFakeEndTag($.OPTGROUP);\r\n\r\n        p._insertElement(token, NS.HTML);\r\n    }\r\n\r\n    else if (tn === $.SELECT)\r\n        p._processFakeEndTag($.SELECT);\r\n\r\n    else if (tn === $.INPUT || tn === $.KEYGEN || tn === $.TEXTAREA) {\r\n        if (p.openElements.hasInSelectScope($.SELECT)) {\r\n            p._processFakeEndTag($.SELECT);\r\n            p._processToken(token);\r\n        }\r\n    }\r\n\r\n    else if (tn === $.SCRIPT || tn === $.TEMPLATE)\r\n        startTagInHead(p, token);\r\n}\r\n\r\nfunction endTagInSelect(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.OPTGROUP) {\r\n        var prevOpenElement = p.openElements.items[p.openElements.stackTop - 1],\r\n            prevOpenElementTn = prevOpenElement && p.treeAdapter.getTagName(prevOpenElement);\r\n\r\n        if (p.openElements.currentTagName === $.OPTION && prevOpenElementTn === $.OPTGROUP)\r\n            p._processFakeEndTag($.OPTION);\r\n\r\n        if (p.openElements.currentTagName === $.OPTGROUP)\r\n            p.openElements.pop();\r\n    }\r\n\r\n    else if (tn === $.OPTION) {\r\n        if (p.openElements.currentTagName === $.OPTION)\r\n            p.openElements.pop();\r\n    }\r\n\r\n    else if (tn === $.SELECT && p.openElements.hasInSelectScope($.SELECT)) {\r\n        p.openElements.popUntilTagNamePopped($.SELECT);\r\n        p._resetInsertionMode();\r\n    }\r\n\r\n    else if (tn === $.TEMPLATE)\r\n        endTagInHead(p, token);\r\n}\r\n\r\n//12.2.5.4.17 The \"in select in table\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagInSelectInTable(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.CAPTION || tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT ||\r\n        tn === $.THEAD || tn === $.TR || tn === $.TD || tn === $.TH) {\r\n        p._processFakeEndTag($.SELECT);\r\n        p._processToken(token);\r\n    }\r\n\r\n    else\r\n        startTagInSelect(p, token);\r\n}\r\n\r\nfunction endTagInSelectInTable(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.CAPTION || tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT ||\r\n        tn === $.THEAD || tn === $.TR || tn === $.TD || tn === $.TH) {\r\n        if (p.openElements.hasInTableScope(tn)) {\r\n            p._processFakeEndTag($.SELECT);\r\n            p._processToken(token);\r\n        }\r\n    }\r\n\r\n    else\r\n        endTagInSelect(p, token);\r\n}\r\n\r\n//12.2.5.4.18 The \"in template\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagInTemplate(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META ||\r\n        tn === $.NOFRAMES || tn === $.SCRIPT || tn === $.STYLE || tn === $.TEMPLATE || tn === $.TITLE) {\r\n        startTagInHead(p, token);\r\n    }\r\n\r\n    else {\r\n        var newInsertionMode = TEMPLATE_INSERTION_MODE_SWITCH_MAP[tn] || IN_BODY_MODE;\r\n\r\n        p._popTmplInsertionMode();\r\n        p._pushTmplInsertionMode(newInsertionMode);\r\n        p.insertionMode = newInsertionMode;\r\n        p._processToken(token);\r\n    }\r\n}\r\n\r\nfunction endTagInTemplate(p, token) {\r\n    if (token.tagName === $.TEMPLATE)\r\n        endTagInHead(p, token);\r\n}\r\n\r\nfunction eofInTemplate(p, token) {\r\n    if (p.openElements.tmplCount > 0) {\r\n        p.openElements.popUntilTemplatePopped();\r\n        p.activeFormattingElements.clearToLastMarker();\r\n        p._popTmplInsertionMode();\r\n        p._resetInsertionMode();\r\n        p._processToken(token);\r\n    }\r\n\r\n    else\r\n        p.stopped = true;\r\n}\r\n\r\n\r\n//12.2.5.4.19 The \"after body\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagAfterBody(p, token) {\r\n    if (token.tagName === $.HTML)\r\n        startTagInBody(p, token);\r\n\r\n    else\r\n        tokenAfterBody(p, token);\r\n}\r\n\r\nfunction endTagAfterBody(p, token) {\r\n    if (token.tagName === $.HTML) {\r\n        if (!p.fragmentContext)\r\n            p.insertionMode = AFTER_AFTER_BODY_MODE;\r\n    }\r\n\r\n    else\r\n        tokenAfterBody(p, token);\r\n}\r\n\r\nfunction tokenAfterBody(p, token) {\r\n    p.insertionMode = IN_BODY_MODE;\r\n    p._processToken(token);\r\n}\r\n\r\n//12.2.5.4.20 The \"in frameset\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagInFrameset(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.HTML)\r\n        startTagInBody(p, token);\r\n\r\n    else if (tn === $.FRAMESET)\r\n        p._insertElement(token, NS.HTML);\r\n\r\n    else if (tn === $.FRAME)\r\n        p._appendElement(token, NS.HTML);\r\n\r\n    else if (tn === $.NOFRAMES)\r\n        startTagInHead(p, token);\r\n}\r\n\r\nfunction endTagInFrameset(p, token) {\r\n    if (token.tagName === $.FRAMESET && !p.openElements.isRootHtmlElementCurrent()) {\r\n        p.openElements.pop();\r\n\r\n        if (!p.fragmentContext && p.openElements.currentTagName !== $.FRAMESET)\r\n            p.insertionMode = AFTER_FRAMESET_MODE;\r\n    }\r\n}\r\n\r\n//12.2.5.4.21 The \"after frameset\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagAfterFrameset(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.HTML)\r\n        startTagInBody(p, token);\r\n\r\n    else if (tn === $.NOFRAMES)\r\n        startTagInHead(p, token);\r\n}\r\n\r\nfunction endTagAfterFrameset(p, token) {\r\n    if (token.tagName === $.HTML)\r\n        p.insertionMode = AFTER_AFTER_FRAMESET_MODE;\r\n}\r\n\r\n//12.2.5.4.22 The \"after after body\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagAfterAfterBody(p, token) {\r\n    if (token.tagName === $.HTML)\r\n        startTagInBody(p, token);\r\n\r\n    else\r\n        tokenAfterAfterBody(p, token);\r\n}\r\n\r\nfunction tokenAfterAfterBody(p, token) {\r\n    p.insertionMode = IN_BODY_MODE;\r\n    p._processToken(token);\r\n}\r\n\r\n//12.2.5.4.23 The \"after after frameset\" insertion mode\r\n//------------------------------------------------------------------\r\nfunction startTagAfterAfterFrameset(p, token) {\r\n    var tn = token.tagName;\r\n\r\n    if (tn === $.HTML)\r\n        startTagInBody(p, token);\r\n\r\n    else if (tn === $.NOFRAMES)\r\n        startTagInHead(p, token);\r\n}\r\n\r\n\r\n//12.2.5.5 The rules for parsing tokens in foreign content\r\n//------------------------------------------------------------------\r\nfunction nullCharacterInForeignContent(p, token) {\r\n    token.chars = UNICODE.REPLACEMENT_CHARACTER;\r\n    p._insertCharacters(token);\r\n}\r\n\r\nfunction characterInForeignContent(p, token) {\r\n    p._insertCharacters(token);\r\n    p.framesetOk = false;\r\n}\r\n\r\nfunction startTagInForeignContent(p, token) {\r\n    if (ForeignContent.causesExit(token) && !p.fragmentContext) {\r\n        while (p.treeAdapter.getNamespaceURI(p.openElements.current) !== NS.HTML &&\r\n               (!p._isMathMLTextIntegrationPoint(p.openElements.current)) &&\r\n               (!p._isHtmlIntegrationPoint(p.openElements.current))) {\r\n            p.openElements.pop();\r\n        }\r\n\r\n        p._processToken(token);\r\n    }\r\n\r\n    else {\r\n        var current = p._getAdjustedCurrentElement(),\r\n            currentNs = p.treeAdapter.getNamespaceURI(current);\r\n\r\n        if (currentNs === NS.MATHML)\r\n            ForeignContent.adjustTokenMathMLAttrs(token);\r\n\r\n        else if (currentNs === NS.SVG) {\r\n            ForeignContent.adjustTokenSVGTagName(token);\r\n            ForeignContent.adjustTokenSVGAttrs(token);\r\n        }\r\n\r\n        ForeignContent.adjustTokenXMLAttrs(token);\r\n\r\n        if (token.selfClosing)\r\n            p._appendElement(token, currentNs);\r\n        else\r\n            p._insertElement(token, currentNs);\r\n    }\r\n}\r\n\r\nfunction endTagInForeignContent(p, token) {\r\n    for (var i = p.openElements.stackTop; i > 0; i--) {\r\n        var element = p.openElements.items[i];\r\n\r\n        if (p.treeAdapter.getNamespaceURI(element) === NS.HTML) {\r\n            p._processToken(token);\r\n            break;\r\n        }\r\n\r\n        if (p.treeAdapter.getTagName(element).toLowerCase() === token.tagName) {\r\n            p.openElements.popUntilElementPopped(element);\r\n            break;\r\n        }\r\n    }\r\n}\r\n"]}