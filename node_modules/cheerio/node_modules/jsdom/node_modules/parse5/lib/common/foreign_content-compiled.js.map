{"version":3,"sources":["foreign_content.js"],"names":[],"mappings":"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","file":"foreign_content-compiled.js","sourcesContent":["'use strict';\r\n\r\nvar Tokenizer = require('../tokenization/tokenizer'),\r\n    HTML = require('./html');\r\n\r\n//Aliases\r\nvar $ = HTML.TAG_NAMES,\r\n    NS = HTML.NAMESPACES,\r\n    ATTRS = HTML.ATTRS;\r\n\r\n\r\n//MIME types\r\nvar MIME_TYPES = {\r\n    TEXT_HTML: 'text/html',\r\n    APPLICATION_XML: 'application/xhtml+xml'\r\n};\r\n\r\n//Attributes\r\nvar DEFINITION_URL_ATTR = 'definitionurl',\r\n    ADJUSTED_DEFINITION_URL_ATTR = 'definitionURL',\r\n    SVG_ATTRS_ADJUSTMENT_MAP = {\r\n        'attributename': 'attributeName',\r\n        'attributetype': 'attributeType',\r\n        'basefrequency': 'baseFrequency',\r\n        'baseprofile': 'baseProfile',\r\n        'calcmode': 'calcMode',\r\n        'clippathunits': 'clipPathUnits',\r\n        'contentscripttype': 'contentScriptType',\r\n        'contentstyletype': 'contentStyleType',\r\n        'diffuseconstant': 'diffuseConstant',\r\n        'edgemode': 'edgeMode',\r\n        'externalresourcesrequired': 'externalResourcesRequired',\r\n        'filterres': 'filterRes',\r\n        'filterunits': 'filterUnits',\r\n        'glyphref': 'glyphRef',\r\n        'gradienttransform': 'gradientTransform',\r\n        'gradientunits': 'gradientUnits',\r\n        'kernelmatrix': 'kernelMatrix',\r\n        'kernelunitlength': 'kernelUnitLength',\r\n        'keypoints': 'keyPoints',\r\n        'keysplines': 'keySplines',\r\n        'keytimes': 'keyTimes',\r\n        'lengthadjust': 'lengthAdjust',\r\n        'limitingconeangle': 'limitingConeAngle',\r\n        'markerheight': 'markerHeight',\r\n        'markerunits': 'markerUnits',\r\n        'markerwidth': 'markerWidth',\r\n        'maskcontentunits': 'maskContentUnits',\r\n        'maskunits': 'maskUnits',\r\n        'numoctaves': 'numOctaves',\r\n        'pathlength': 'pathLength',\r\n        'patterncontentunits': 'patternContentUnits',\r\n        'patterntransform': 'patternTransform',\r\n        'patternunits': 'patternUnits',\r\n        'pointsatx': 'pointsAtX',\r\n        'pointsaty': 'pointsAtY',\r\n        'pointsatz': 'pointsAtZ',\r\n        'preservealpha': 'preserveAlpha',\r\n        'preserveaspectratio': 'preserveAspectRatio',\r\n        'primitiveunits': 'primitiveUnits',\r\n        'refx': 'refX',\r\n        'refy': 'refY',\r\n        'repeatcount': 'repeatCount',\r\n        'repeatdur': 'repeatDur',\r\n        'requiredextensions': 'requiredExtensions',\r\n        'requiredfeatures': 'requiredFeatures',\r\n        'specularconstant': 'specularConstant',\r\n        'specularexponent': 'specularExponent',\r\n        'spreadmethod': 'spreadMethod',\r\n        'startoffset': 'startOffset',\r\n        'stddeviation': 'stdDeviation',\r\n        'stitchtiles': 'stitchTiles',\r\n        'surfacescale': 'surfaceScale',\r\n        'systemlanguage': 'systemLanguage',\r\n        'tablevalues': 'tableValues',\r\n        'targetx': 'targetX',\r\n        'targety': 'targetY',\r\n        'textlength': 'textLength',\r\n        'viewbox': 'viewBox',\r\n        'viewtarget': 'viewTarget',\r\n        'xchannelselector': 'xChannelSelector',\r\n        'ychannelselector': 'yChannelSelector',\r\n        'zoomandpan': 'zoomAndPan'\r\n    },\r\n    XML_ATTRS_ADJUSTMENT_MAP = {\r\n        'xlink:actuate': {prefix: 'xlink', name: 'actuate', namespace: NS.XLINK},\r\n        'xlink:arcrole': {prefix: 'xlink', name: 'arcrole', namespace: NS.XLINK},\r\n        'xlink:href': {prefix: 'xlink', name: 'href', namespace: NS.XLINK},\r\n        'xlink:role': {prefix: 'xlink', name: 'role', namespace: NS.XLINK},\r\n        'xlink:show': {prefix: 'xlink', name: 'show', namespace: NS.XLINK},\r\n        'xlink:title': {prefix: 'xlink', name: 'title', namespace: NS.XLINK},\r\n        'xlink:type': {prefix: 'xlink', name: 'type', namespace: NS.XLINK},\r\n        'xml:base': {prefix: 'xml', name: 'base', namespace: NS.XML},\r\n        'xml:lang': {prefix: 'xml', name: 'lang', namespace: NS.XML},\r\n        'xml:space': {prefix: 'xml', name: 'space', namespace: NS.XML},\r\n        'xmlns': {prefix: '', name: 'xmlns', namespace: NS.XMLNS},\r\n        'xmlns:xlink': {prefix: 'xmlns', name: 'xlink', namespace: NS.XMLNS}\r\n\r\n    };\r\n\r\n//SVG tag names adjustment map\r\nvar SVG_TAG_NAMES_ADJUSTMENT_MAP = {\r\n    'altglyph': 'altGlyph',\r\n    'altglyphdef': 'altGlyphDef',\r\n    'altglyphitem': 'altGlyphItem',\r\n    'animatecolor': 'animateColor',\r\n    'animatemotion': 'animateMotion',\r\n    'animatetransform': 'animateTransform',\r\n    'clippath': 'clipPath',\r\n    'feblend': 'feBlend',\r\n    'fecolormatrix': 'feColorMatrix',\r\n    'fecomponenttransfer': 'feComponentTransfer',\r\n    'fecomposite': 'feComposite',\r\n    'feconvolvematrix': 'feConvolveMatrix',\r\n    'fediffuselighting': 'feDiffuseLighting',\r\n    'fedisplacementmap': 'feDisplacementMap',\r\n    'fedistantlight': 'feDistantLight',\r\n    'feflood': 'feFlood',\r\n    'fefunca': 'feFuncA',\r\n    'fefuncb': 'feFuncB',\r\n    'fefuncg': 'feFuncG',\r\n    'fefuncr': 'feFuncR',\r\n    'fegaussianblur': 'feGaussianBlur',\r\n    'feimage': 'feImage',\r\n    'femerge': 'feMerge',\r\n    'femergenode': 'feMergeNode',\r\n    'femorphology': 'feMorphology',\r\n    'feoffset': 'feOffset',\r\n    'fepointlight': 'fePointLight',\r\n    'fespecularlighting': 'feSpecularLighting',\r\n    'fespotlight': 'feSpotLight',\r\n    'fetile': 'feTile',\r\n    'feturbulence': 'feTurbulence',\r\n    'foreignobject': 'foreignObject',\r\n    'glyphref': 'glyphRef',\r\n    'lineargradient': 'linearGradient',\r\n    'radialgradient': 'radialGradient',\r\n    'textpath': 'textPath'\r\n};\r\n\r\n//Tags that causes exit from foreign content\r\nvar EXITS_FOREIGN_CONTENT = {};\r\n\r\nEXITS_FOREIGN_CONTENT[$.B] = true;\r\nEXITS_FOREIGN_CONTENT[$.BIG] = true;\r\nEXITS_FOREIGN_CONTENT[$.BLOCKQUOTE] = true;\r\nEXITS_FOREIGN_CONTENT[$.BODY] = true;\r\nEXITS_FOREIGN_CONTENT[$.BR] = true;\r\nEXITS_FOREIGN_CONTENT[$.CENTER] = true;\r\nEXITS_FOREIGN_CONTENT[$.CODE] = true;\r\nEXITS_FOREIGN_CONTENT[$.DD] = true;\r\nEXITS_FOREIGN_CONTENT[$.DIV] = true;\r\nEXITS_FOREIGN_CONTENT[$.DL] = true;\r\nEXITS_FOREIGN_CONTENT[$.DT] = true;\r\nEXITS_FOREIGN_CONTENT[$.EM] = true;\r\nEXITS_FOREIGN_CONTENT[$.EMBED] = true;\r\nEXITS_FOREIGN_CONTENT[$.H1] = true;\r\nEXITS_FOREIGN_CONTENT[$.H2] = true;\r\nEXITS_FOREIGN_CONTENT[$.H3] = true;\r\nEXITS_FOREIGN_CONTENT[$.H4] = true;\r\nEXITS_FOREIGN_CONTENT[$.H5] = true;\r\nEXITS_FOREIGN_CONTENT[$.H6] = true;\r\nEXITS_FOREIGN_CONTENT[$.HEAD] = true;\r\nEXITS_FOREIGN_CONTENT[$.HR] = true;\r\nEXITS_FOREIGN_CONTENT[$.I] = true;\r\nEXITS_FOREIGN_CONTENT[$.IMG] = true;\r\nEXITS_FOREIGN_CONTENT[$.LI] = true;\r\nEXITS_FOREIGN_CONTENT[$.LISTING] = true;\r\nEXITS_FOREIGN_CONTENT[$.MENU] = true;\r\nEXITS_FOREIGN_CONTENT[$.META] = true;\r\nEXITS_FOREIGN_CONTENT[$.NOBR] = true;\r\nEXITS_FOREIGN_CONTENT[$.OL] = true;\r\nEXITS_FOREIGN_CONTENT[$.P] = true;\r\nEXITS_FOREIGN_CONTENT[$.PRE] = true;\r\nEXITS_FOREIGN_CONTENT[$.RUBY] = true;\r\nEXITS_FOREIGN_CONTENT[$.S] = true;\r\nEXITS_FOREIGN_CONTENT[$.SMALL] = true;\r\nEXITS_FOREIGN_CONTENT[$.SPAN] = true;\r\nEXITS_FOREIGN_CONTENT[$.STRONG] = true;\r\nEXITS_FOREIGN_CONTENT[$.STRIKE] = true;\r\nEXITS_FOREIGN_CONTENT[$.SUB] = true;\r\nEXITS_FOREIGN_CONTENT[$.SUP] = true;\r\nEXITS_FOREIGN_CONTENT[$.TABLE] = true;\r\nEXITS_FOREIGN_CONTENT[$.TT] = true;\r\nEXITS_FOREIGN_CONTENT[$.U] = true;\r\nEXITS_FOREIGN_CONTENT[$.UL] = true;\r\nEXITS_FOREIGN_CONTENT[$.VAR] = true;\r\n\r\n//Check exit from foreign content\r\nexports.causesExit = function (startTagToken) {\r\n    var tn = startTagToken.tagName;\r\n\r\n    if (tn === $.FONT && (Tokenizer.getTokenAttr(startTagToken, ATTRS.COLOR) !== null ||\r\n        Tokenizer.getTokenAttr(startTagToken, ATTRS.SIZE) !== null ||\r\n        Tokenizer.getTokenAttr(startTagToken, ATTRS.FACE) !== null)) {\r\n        return true;\r\n    }\r\n\r\n    return EXITS_FOREIGN_CONTENT[tn];\r\n};\r\n\r\n//Token adjustments\r\nexports.adjustTokenMathMLAttrs = function (token) {\r\n    for (var i = 0; i < token.attrs.length; i++) {\r\n        if (token.attrs[i].name === DEFINITION_URL_ATTR) {\r\n            token.attrs[i].name = ADJUSTED_DEFINITION_URL_ATTR;\r\n            break;\r\n        }\r\n    }\r\n};\r\n\r\nexports.adjustTokenSVGAttrs = function (token) {\r\n    for (var i = 0; i < token.attrs.length; i++) {\r\n        var adjustedAttrName = SVG_ATTRS_ADJUSTMENT_MAP[token.attrs[i].name];\r\n\r\n        if (adjustedAttrName)\r\n            token.attrs[i].name = adjustedAttrName;\r\n    }\r\n};\r\n\r\nexports.adjustTokenXMLAttrs = function (token) {\r\n    for (var i = 0; i < token.attrs.length; i++) {\r\n        var adjustedAttrEntry = XML_ATTRS_ADJUSTMENT_MAP[token.attrs[i].name];\r\n\r\n        if (adjustedAttrEntry) {\r\n            token.attrs[i].prefix = adjustedAttrEntry.prefix;\r\n            token.attrs[i].name = adjustedAttrEntry.name;\r\n            token.attrs[i].namespace = adjustedAttrEntry.namespace;\r\n        }\r\n    }\r\n};\r\n\r\nexports.adjustTokenSVGTagName = function (token) {\r\n    var adjustedTagName = SVG_TAG_NAMES_ADJUSTMENT_MAP[token.tagName];\r\n\r\n    if (adjustedTagName)\r\n        token.tagName = adjustedTagName;\r\n};\r\n\r\n//Integration points\r\nexports.isMathMLTextIntegrationPoint = function (tn, ns) {\r\n    return ns === NS.MATHML && (tn === $.MI || tn === $.MO || tn === $.MN || tn === $.MS || tn === $.MTEXT);\r\n};\r\n\r\nexports.isHtmlIntegrationPoint = function (tn, ns, attrs) {\r\n    if (ns === NS.MATHML && tn === $.ANNOTATION_XML) {\r\n        for (var i = 0; i < attrs.length; i++) {\r\n            if (attrs[i].name === ATTRS.ENCODING) {\r\n                var value = attrs[i].value.toLowerCase();\r\n\r\n                return value === MIME_TYPES.TEXT_HTML || value === MIME_TYPES.APPLICATION_XML;\r\n            }\r\n        }\r\n    }\r\n\r\n    return ns === NS.SVG && (tn === $.FOREIGN_OBJECT || tn === $.DESC || tn === $.TITLE);\r\n};\r\n"]}