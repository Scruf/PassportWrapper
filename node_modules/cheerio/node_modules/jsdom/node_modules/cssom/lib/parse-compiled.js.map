{"version":3,"sources":["parse.js"],"names":[],"mappings":";AACA,IAAI,QAAQ,EAAR;;;;;;AAOJ,MAAM,KAAN,GAAc,SAAS,KAAT,CAAe,KAAf,EAAsB;;AAEnC,KAAI,IAAI,CAAJ;;;;;;;;;;;;AAF+B,KAc/B,QAAQ,iBAAR,CAd+B;;AAgBnC,KAAI,KAAJ,CAhBmC;AAiBnC,KAAI,SAAS,EAAT,CAjB+B;;AAmBnC,KAAI,yBAAyB;AAC5B,cAAY,IAAZ;AACA,WAAS,IAAT;AACA,YAAU,IAAV;AACA,sBAAoB,IAApB;AACA,gBAAc,IAAd;AACA,aAAW,IAAX;AACA,wBAAsB,IAAtB;EAPG,CAnB+B;;AA6BnC,KAAI,aAAa,IAAI,MAAM,aAAN,EAAjB;;;AA7B+B,KAgC/B,eAAe,UAAf;;;AAhC+B,KAmC/B,UAAJ,CAnCmC;;AAqCnC,KAAI,IAAJ;KAAU,WAAS,EAAT;KAAa,SAAvB;KAAkC,SAAlC;KAA6C,UAA7C;KAAyD,YAAzD;KAAuE,aAAvE;KAAsF,YAAtF,CArCmC;;AAuCnC,KAAI,oBAAoB,0BAApB,CAvC+B;;AAyCnC,KAAI,aAAa,UAAS,OAAT,EAAkB;AAClC,MAAI,QAAQ,MAAM,SAAN,CAAgB,CAAhB,EAAmB,CAAnB,EAAsB,KAAtB,CAA4B,IAA5B,CAAR,CAD8B;AAElC,MAAI,YAAY,MAAM,MAAN,CAFkB;AAGlC,MAAI,YAAY,MAAM,GAAN,GAAY,MAAZ,GAAqB,CAArB,CAHkB;AAIlC,MAAI,QAAQ,IAAI,KAAJ,CAAU,UAAU,SAAV,GAAsB,SAAtB,GAAkC,SAAlC,GAA8C,SAA9C,GAA0D,GAA1D,CAAlB,CAJ8B;AAKlC,QAAM,IAAN,GAAa,SAAb;;AALkC,OAOlC,CAAM,MAAN,IAAgB,SAAhB,CAPkC;AAQlC,QAAM,UAAN,GAAmB,UAAnB,CARkC;AASlC,QAAM,KAAN,CATkC;EAAlB,CAzCkB;;AAqDnC,MAAK,IAAI,SAAJ,EAAgB,YAAY,MAAM,MAAN,CAAa,CAAb,CAAZ,EAA8B,GAAnD,EAAwD;;AAEvD,UAAQ,SAAR;;AAEA,QAAK,GAAL,CAFA;AAGA,QAAK,IAAL,CAHA;AAIA,QAAK,IAAL,CAJA;AAKA,QAAK,IAAL,CALA;AAMA,QAAK,IAAL;AACC,QAAI,uBAAuB,KAAvB,CAAJ,EAAmC;AAClC,eAAU,SAAV,CADkC;KAAnC;AAGA,UAJD;;;AANA,QAaK,GAAL;AACC,YAAQ,IAAI,CAAJ,CADT;AAEC,OAAG;AACF,aAAQ,MAAM,OAAN,CAAc,GAAd,EAAmB,KAAnB,IAA4B,CAA5B,CADN;AAEF,SAAI,CAAC,KAAD,EAAQ;AACX,iBAAW,aAAX,EADW;MAAZ;KAFD,QAKS,MAAM,QAAQ,CAAR,CAAN,KAAqB,IAArB,EAPV;AAQC,cAAU,MAAM,KAAN,CAAY,CAAZ,EAAe,KAAf,CAAV,CARD;AASC,QAAI,QAAQ,CAAR,CATL;AAUC,YAAQ,KAAR;AACC,UAAK,cAAL;AACC,cAAQ,OAAR,CADD;AAEC,YAFD;AADD,UAIM,kBAAL;AACC,cAAQ,YAAR,CADD;AAEC,YAFD;AAJD,KAVD;AAkBC,UAlBD;;AAbA,QAiCK,GAAL;AACC,YAAQ,IAAI,CAAJ,CADT;AAEC,OAAG;AACF,aAAQ,MAAM,OAAN,CAAc,GAAd,EAAmB,KAAnB,IAA4B,CAA5B,CADN;AAEF,SAAI,CAAC,KAAD,EAAQ;AACX,iBAAW,aAAX,EADW;MAAZ;KAFD,QAKS,MAAM,QAAQ,CAAR,CAAN,KAAqB,IAArB,EAPV;AAQC,cAAU,MAAM,KAAN,CAAY,CAAZ,EAAe,KAAf,CAAV,CARD;AASC,QAAI,QAAQ,CAAR,CATL;AAUC,YAAQ,KAAR;AACC,UAAK,cAAL;AACC,cAAQ,OAAR,CADD;AAEC,YAFD;AADD,UAIM,kBAAL;AACC,cAAQ,YAAR,CADD;AAEC,YAFD;AAJD,KAVD;AAkBC,UAlBD;;;AAjCA,QAsDK,GAAL;AACC,QAAI,MAAM,MAAN,CAAa,IAAI,CAAJ,CAAb,KAAwB,GAAxB,EAA6B;AAChC,UAAK,CAAL,CADgC;AAEhC,aAAQ,MAAM,OAAN,CAAc,IAAd,EAAoB,CAApB,CAAR,CAFgC;AAGhC,SAAI,UAAU,CAAC,CAAD,EAAI;AACjB,iBAAW,YAAX,EADiB;MAAlB,MAEO;AACN,UAAI,QAAQ,CAAR,CADE;MAFP;KAHD,MAQO;AACN,eAAU,SAAV,CADM;KARP;AAWA,QAAI,UAAU,kBAAV,EAA8B;AACjC,eAAU,GAAV,CADiC;AAEjC,aAAQ,YAAR,CAFiC;KAAlC;AAIA,UAhBD;;;AAtDA,QAyEK,GAAL;AACC,QAAI,MAAM,OAAN,CAAc,gBAAd,EAAgC,CAAhC,MAAuC,CAAvC,EAA0C;AAC7C,aAAQ,oBAAR,CAD6C;AAE7C,oBAAe,IAAI,MAAM,eAAN,EAAnB,CAF6C;AAG7C,kBAAa,QAAb,GAAwB,CAAxB,CAH6C;AAI7C,UAAK,gBAAgB,MAAhB,CAJwC;AAK7C,cAAS,EAAT,CAL6C;AAM7C,WAN6C;KAA9C,MAOO,IAAI,MAAM,OAAN,CAAc,QAAd,EAAwB,CAAxB,MAA+B,CAA/B,EAAkC;AAC5C,aAAQ,SAAR,CAD4C;AAE5C,iBAAY,IAAI,MAAM,YAAN,EAAhB,CAF4C;AAG5C,eAAU,QAAV,GAAqB,CAArB,CAH4C;AAI5C,UAAK,QAAQ,MAAR,CAJuC;AAK5C,cAAS,EAAT,CAL4C;AAM5C,WAN4C;KAAtC,MAOA,IAAI,MAAM,OAAN,CAAc,SAAd,EAAyB,CAAzB,MAAgC,CAAhC,EAAmC;AAC7C,aAAQ,kBAAR,CAD6C;AAE7C,UAAK,SAAS,MAAT,CAFwC;AAG7C,eAAU,SAAV,CAH6C;AAI7C,WAJ6C;KAAvC,MAKA,IAAI,MAAM,OAAN,CAAc,YAAd,EAA4B,CAA5B,MAAmC,CAAnC,EAAsC;AAChD,aAAQ,oBAAR,CADgD;AAEhD,UAAK,YAAY,MAAZ,CAF2C;AAGhD,oBAAe,IAAI,MAAM,eAAN,EAAnB,CAHgD;AAIhD,kBAAa,QAAb,GAAwB,CAAxB,CAJgD;AAKhD,cAAS,EAAT,CALgD;AAMhD,WANgD;KAA1C,MAOA;AACN,uBAAkB,SAAlB,GAA8B,CAA9B,CADM;AAEN,SAAI,iBAAiB,kBAAkB,IAAlB,CAAuB,KAAvB,CAAjB,CAFE;AAGN,SAAI,kBAAkB,eAAe,KAAf,KAAyB,CAAzB,EAA4B;AACjD,cAAQ,qBAAR,CADiD;AAEjD,sBAAgB,IAAI,MAAM,gBAAN,EAApB,CAFiD;AAGjD,oBAAc,QAAd,GAAyB,CAAzB,CAHiD;AAIjD,oBAAc,aAAd,GAA8B,eAAe,CAAf,CAA9B;AAJiD,OAKjD,IAAK,eAAe,CAAf,EAAkB,MAAlB,GAA2B,CAA3B,CAL4C;AAMjD,eAAS,EAAT,CANiD;AAOjD,YAPiD;MAAlD,MAQO,IAAI,UAAU,UAAV,EAAsB;AAChC,cAAQ,QAAR,CADgC;MAA1B;KAlBD;AAsBP,cAAU,SAAV,CA1CD;AA2CC,UA3CD;;AAzEA,QAsHK,GAAL;AACC,QAAI,UAAU,UAAV,IAAwB,UAAU,QAAV,EAAoB;AAC/C,eAAU,YAAV,GAAyB,OAAO,IAAP,EAAzB,CAD+C;AAE/C,eAAU,KAAV,CAAgB,QAAhB,GAA2B,CAA3B,CAF+C;AAG/C,cAAS,EAAT,CAH+C;AAI/C,aAAQ,aAAR,CAJ+C;KAAhD,MAKO,IAAI,UAAU,SAAV,EAAqB;AAC/B,eAAU,KAAV,CAAgB,SAAhB,GAA4B,OAAO,IAAP,EAA5B,CAD+B;AAE/B,oBAAe,aAAa,SAAb,CAFgB;AAG/B,eAAU,gBAAV,GAA6B,UAA7B,CAH+B;AAI/B,cAAS,EAAT,CAJ+B;AAK/B,aAAQ,iBAAR,CAL+B;KAAzB,MAMA,IAAI,UAAU,oBAAV,EAAgC;AAC1C,SAAI,UAAJ,EAAgB;AACf,mBAAa,UAAb,GAA0B,UAA1B,CADe;MAAhB;AAGA,kBAAa,gBAAb,GAAgC,UAAhC,CAJ0C;AAK1C,iBAAY,YAAZ,CAL0C;AAM1C,cAAS,EAAT,CAN0C;AAO1C,aAAQ,aAAR,CAP0C;KAApC,MAQA,IAAI,UAAU,qBAAV,EAAiC;AAC3C,mBAAc,IAAd,GAAqB,OAAO,IAAP,EAArB,CAD2C;AAE3C,SAAI,UAAJ,EAAgB;AACf,oBAAc,UAAd,GAA2B,UAA3B,CADe;MAAhB;AAGA,mBAAc,gBAAd,GAAiC,UAAjC,CAL2C;AAM3C,oBAAe,aAAa,aAAb,CAN4B;AAO3C,cAAS,EAAT,CAP2C;AAQ3C,aAAQ,oBAAR,CAR2C;KAArC,MASA,IAAI,UAAU,oBAAV,EAAgC;AAC1C,iBAAY,IAAI,MAAM,eAAN,EAAhB,CAD0C;AAE1C,eAAU,OAAV,GAAoB,OAAO,IAAP,EAApB,CAF0C;AAG1C,eAAU,QAAV,GAAqB,CAArB,CAH0C;AAI1C,cAAS,EAAT,CAJ0C;AAK1C,aAAQ,aAAR,CAL0C;KAApC,MAMA,IAAI,UAAU,oBAAV,EAAgC;;AAE1C,kBAAa,OAAb,CAAqB,WAArB,GAAmC,OAAO,IAAP,EAAnC,CAF0C;AAG1C,SAAI,UAAJ,EAAgB;AACf,mBAAa,UAAb,GAA0B,UAA1B,CADe;MAAhB;AAGA,oBAAe,aAAa,YAAb,CAN2B;AAO1C,kBAAa,gBAAb,GAAgC,UAAhC,CAP0C;AAQ1C,cAAS,EAAT,CAR0C;AAS1C,aAAQ,iBAAR,CAT0C;KAApC;AAWP,UA9CD;;AAtHA,QAsKK,GAAL;AACC,QAAI,UAAU,MAAV,EAAkB;AACrB,YAAO,OAAO,IAAP,EAAP,CADqB;AAErB,cAAS,EAAT,CAFqB;AAGrB,aAAQ,cAAR,CAHqB;KAAtB,MAIO;AACN,eAAU,SAAV,CADM;KAJP;AAOA,UARD;;AAtKA,QAgLK,GAAL;AACC,QAAI,UAAU,OAAV,EAAmB;;AAEtB,SAAI,OAAO,IAAP,OAAkB,YAAlB,EAAgC;AACnC,UAAI,OAAO,IAAK,MAAM,kBAAN,CAAyB,KAA7B,EAAoC,CAApC,CAAD,CAAyC,KAAzC,EAAP,CAD+B;;AAGnC,UAAI,KAAK,KAAL,EAAY;AACf,kBAAW,KAAK,KAAL,CAAX,CADe;OAAhB,MAEO;AACN,iBAAU,KAAK,UAAL,CADJ;AAEN,WAAI,KAAK,GAAL,CAFE;OAFP;MAHD,MASO;AACN,cAAQ,mBAAR,CADM;AAEN,gBAAU,SAAV,CAFM;MATP;KAFD,MAeO;AACN,eAAU,SAAV,CADM;KAfP;AAkBA,UAnBD;;AAhLA,QAqMK,GAAL;AACC,QAAI,UAAU,mBAAV,EAA+B;AAClC,aAAQ,OAAR,CADkC;KAAnC;AAGA,cAAU,SAAV,CAJD;AAKC,UALD;;AArMA,QA4MK,GAAL;AACC,QAAI,UAAU,OAAV,IAAqB,MAAM,OAAN,CAAc,YAAd,EAA4B,CAA5B,MAAmC,CAAnC,EAAsC;AAC9D,gBAAW,WAAX,CAD8D;AAE9D,UAAK,YAAY,MAAZ,CAFyD;KAA/D,MAGO;AACN,eAAU,SAAV,CADM;KAHP;AAMA,UAPD;;AA5MA,QAqNK,GAAL;AACC,YAAQ,KAAR;AACC,UAAK,OAAL;AACC,gBAAU,KAAV,CAAgB,WAAhB,CAA4B,IAA5B,EAAkC,OAAO,IAAP,EAAlC,EAAiD,QAAjD,EADD;AAEC,iBAAW,EAAX,CAFD;AAGC,eAAS,EAAT,CAHD;AAIC,cAAQ,aAAR,CAJD;AAKC,YALD;AADD,UAOM,QAAL;AACC,eAAS,EAAT,CADD;AAEC,cAAQ,iBAAR,CAFD;AAGC,YAHD;AAPD,UAWM,YAAL;AACC,mBAAa,IAAI,MAAM,aAAN,EAAjB,CADD;AAEC,iBAAW,gBAAX,GAA8B,WAAW,UAAX,CAAsB,gBAAtB,GAAyC,UAAzC,CAF/B;AAGC,iBAAW,OAAX,GAAqB,SAAS,SAAT,CAHtB;AAIC,iBAAW,QAAX,CAAoB,IAApB,CAAyB,UAAzB,EAJD;AAKC,eAAS,EAAT,CALD;AAMC,cAAQ,iBAAR,CAND;AAOC,YAPD;AAXD;AAoBE,gBAAU,SAAV,CADD;AAEC,YAFD;AAnBD,KADD;AAwBC,UAxBD;;AArNA,QA+OK,GAAL;AACC,YAAQ,KAAR;AACC,UAAK,OAAL;AACC,gBAAU,KAAV,CAAgB,WAAhB,CAA4B,IAA5B,EAAkC,OAAO,IAAP,EAAlC,EAAiD,QAAjD,EADD;AAEC,iBAAW,EAAX,CAFD;;AADD,UAKM,aAAL,CALD;AAMC,UAAK,MAAL;AACC,gBAAU,MAAV,GAAmB,IAAI,CAAJ,CADpB;AAEC,UAAI,UAAJ,EAAgB;AACf,iBAAU,UAAV,GAAuB,UAAvB,CADe;OAAhB;AAGA,gBAAU,gBAAV,GAA6B,UAA7B,CALD;AAMC,mBAAa,QAAb,CAAsB,IAAtB,CAA2B,SAA3B,EAND;AAOC,eAAS,EAAT,CAPD;AAQC,UAAI,aAAa,WAAb,KAA6B,MAAM,gBAAN,EAAwB;AACxD,eAAQ,oBAAR,CADwD;OAAzD,MAEO;AACN,eAAQ,iBAAR,CADM;OAFP;AAKA,YAbD;AAND,UAoBM,oBAAL,CApBD;AAqBC,UAAK,iBAAL,CArBD;AAsBC,UAAK,UAAL;;AAEC,UAAI,CAAC,UAAD,EAAa;AAChB,kBAAW,cAAX,EADgB;OAAjB;AAGA,mBAAa,MAAb,GAAsB,IAAI,CAAJ;;AALvB,gBAOC,CAAW,QAAX,CAAoB,IAApB,CAAyB,YAAzB,EAPD;AAQC,qBAAe,UAAf,CARD;AASC,mBAAa,IAAb,CATD;AAUC,eAAS,EAAT,CAVD;AAWC,cAAQ,iBAAR,CAXD;AAYC,YAZD;AAtBD,KADD;AAqCC,UArCD;;AA/OA;AAuRC,YAAQ,KAAR;AACC,UAAK,iBAAL;AACC,cAAQ,UAAR,CADD;AAEC,kBAAY,IAAI,MAAM,YAAN,EAAhB,CAFD;AAGC,gBAAU,QAAV,GAAqB,CAArB,CAHD;AAIC,YAJD;AADD,UAMM,aAAL;AACC,cAAQ,MAAR,CADD;AAEC,YAFD;AAND,UASM,cAAL;AACC,cAAQ,OAAR,CADD;AAEC,YAFD;AATD,UAYM,kBAAL;AACC,cAAQ,YAAR,CADD;AAEC,YAFD;AAZD,KADD;AAiBC,cAAU,SAAV,CAjBD;AAkBC,UAlBD;AAtRA,GAFuD;EAAxD;;AA8SA,QAAO,UAAP,CAnWmC;CAAtB;;;AAwWd,QAAQ,KAAR,GAAgB,MAAM,KAAN;;AAEhB,MAAM,aAAN,GAAsB,QAAQ,iBAAR,EAA2B,aAA3B;AACtB,MAAM,YAAN,GAAqB,QAAQ,gBAAR,EAA0B,YAA1B;AACrB,MAAM,aAAN,GAAsB,QAAQ,iBAAR,EAA2B,aAA3B;AACtB,MAAM,YAAN,GAAqB,QAAQ,gBAAR,EAA0B,YAA1B;AACrB,MAAM,eAAN,GAAwB,QAAQ,mBAAR,EAA6B,eAA7B;AACxB,MAAM,mBAAN,GAA4B,QAAQ,uBAAR,EAAiC,mBAAjC;AAC5B,MAAM,eAAN,GAAwB,QAAQ,mBAAR,EAA6B,eAA7B;AACxB,MAAM,gBAAN,GAAyB,QAAQ,oBAAR,EAA8B,gBAA9B;AACzB,MAAM,kBAAN,GAA2B,QAAQ,sBAAR,EAAgC,kBAAhC;AAC3B,MAAM,eAAN,GAAwB,QAAQ,mBAAR,EAA6B,eAA7B","file":"parse-compiled.js","sourcesContent":["//.CommonJS\nvar CSSOM = {};\n///CommonJS\n\n\n/**\n * @param {string} token\n */\nCSSOM.parse = function parse(token) {\n\n\tvar i = 0;\n\n\t/**\n\t\t\"before-selector\" or\n\t\t\"selector\" or\n\t\t\"atRule\" or\n\t\t\"atBlock\" or\n\t\t\"before-name\" or\n\t\t\"name\" or\n\t\t\"before-value\" or\n\t\t\"value\"\n\t*/\n\tvar state = \"before-selector\";\n\n\tvar index;\n\tvar buffer = \"\";\n\n\tvar SIGNIFICANT_WHITESPACE = {\n\t\t\"selector\": true,\n\t\t\"value\": true,\n\t\t\"atRule\": true,\n\t\t\"importRule-begin\": true,\n\t\t\"importRule\": true,\n\t\t\"atBlock\": true,\n\t\t'documentRule-begin': true\n\t};\n\n\tvar styleSheet = new CSSOM.CSSStyleSheet();\n\n\t// @type CSSStyleSheet|CSSMediaRule|CSSFontFaceRule|CSSKeyframesRule|CSSDocumentRule\n\tvar currentScope = styleSheet;\n\n\t// @type CSSMediaRule|CSSKeyframesRule|CSSDocumentRule\n\tvar parentRule;\n\n\tvar name, priority=\"\", styleRule, mediaRule, importRule, fontFaceRule, keyframesRule, documentRule;\n\n\tvar atKeyframesRegExp = /@(-(?:\\w+-)+)?keyframes/g;\n\n\tvar parseError = function(message) {\n\t\tvar lines = token.substring(0, i).split('\\n');\n\t\tvar lineCount = lines.length;\n\t\tvar charCount = lines.pop().length + 1;\n\t\tvar error = new Error(message + ' (line ' + lineCount + ', char ' + charCount + ')');\n\t\terror.line = lineCount;\n\t\t/* jshint sub : true */\n\t\terror['char'] = charCount;\n\t\terror.styleSheet = styleSheet;\n\t\tthrow error;\n\t};\n\n\tfor (var character; (character = token.charAt(i)); i++) {\n\n\t\tswitch (character) {\n\n\t\tcase \" \":\n\t\tcase \"\\t\":\n\t\tcase \"\\r\":\n\t\tcase \"\\n\":\n\t\tcase \"\\f\":\n\t\t\tif (SIGNIFICANT_WHITESPACE[state]) {\n\t\t\t\tbuffer += character;\n\t\t\t}\n\t\t\tbreak;\n\n\t\t// String\n\t\tcase '\"':\n\t\t\tindex = i + 1;\n\t\t\tdo {\n\t\t\t\tindex = token.indexOf('\"', index) + 1;\n\t\t\t\tif (!index) {\n\t\t\t\t\tparseError('Unmatched \"');\n\t\t\t\t}\n\t\t\t} while (token[index - 2] === '\\\\');\n\t\t\tbuffer += token.slice(i, index);\n\t\t\ti = index - 1;\n\t\t\tswitch (state) {\n\t\t\t\tcase 'before-value':\n\t\t\t\t\tstate = 'value';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'importRule-begin':\n\t\t\t\t\tstate = 'importRule';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \"'\":\n\t\t\tindex = i + 1;\n\t\t\tdo {\n\t\t\t\tindex = token.indexOf(\"'\", index) + 1;\n\t\t\t\tif (!index) {\n\t\t\t\t\tparseError(\"Unmatched '\");\n\t\t\t\t}\n\t\t\t} while (token[index - 2] === '\\\\');\n\t\t\tbuffer += token.slice(i, index);\n\t\t\ti = index - 1;\n\t\t\tswitch (state) {\n\t\t\t\tcase 'before-value':\n\t\t\t\t\tstate = 'value';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'importRule-begin':\n\t\t\t\t\tstate = 'importRule';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\n\t\t// Comment\n\t\tcase \"/\":\n\t\t\tif (token.charAt(i + 1) === \"*\") {\n\t\t\t\ti += 2;\n\t\t\t\tindex = token.indexOf(\"*/\", i);\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tparseError(\"Missing */\");\n\t\t\t\t} else {\n\t\t\t\t\ti = index + 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbuffer += character;\n\t\t\t}\n\t\t\tif (state === \"importRule-begin\") {\n\t\t\t\tbuffer += \" \";\n\t\t\t\tstate = \"importRule\";\n\t\t\t}\n\t\t\tbreak;\n\n\t\t// At-rule\n\t\tcase \"@\":\n\t\t\tif (token.indexOf(\"@-moz-document\", i) === i) {\n\t\t\t\tstate = \"documentRule-begin\";\n\t\t\t\tdocumentRule = new CSSOM.CSSDocumentRule();\n\t\t\t\tdocumentRule.__starts = i;\n\t\t\t\ti += \"-moz-document\".length;\n\t\t\t\tbuffer = \"\";\n\t\t\t\tbreak;\n\t\t\t} else if (token.indexOf(\"@media\", i) === i) {\n\t\t\t\tstate = \"atBlock\";\n\t\t\t\tmediaRule = new CSSOM.CSSMediaRule();\n\t\t\t\tmediaRule.__starts = i;\n\t\t\t\ti += \"media\".length;\n\t\t\t\tbuffer = \"\";\n\t\t\t\tbreak;\n\t\t\t} else if (token.indexOf(\"@import\", i) === i) {\n\t\t\t\tstate = \"importRule-begin\";\n\t\t\t\ti += \"import\".length;\n\t\t\t\tbuffer += \"@import\";\n\t\t\t\tbreak;\n\t\t\t} else if (token.indexOf(\"@font-face\", i) === i) {\n\t\t\t\tstate = \"fontFaceRule-begin\";\n\t\t\t\ti += \"font-face\".length;\n\t\t\t\tfontFaceRule = new CSSOM.CSSFontFaceRule();\n\t\t\t\tfontFaceRule.__starts = i;\n\t\t\t\tbuffer = \"\";\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tatKeyframesRegExp.lastIndex = i;\n\t\t\t\tvar matchKeyframes = atKeyframesRegExp.exec(token);\n\t\t\t\tif (matchKeyframes && matchKeyframes.index === i) {\n\t\t\t\t\tstate = \"keyframesRule-begin\";\n\t\t\t\t\tkeyframesRule = new CSSOM.CSSKeyframesRule();\n\t\t\t\t\tkeyframesRule.__starts = i;\n\t\t\t\t\tkeyframesRule._vendorPrefix = matchKeyframes[1]; // Will come out as undefined if no prefix was found\n\t\t\t\t\ti += matchKeyframes[0].length - 1;\n\t\t\t\t\tbuffer = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\t} else if (state === \"selector\") {\n\t\t\t\t\tstate = \"atRule\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuffer += character;\n\t\t\tbreak;\n\n\t\tcase \"{\":\n\t\t\tif (state === \"selector\" || state === \"atRule\") {\n\t\t\t\tstyleRule.selectorText = buffer.trim();\n\t\t\t\tstyleRule.style.__starts = i;\n\t\t\t\tbuffer = \"\";\n\t\t\t\tstate = \"before-name\";\n\t\t\t} else if (state === \"atBlock\") {\n\t\t\t\tmediaRule.media.mediaText = buffer.trim();\n\t\t\t\tcurrentScope = parentRule = mediaRule;\n\t\t\t\tmediaRule.parentStyleSheet = styleSheet;\n\t\t\t\tbuffer = \"\";\n\t\t\t\tstate = \"before-selector\";\n\t\t\t} else if (state === \"fontFaceRule-begin\") {\n\t\t\t\tif (parentRule) {\n\t\t\t\t\tfontFaceRule.parentRule = parentRule;\n\t\t\t\t}\n\t\t\t\tfontFaceRule.parentStyleSheet = styleSheet;\n\t\t\t\tstyleRule = fontFaceRule;\n\t\t\t\tbuffer = \"\";\n\t\t\t\tstate = \"before-name\";\n\t\t\t} else if (state === \"keyframesRule-begin\") {\n\t\t\t\tkeyframesRule.name = buffer.trim();\n\t\t\t\tif (parentRule) {\n\t\t\t\t\tkeyframesRule.parentRule = parentRule;\n\t\t\t\t}\n\t\t\t\tkeyframesRule.parentStyleSheet = styleSheet;\n\t\t\t\tcurrentScope = parentRule = keyframesRule;\n\t\t\t\tbuffer = \"\";\n\t\t\t\tstate = \"keyframeRule-begin\";\n\t\t\t} else if (state === \"keyframeRule-begin\") {\n\t\t\t\tstyleRule = new CSSOM.CSSKeyframeRule();\n\t\t\t\tstyleRule.keyText = buffer.trim();\n\t\t\t\tstyleRule.__starts = i;\n\t\t\t\tbuffer = \"\";\n\t\t\t\tstate = \"before-name\";\n\t\t\t} else if (state === \"documentRule-begin\") {\n\t\t\t\t// FIXME: what if this '{' is in the url text of the match function?\n\t\t\t\tdocumentRule.matcher.matcherText = buffer.trim();\n\t\t\t\tif (parentRule) {\n\t\t\t\t\tdocumentRule.parentRule = parentRule;\n\t\t\t\t}\n\t\t\t\tcurrentScope = parentRule = documentRule;\n\t\t\t\tdocumentRule.parentStyleSheet = styleSheet;\n\t\t\t\tbuffer = \"\";\n\t\t\t\tstate = \"before-selector\";\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \":\":\n\t\t\tif (state === \"name\") {\n\t\t\t\tname = buffer.trim();\n\t\t\t\tbuffer = \"\";\n\t\t\t\tstate = \"before-value\";\n\t\t\t} else {\n\t\t\t\tbuffer += character;\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \"(\":\n\t\t\tif (state === 'value') {\n\t\t\t\t// ie css expression mode\n\t\t\t\tif (buffer.trim() === 'expression') {\n\t\t\t\t\tvar info = (new CSSOM.CSSValueExpression(token, i)).parse();\n\n\t\t\t\t\tif (info.error) {\n\t\t\t\t\t\tparseError(info.error);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbuffer += info.expression;\n\t\t\t\t\t\ti = info.idx;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstate = 'value-parenthesis';\n\t\t\t\t\tbuffer += character;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbuffer += character;\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \")\":\n\t\t\tif (state === 'value-parenthesis') {\n\t\t\t\tstate = 'value';\n\t\t\t}\n\t\t\tbuffer += character;\n\t\t\tbreak;\n\n\t\tcase \"!\":\n\t\t\tif (state === \"value\" && token.indexOf(\"!important\", i) === i) {\n\t\t\t\tpriority = \"important\";\n\t\t\t\ti += \"important\".length;\n\t\t\t} else {\n\t\t\t\tbuffer += character;\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \";\":\n\t\t\tswitch (state) {\n\t\t\t\tcase \"value\":\n\t\t\t\t\tstyleRule.style.setProperty(name, buffer.trim(), priority);\n\t\t\t\t\tpriority = \"\";\n\t\t\t\t\tbuffer = \"\";\n\t\t\t\t\tstate = \"before-name\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"atRule\":\n\t\t\t\t\tbuffer = \"\";\n\t\t\t\t\tstate = \"before-selector\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"importRule\":\n\t\t\t\t\timportRule = new CSSOM.CSSImportRule();\n\t\t\t\t\timportRule.parentStyleSheet = importRule.styleSheet.parentStyleSheet = styleSheet;\n\t\t\t\t\timportRule.cssText = buffer + character;\n\t\t\t\t\tstyleSheet.cssRules.push(importRule);\n\t\t\t\t\tbuffer = \"\";\n\t\t\t\t\tstate = \"before-selector\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbuffer += character;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \"}\":\n\t\t\tswitch (state) {\n\t\t\t\tcase \"value\":\n\t\t\t\t\tstyleRule.style.setProperty(name, buffer.trim(), priority);\n\t\t\t\t\tpriority = \"\";\n\t\t\t\t\t/* falls through */\n\t\t\t\tcase \"before-name\":\n\t\t\t\tcase \"name\":\n\t\t\t\t\tstyleRule.__ends = i + 1;\n\t\t\t\t\tif (parentRule) {\n\t\t\t\t\t\tstyleRule.parentRule = parentRule;\n\t\t\t\t\t}\n\t\t\t\t\tstyleRule.parentStyleSheet = styleSheet;\n\t\t\t\t\tcurrentScope.cssRules.push(styleRule);\n\t\t\t\t\tbuffer = \"\";\n\t\t\t\t\tif (currentScope.constructor === CSSOM.CSSKeyframesRule) {\n\t\t\t\t\t\tstate = \"keyframeRule-begin\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstate = \"before-selector\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"keyframeRule-begin\":\n\t\t\t\tcase \"before-selector\":\n\t\t\t\tcase \"selector\":\n\t\t\t\t\t// End of media/document rule.\n\t\t\t\t\tif (!parentRule) {\n\t\t\t\t\t\tparseError(\"Unexpected }\");\n\t\t\t\t\t}\n\t\t\t\t\tcurrentScope.__ends = i + 1;\n\t\t\t\t\t// Nesting rules aren't supported yet\n\t\t\t\t\tstyleSheet.cssRules.push(currentScope);\n\t\t\t\t\tcurrentScope = styleSheet;\n\t\t\t\t\tparentRule = null;\n\t\t\t\t\tbuffer = \"\";\n\t\t\t\t\tstate = \"before-selector\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tswitch (state) {\n\t\t\t\tcase \"before-selector\":\n\t\t\t\t\tstate = \"selector\";\n\t\t\t\t\tstyleRule = new CSSOM.CSSStyleRule();\n\t\t\t\t\tstyleRule.__starts = i;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"before-name\":\n\t\t\t\t\tstate = \"name\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"before-value\":\n\t\t\t\t\tstate = \"value\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"importRule-begin\":\n\t\t\t\t\tstate = \"importRule\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbuffer += character;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn styleSheet;\n};\n\n\n//.CommonJS\nexports.parse = CSSOM.parse;\n// The following modules cannot be included sooner due to the mutual dependency with parse.js\nCSSOM.CSSStyleSheet = require(\"./CSSStyleSheet\").CSSStyleSheet;\nCSSOM.CSSStyleRule = require(\"./CSSStyleRule\").CSSStyleRule;\nCSSOM.CSSImportRule = require(\"./CSSImportRule\").CSSImportRule;\nCSSOM.CSSMediaRule = require(\"./CSSMediaRule\").CSSMediaRule;\nCSSOM.CSSFontFaceRule = require(\"./CSSFontFaceRule\").CSSFontFaceRule;\nCSSOM.CSSStyleDeclaration = require('./CSSStyleDeclaration').CSSStyleDeclaration;\nCSSOM.CSSKeyframeRule = require('./CSSKeyframeRule').CSSKeyframeRule;\nCSSOM.CSSKeyframesRule = require('./CSSKeyframesRule').CSSKeyframesRule;\nCSSOM.CSSValueExpression = require('./CSSValueExpression').CSSValueExpression;\nCSSOM.CSSDocumentRule = require('./CSSDocumentRule').CSSDocumentRule;\n///CommonJS\n"]}