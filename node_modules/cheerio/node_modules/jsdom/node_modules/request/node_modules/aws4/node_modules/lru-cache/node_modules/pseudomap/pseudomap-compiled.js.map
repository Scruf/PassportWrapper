{"version":3,"sources":["pseudomap.js"],"names":[],"mappings":"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","file":"pseudomap-compiled.js","sourcesContent":["var hasOwnProperty = Object.prototype.hasOwnProperty\n\nmodule.exports = PseudoMap\n\nfunction PseudoMap (set) {\n  if (!(this instanceof PseudoMap)) // whyyyyyyy\n    throw new TypeError(\"Constructor PseudoMap requires 'new'\")\n\n  this.clear()\n\n  if (set) {\n    if ((set instanceof PseudoMap) ||\n        (typeof Map === 'function' && set instanceof Map))\n      set.forEach(function (value, key) {\n        this.set(key, value)\n      }, this)\n    else if (Array.isArray(set))\n      set.forEach(function (kv) {\n        this.set(kv[0], kv[1])\n      }, this)\n    else\n      throw new TypeError('invalid argument')\n  }\n}\n\nPseudoMap.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  Object.keys(this._data).forEach(function (k) {\n    if (k !== 'size')\n      fn.call(thisp, this._data[k].value, this._data[k].key)\n  }, this)\n}\n\nPseudoMap.prototype.has = function (k) {\n  return !!find(this._data, k)\n}\n\nPseudoMap.prototype.get = function (k) {\n  var res = find(this._data, k)\n  return res && res.value\n}\n\nPseudoMap.prototype.set = function (k, v) {\n  set(this._data, k, v)\n}\n\nPseudoMap.prototype.delete = function (k) {\n  var res = find(this._data, k)\n  if (res) {\n    delete this._data[res._index]\n    this._data.size--\n  }\n}\n\nPseudoMap.prototype.clear = function () {\n  var data = Object.create(null)\n  data.size = 0\n\n  Object.defineProperty(this, '_data', {\n    value: data,\n    enumerable: false,\n    configurable: true,\n    writable: false\n  })\n}\n\nObject.defineProperty(PseudoMap.prototype, 'size', {\n  get: function () {\n    return this._data.size\n  },\n  set: function (n) {},\n  enumerable: true,\n  configurable: true\n})\n\nPseudoMap.prototype.values =\nPseudoMap.prototype.keys =\nPseudoMap.prototype.entries = function () {\n  throw new Error('iterators are not implemented in this version')\n}\n\n// Either identical, or both NaN\nfunction same (a, b) {\n  return a === b || a !== a && b !== b\n}\n\nfunction Entry (k, v, i) {\n  this.key = k\n  this.value = v\n  this._index = i\n}\n\nfunction find (data, k) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k))\n      return data[key]\n  }\n}\n\nfunction set (data, k, v) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k)) {\n      data[key].value = v\n      return\n    }\n  }\n  data.size++\n  data[key] = new Entry(k, v, key)\n}\n"]}