{"version":3,"sources":["writer.test.js"],"names":[],"mappings":"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","file":"writer.test-compiled.js","sourcesContent":["// Copyright 2011 Mark Cavage <mcavage@gmail.com> All rights reserved.\n\nvar test = require('tap').test;\nvar sys = require('sys');\n\n///--- Globals\n\nvar BerWriter;\n\nvar BerReader;\n\n\n///--- Tests\n\ntest('load library', function(t) {\n  BerWriter = require('../../lib/index').BerWriter;\n  t.ok(BerWriter);\n  t.ok(new BerWriter());\n  t.end();\n});\n\n\ntest('write byte', function(t) {\n  var writer = new BerWriter();\n\n  writer.writeByte(0xC2);\n  var ber = writer.buffer;\n\n  t.ok(ber);\n  t.equal(ber.length, 1, 'Wrong length');\n  t.equal(ber[0], 0xC2, 'value wrong');\n\n  t.end();\n});\n\n\ntest('write 1 byte int', function(t) {\n  var writer = new BerWriter();\n\n  writer.writeInt(0x7f);\n  var ber = writer.buffer;\n\n  t.ok(ber);\n  t.equal(ber.length, 3, 'Wrong length for an int: ' + ber.length);\n  t.equal(ber[0], 0x02, 'ASN.1 tag wrong (2) -> ' + ber[0]);\n  t.equal(ber[1], 0x01, 'length wrong(1) -> ' + ber[1]);\n  t.equal(ber[2], 0x7f, 'value wrong(3) -> ' + ber[2]);\n\n  t.end();\n});\n\n\ntest('write 2 byte int', function(t) {\n  var writer = new BerWriter();\n\n  writer.writeInt(0x7ffe);\n  var ber = writer.buffer;\n\n  t.ok(ber);\n  t.equal(ber.length, 4, 'Wrong length for an int');\n  t.equal(ber[0], 0x02, 'ASN.1 tag wrong');\n  t.equal(ber[1], 0x02, 'length wrong');\n  t.equal(ber[2], 0x7f, 'value wrong (byte 1)');\n  t.equal(ber[3], 0xfe, 'value wrong (byte 2)');\n\n  t.end();\n});\n\n\ntest('write 3 byte int', function(t) {\n  var writer = new BerWriter();\n\n  writer.writeInt(0x7ffffe);\n  var ber = writer.buffer;\n\n  t.ok(ber);\n  t.equal(ber.length, 5, 'Wrong length for an int');\n  t.equal(ber[0], 0x02, 'ASN.1 tag wrong');\n  t.equal(ber[1], 0x03, 'length wrong');\n  t.equal(ber[2], 0x7f, 'value wrong (byte 1)');\n  t.equal(ber[3], 0xff, 'value wrong (byte 2)');\n  t.equal(ber[4], 0xfe, 'value wrong (byte 3)');\n\n  t.end();\n});\n\n\ntest('write 4 byte int', function(t) {\n  var writer = new BerWriter();\n\n  writer.writeInt(0x7ffffffe);\n  var ber = writer.buffer;\n\n  t.ok(ber);\n\n  t.equal(ber.length, 6, 'Wrong length for an int');\n  t.equal(ber[0], 0x02, 'ASN.1 tag wrong');\n  t.equal(ber[1], 0x04, 'length wrong');\n  t.equal(ber[2], 0x7f, 'value wrong (byte 1)');\n  t.equal(ber[3], 0xff, 'value wrong (byte 2)');\n  t.equal(ber[4], 0xff, 'value wrong (byte 3)');\n  t.equal(ber[5], 0xfe, 'value wrong (byte 4)');\n\n  t.end();\n});\n\n\ntest('write 1 byte negative int', function(t) {\n  var writer = new BerWriter();\n\n  writer.writeInt(-128);\n  var ber = writer.buffer;\n\n  t.ok(ber);\n\n  t.equal(ber.length, 3, 'Wrong length for an int');\n  t.equal(ber[0], 0x02, 'ASN.1 tag wrong');\n  t.equal(ber[1], 0x01, 'length wrong');\n  t.equal(ber[2], 0x80, 'value wrong (byte 1)');\n\n  t.end();\n});\n\n\ntest('write 2 byte negative int', function(t) {\n  var writer = new BerWriter();\n\n  writer.writeInt(-22400);\n  var ber = writer.buffer;\n\n  t.ok(ber);\n\n  t.equal(ber.length, 4, 'Wrong length for an int');\n  t.equal(ber[0], 0x02, 'ASN.1 tag wrong');\n  t.equal(ber[1], 0x02, 'length wrong');\n  t.equal(ber[2], 0xa8, 'value wrong (byte 1)');\n  t.equal(ber[3], 0x80, 'value wrong (byte 2)');\n\n  t.end();\n});\n\n\ntest('write 3 byte negative int', function(t) {\n  var writer = new BerWriter();\n\n  writer.writeInt(-481653);\n  var ber = writer.buffer;\n\n  t.ok(ber);\n\n  t.equal(ber.length, 5, 'Wrong length for an int');\n  t.equal(ber[0], 0x02, 'ASN.1 tag wrong');\n  t.equal(ber[1], 0x03, 'length wrong');\n  t.equal(ber[2], 0xf8, 'value wrong (byte 1)');\n  t.equal(ber[3], 0xa6, 'value wrong (byte 2)');\n  t.equal(ber[4], 0x8b, 'value wrong (byte 3)');\n\n  t.end();\n});\n\n\ntest('write 4 byte negative int', function(t) {\n  var writer = new BerWriter();\n\n  writer.writeInt(-1522904131);\n  var ber = writer.buffer;\n\n  t.ok(ber);\n\n  t.equal(ber.length, 6, 'Wrong length for an int');\n  t.equal(ber[0], 0x02, 'ASN.1 tag wrong');\n  t.equal(ber[1], 0x04, 'length wrong');\n  t.equal(ber[2], 0xa5, 'value wrong (byte 1)');\n  t.equal(ber[3], 0x3a, 'value wrong (byte 2)');\n  t.equal(ber[4], 0x53, 'value wrong (byte 3)');\n  t.equal(ber[5], 0xbd, 'value wrong (byte 4)');\n\n  t.end();\n});\n\n\ntest('write boolean', function(t) {\n  var writer = new BerWriter();\n\n  writer.writeBoolean(true);\n  writer.writeBoolean(false);\n  var ber = writer.buffer;\n\n  t.ok(ber);\n  t.equal(ber.length, 6, 'Wrong length');\n  t.equal(ber[0], 0x01, 'tag wrong');\n  t.equal(ber[1], 0x01, 'length wrong');\n  t.equal(ber[2], 0xff, 'value wrong');\n  t.equal(ber[3], 0x01, 'tag wrong');\n  t.equal(ber[4], 0x01, 'length wrong');\n  t.equal(ber[5], 0x00, 'value wrong');\n\n  t.end();\n});\n\n\ntest('write string', function(t) {\n  var writer = new BerWriter();\n  writer.writeString('hello world');\n  var ber = writer.buffer;\n\n  t.ok(ber);\n  t.equal(ber.length, 13, 'wrong length');\n  t.equal(ber[0], 0x04, 'wrong tag');\n  t.equal(ber[1], 11, 'wrong length');\n  t.equal(ber.slice(2).toString('utf8'), 'hello world', 'wrong value');\n\n  t.end();\n});\n\ntest('write buffer', function(t) {\n  var writer = new BerWriter();\n  // write some stuff to start with\n  writer.writeString('hello world');\n  var ber = writer.buffer;\n  var buf = new Buffer([0x04, 0x0b, 0x30, 0x09, 0x02, 0x01, 0x0f, 0x01, 0x01,\n     0xff, 0x01, 0x01, 0xff]);\n  writer.writeBuffer(buf.slice(2, buf.length), 0x04);\n  ber = writer.buffer;\n\n  t.ok(ber);\n  t.equal(ber.length, 26, 'wrong length');\n  t.equal(ber[0], 0x04, 'wrong tag');\n  t.equal(ber[1], 11, 'wrong length');\n  t.equal(ber.slice(2, 13).toString('utf8'), 'hello world', 'wrong value');\n  t.equal(ber[13], buf[0], 'wrong tag');\n  t.equal(ber[14], buf[1], 'wrong length');\n  for (var i = 13, j = 0; i < ber.length && j < buf.length; i++, j++) {\n    t.equal(ber[i], buf[j], 'buffer contents not identical');\n  }\n  t.end();\n});\n\ntest('write string array', function(t) {\n  var writer = new BerWriter();\n  writer.writeStringArray(['hello world', 'fubar!']);\n  var ber = writer.buffer;\n\n  t.ok(ber);\n\n  t.equal(ber.length, 21, 'wrong length');\n  t.equal(ber[0], 0x04, 'wrong tag');\n  t.equal(ber[1], 11, 'wrong length');\n  t.equal(ber.slice(2, 13).toString('utf8'), 'hello world', 'wrong value');\n\n  t.equal(ber[13], 0x04, 'wrong tag');\n  t.equal(ber[14], 6, 'wrong length');\n  t.equal(ber.slice(15).toString('utf8'), 'fubar!', 'wrong value');\n\n  t.end();\n});\n\n\ntest('resize internal buffer', function(t) {\n  var writer = new BerWriter({size: 2});\n  writer.writeString('hello world');\n  var ber = writer.buffer;\n\n  t.ok(ber);\n  t.equal(ber.length, 13, 'wrong length');\n  t.equal(ber[0], 0x04, 'wrong tag');\n  t.equal(ber[1], 11, 'wrong length');\n  t.equal(ber.slice(2).toString('utf8'), 'hello world', 'wrong value');\n\n  t.end();\n});\n\n\ntest('sequence', function(t) {\n  var writer = new BerWriter({size: 25});\n  writer.startSequence();\n  writer.writeString('hello world');\n  writer.endSequence();\n  var ber = writer.buffer;\n\n  t.ok(ber);\n  console.log(ber);\n  t.equal(ber.length, 15, 'wrong length');\n  t.equal(ber[0], 0x30, 'wrong tag');\n  t.equal(ber[1], 13, 'wrong length');\n  t.equal(ber[2], 0x04, 'wrong tag');\n  t.equal(ber[3], 11, 'wrong length');\n  t.equal(ber.slice(4).toString('utf8'), 'hello world', 'wrong value');\n\n  t.end();\n});\n\n\ntest('nested sequence', function(t) {\n  var writer = new BerWriter({size: 25});\n  writer.startSequence();\n  writer.writeString('hello world');\n  writer.startSequence();\n  writer.writeString('hello world');\n  writer.endSequence();\n  writer.endSequence();\n  var ber = writer.buffer;\n\n  t.ok(ber);\n  t.equal(ber.length, 30, 'wrong length');\n  t.equal(ber[0], 0x30, 'wrong tag');\n  t.equal(ber[1], 28, 'wrong length');\n  t.equal(ber[2], 0x04, 'wrong tag');\n  t.equal(ber[3], 11, 'wrong length');\n  t.equal(ber.slice(4, 15).toString('utf8'), 'hello world', 'wrong value');\n  t.equal(ber[15], 0x30, 'wrong tag');\n  t.equal(ber[16], 13, 'wrong length');\n  t.equal(ber[17], 0x04, 'wrong tag');\n  t.equal(ber[18], 11, 'wrong length');\n  t.equal(ber.slice(19, 30).toString('utf8'), 'hello world', 'wrong value');\n\n  t.end();\n});\n\n\ntest('LDAP bind message', function(t) {\n  var dn = 'cn=foo,ou=unit,o=test';\n  var writer = new BerWriter();\n  writer.startSequence();\n  writer.writeInt(3);             // msgid = 3\n  writer.startSequence(0x60);     // ldap bind\n  writer.writeInt(3);             // ldap v3\n  writer.writeString(dn);\n  writer.writeByte(0x80);\n  writer.writeByte(0x00);\n  writer.endSequence();\n  writer.endSequence();\n  var ber = writer.buffer;\n\n  t.ok(ber);\n  t.equal(ber.length, 35, 'wrong length (buffer)');\n  t.equal(ber[0], 0x30, 'wrong tag');\n  t.equal(ber[1], 33, 'wrong length');\n  t.equal(ber[2], 0x02, 'wrong tag');\n  t.equal(ber[3], 1, 'wrong length');\n  t.equal(ber[4], 0x03, 'wrong value');\n  t.equal(ber[5], 0x60, 'wrong tag');\n  t.equal(ber[6], 28, 'wrong length');\n  t.equal(ber[7], 0x02, 'wrong tag');\n  t.equal(ber[8], 1, 'wrong length');\n  t.equal(ber[9], 0x03, 'wrong value');\n  t.equal(ber[10], 0x04, 'wrong tag');\n  t.equal(ber[11], dn.length, 'wrong length');\n  t.equal(ber.slice(12, 33).toString('utf8'), dn, 'wrong value');\n  t.equal(ber[33], 0x80, 'wrong tag');\n  t.equal(ber[34], 0x00, 'wrong len');\n\n  t.end();\n});\n\n\ntest('Write OID', function(t) {\n  var oid = '1.2.840.113549.1.1.1';\n  var writer = new BerWriter();\n  writer.writeOID(oid);\n\n  var ber = writer.buffer;\n  t.ok(ber);\n  console.log(require('util').inspect(ber));\n  console.log(require('util').inspect(new Buffer([0x06, 0x09, 0x2a, 0x86,\n                                                  0x48, 0x86, 0xf7, 0x0d,\n                                                  0x01, 0x01, 0x01])));\n\n  t.end();\n});\n"]}