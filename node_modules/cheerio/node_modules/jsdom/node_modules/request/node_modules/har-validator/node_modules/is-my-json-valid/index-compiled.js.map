{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var genobj = require('generate-object-property')\nvar genfun = require('generate-function')\nvar jsonpointer = require('jsonpointer')\nvar xtend = require('xtend')\nvar formats = require('./formats')\n\nvar get = function(obj, additionalSchemas, ptr) {\n\n  var visit = function(sub) {\n    if (sub && sub.id === ptr) return sub\n    if (typeof sub !== 'object' || !sub) return null\n    return Object.keys(sub).reduce(function(res, k) {\n      return res || visit(sub[k])\n    }, null)\n  }\n\n  var res = visit(obj)\n  if (res) return res\n\n  ptr = ptr.replace(/^#/, '')\n  ptr = ptr.replace(/\\/$/, '')\n\n  try {\n    return jsonpointer.get(obj, decodeURI(ptr))\n  } catch (err) {\n    var end = ptr.indexOf('#')\n    var other\n    // external reference\n    if (end !== 0) {\n      // fragment doesn't exist.\n      if (end === -1) {\n        other = additionalSchemas[ptr]\n      } else {\n        var ext = ptr.slice(0, end)\n        other = additionalSchemas[ext]\n        var fragment = ptr.slice(end).replace(/^#/, '')\n        try {\n          return jsonpointer.get(other, fragment)\n        } catch (err) {}\n      }\n    } else {\n      other = additionalSchemas[ptr]\n    }\n    return other || null\n  }\n}\n\nvar formatName = function(field) {\n  field = JSON.stringify(field)\n  var pattern = /\\[([^\\[\\]\"]+)\\]/\n  while (pattern.test(field)) field = field.replace(pattern, '.\"+$1+\"')\n  return field\n}\n\nvar types = {}\n\ntypes.any = function() {\n  return 'true'\n}\n\ntypes.null = function(name) {\n  return name+' === null'\n}\n\ntypes.boolean = function(name) {\n  return 'typeof '+name+' === \"boolean\"'\n}\n\ntypes.array = function(name) {\n  return 'Array.isArray('+name+')'\n}\n\ntypes.object = function(name) {\n  return 'typeof '+name+' === \"object\" && '+name+' && !Array.isArray('+name+')'\n}\n\ntypes.number = function(name) {\n  return 'typeof '+name+' === \"number\"'\n}\n\ntypes.integer = function(name) {\n  return 'typeof '+name+' === \"number\" && (Math.floor('+name+') === '+name+' || '+name+' > 9007199254740992 || '+name+' < -9007199254740992)'\n}\n\ntypes.string = function(name) {\n  return 'typeof '+name+' === \"string\"'\n}\n\nvar unique = function(array) {\n  var list = []\n  for (var i = 0; i < array.length; i++) {\n    list.push(typeof array[i] === 'object' ? JSON.stringify(array[i]) : array[i])\n  }\n  for (var i = 1; i < list.length; i++) {\n    if (list.indexOf(list[i]) !== i) return false\n  }\n  return true\n}\n\nvar isMultipleOf = function(name, multipleOf) {\n  var res;\n  var factor = ((multipleOf | 0) !== multipleOf) ? Math.pow(10, multipleOf.toString().split('.').pop().length) : 1\n  if (factor > 1) {\n    var factorName = ((name | 0) !== name) ? Math.pow(10, name.toString().split('.').pop().length) : 1\n    if (factorName > factor) res = true\n    else res = Math.round(factor * name) % (factor * multipleOf)\n  }\n  else res = name % multipleOf;\n  return !res;\n}\n\nvar toType = function(node) {\n  return node.type\n}\n\nvar compile = function(schema, cache, root, reporter, opts) {\n  var fmts = opts ? xtend(formats, opts.formats) : formats\n  var scope = {unique:unique, formats:fmts, isMultipleOf:isMultipleOf}\n  var verbose = opts ? !!opts.verbose : false;\n  var greedy = opts && opts.greedy !== undefined ?\n    opts.greedy : false;\n\n  var syms = {}\n  var gensym = function(name) {\n    return name+(syms[name] = (syms[name] || 0)+1)\n  }\n\n  var reversePatterns = {}\n  var patterns = function(p) {\n    if (reversePatterns[p]) return reversePatterns[p]\n    var n = gensym('pattern')\n    scope[n] = new RegExp(p)\n    reversePatterns[p] = n\n    return n\n  }\n\n  var vars = ['i','j','k','l','m','n','o','p','q','r','s','t','u','v','x','y','z']\n  var genloop = function() {\n    var v = vars.shift()\n    vars.push(v+v[0])\n    return v\n  }\n\n  var visit = function(name, node, reporter, filter) {\n    var properties = node.properties\n    var type = node.type\n    var tuple = false\n\n    if (Array.isArray(node.items)) { // tuple type\n      properties = {}\n      node.items.forEach(function(item, i) {\n        properties[i] = item\n      })\n      type = 'array'\n      tuple = true\n    }\n\n    var indent = 0\n    var error = function(msg, prop, value) {\n      validate('errors++')\n      if (reporter === true) {\n        validate('if (validate.errors === null) validate.errors = []')\n        if (verbose) {\n          validate('validate.errors.push({field:%s,message:%s,value:%s,type:%s})', formatName(prop || name), JSON.stringify(msg), value || name, JSON.stringify(type))\n        } else {\n          validate('validate.errors.push({field:%s,message:%s})', formatName(prop || name), JSON.stringify(msg))\n        }\n      }\n    }\n\n    if (node.required === true) {\n      indent++\n      validate('if (%s === undefined) {', name)\n      error('is required')\n      validate('} else {')\n    } else {\n      indent++\n      validate('if (%s !== undefined) {', name)\n    }\n\n    var valid = [].concat(type)\n      .map(function(t) {\n        return types[t || 'any'](name)\n      })\n      .join(' || ') || 'true'\n\n    if (valid !== 'true') {\n      indent++\n      validate('if (!(%s)) {', valid)\n      error('is the wrong type')\n      validate('} else {')\n    }\n\n    if (tuple) {\n      if (node.additionalItems === false) {\n        validate('if (%s.length > %d) {', name, node.items.length)\n        error('has additional items')\n        validate('}')\n      } else if (node.additionalItems) {\n        var i = genloop()\n        validate('for (var %s = %d; %s < %s.length; %s++) {', i, node.items.length, i, name, i)\n        visit(name+'['+i+']', node.additionalItems, reporter, filter)\n        validate('}')\n      }\n    }\n\n    if (node.format && fmts[node.format]) {\n      if (type !== 'string' && formats[node.format]) validate('if (%s) {', types.string(name))\n      var n = gensym('format')\n      scope[n] = fmts[node.format]\n\n      if (typeof scope[n] === 'function') validate('if (!%s(%s)) {', n, name)\n      else validate('if (!%s.test(%s)) {', n, name)\n      error('must be '+node.format+' format')\n      validate('}')\n      if (type !== 'string' && formats[node.format]) validate('}')\n    }\n\n    if (Array.isArray(node.required)) {\n      var isUndefined = function(req) {\n        return genobj(name, req) + ' === undefined'\n      }\n\n      var checkRequired = function (req) {\n        var prop = genobj(name, req);\n        validate('if (%s === undefined) {', prop)\n        error('is required', prop)\n        validate('missing++')\n        validate('}')\n      }\n      validate('if ((%s)) {', type !== 'object' ? types.object(name) : 'true')\n      validate('var missing = 0')\n      node.required.map(checkRequired)\n      validate('}');\n      if (!greedy) {\n        validate('if (missing === 0) {')\n        indent++\n      }\n    }\n\n    if (node.uniqueItems) {\n      if (type !== 'array') validate('if (%s) {', types.array(name))\n      validate('if (!(unique(%s))) {', name)\n      error('must be unique')\n      validate('}')\n      if (type !== 'array') validate('}')\n    }\n\n    if (node.enum) {\n      var complex = node.enum.some(function(e) {\n        return typeof e === 'object'\n      })\n\n      var compare = complex ?\n        function(e) {\n          return 'JSON.stringify('+name+')'+' !== JSON.stringify('+JSON.stringify(e)+')'\n        } :\n        function(e) {\n          return name+' !== '+JSON.stringify(e)\n        }\n\n      validate('if (%s) {', node.enum.map(compare).join(' && ') || 'false')\n      error('must be an enum value')\n      validate('}')\n    }\n\n    if (node.dependencies) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n\n      Object.keys(node.dependencies).forEach(function(key) {\n        var deps = node.dependencies[key]\n        if (typeof deps === 'string') deps = [deps]\n\n        var exists = function(k) {\n          return genobj(name, k) + ' !== undefined'\n        }\n\n        if (Array.isArray(deps)) {\n          validate('if (%s !== undefined && !(%s)) {', genobj(name, key), deps.map(exists).join(' && ') || 'true')\n          error('dependencies not set')\n          validate('}')\n        }\n        if (typeof deps === 'object') {\n          validate('if (%s !== undefined) {', genobj(name, key))\n          visit(name, deps, reporter, filter)\n          validate('}')\n        }\n      })\n\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.additionalProperties || node.additionalProperties === false) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n\n      var i = genloop()\n      var keys = gensym('keys')\n\n      var toCompare = function(p) {\n        return keys+'['+i+'] !== '+JSON.stringify(p)\n      }\n\n      var toTest = function(p) {\n        return '!'+patterns(p)+'.test('+keys+'['+i+'])'\n      }\n\n      var additionalProp = Object.keys(properties || {}).map(toCompare)\n        .concat(Object.keys(node.patternProperties || {}).map(toTest))\n        .join(' && ') || 'true'\n\n      validate('var %s = Object.keys(%s)', keys, name)\n        ('for (var %s = 0; %s < %s.length; %s++) {', i, i, keys, i)\n          ('if (%s) {', additionalProp)\n\n      if (node.additionalProperties === false) {\n        if (filter) validate('delete %s', name+'['+keys+'['+i+']]')\n        error('has additional properties', null, JSON.stringify(name+'.') + ' + ' + keys + '['+i+']')\n      } else {\n        visit(name+'['+keys+'['+i+']]', node.additionalProperties, reporter, filter)\n      }\n\n      validate\n          ('}')\n        ('}')\n\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.$ref) {\n      var sub = get(root, opts && opts.schemas || {}, node.$ref)\n      if (sub) {\n        var fn = cache[node.$ref]\n        if (!fn) {\n          cache[node.$ref] = function proxy(data) {\n            return fn(data)\n          }\n          fn = compile(sub, cache, root, false, opts)\n        }\n        var n = gensym('ref')\n        scope[n] = fn\n        validate('if (!(%s(%s))) {', n, name)\n        error('referenced schema does not match')\n        validate('}')\n      }\n    }\n\n    if (node.not) {\n      var prev = gensym('prev')\n      validate('var %s = errors', prev)\n      visit(name, node.not, false, filter)\n      validate('if (%s === errors) {', prev)\n      error('negative schema matches')\n      validate('} else {')\n        ('errors = %s', prev)\n      ('}')\n    }\n\n    if (node.items && !tuple) {\n      if (type !== 'array') validate('if (%s) {', types.array(name))\n\n      var i = genloop()\n      validate('for (var %s = 0; %s < %s.length; %s++) {', i, i, name, i)\n      visit(name+'['+i+']', node.items, reporter, filter)\n      validate('}')\n\n      if (type !== 'array') validate('}')\n    }\n\n    if (node.patternProperties) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n      var keys = gensym('keys')\n      var i = genloop()\n      validate\n        ('var %s = Object.keys(%s)', keys, name)\n        ('for (var %s = 0; %s < %s.length; %s++) {', i, i, keys, i)\n\n      Object.keys(node.patternProperties).forEach(function(key) {\n        var p = patterns(key)\n        validate('if (%s.test(%s)) {', p, keys+'['+i+']')\n        visit(name+'['+keys+'['+i+']]', node.patternProperties[key], reporter, filter)\n        validate('}')\n      })\n\n      validate('}')\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.pattern) {\n      var p = patterns(node.pattern)\n      if (type !== 'string') validate('if (%s) {', types.string(name))\n      validate('if (!(%s.test(%s))) {', p, name)\n      error('pattern mismatch')\n      validate('}')\n      if (type !== 'string') validate('}')\n    }\n\n    if (node.allOf) {\n      node.allOf.forEach(function(sch) {\n        visit(name, sch, reporter, filter)\n      })\n    }\n\n    if (node.anyOf && node.anyOf.length) {\n      var prev = gensym('prev')\n\n      node.anyOf.forEach(function(sch, i) {\n        if (i === 0) {\n          validate('var %s = errors', prev)\n        } else {\n          validate('if (errors !== %s) {', prev)\n            ('errors = %s', prev)\n        }\n        visit(name, sch, false, false)\n      })\n      node.anyOf.forEach(function(sch, i) {\n        if (i) validate('}')\n      })\n      validate('if (%s !== errors) {', prev)\n      error('no schemas match')\n      validate('}')\n    }\n\n    if (node.oneOf && node.oneOf.length) {\n      var prev = gensym('prev')\n      var passes = gensym('passes')\n\n      validate\n        ('var %s = errors', prev)\n        ('var %s = 0', passes)\n\n      node.oneOf.forEach(function(sch, i) {\n        visit(name, sch, false, false)\n        validate('if (%s === errors) {', prev)\n          ('%s++', passes)\n        ('} else {')\n          ('errors = %s', prev)\n        ('}')\n      })\n\n      validate('if (%s !== 1) {', passes)\n      error('no (or more than one) schemas match')\n      validate('}')\n    }\n\n    if (node.multipleOf !== undefined) {\n      if (type !== 'number' && type !== 'integer') validate('if (%s) {', types.number(name))\n\n      validate('if (!isMultipleOf(%s, %d)) {', name, node.multipleOf)\n\n      error('has a remainder')\n      validate('}')\n\n      if (type !== 'number' && type !== 'integer') validate('}')\n    }\n\n    if (node.maxProperties !== undefined) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n\n      validate('if (Object.keys(%s).length > %d) {', name, node.maxProperties)\n      error('has more properties than allowed')\n      validate('}')\n\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.minProperties !== undefined) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n\n      validate('if (Object.keys(%s).length < %d) {', name, node.minProperties)\n      error('has less properties than allowed')\n      validate('}')\n\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.maxItems !== undefined) {\n      if (type !== 'array') validate('if (%s) {', types.array(name))\n\n      validate('if (%s.length > %d) {', name, node.maxItems)\n      error('has more items than allowed')\n      validate('}')\n\n      if (type !== 'array') validate('}')\n    }\n\n    if (node.minItems !== undefined) {\n      if (type !== 'array') validate('if (%s) {', types.array(name))\n\n      validate('if (%s.length < %d) {', name, node.minItems)\n      error('has less items than allowed')\n      validate('}')\n\n      if (type !== 'array') validate('}')\n    }\n\n    if (node.maxLength !== undefined) {\n      if (type !== 'string') validate('if (%s) {', types.string(name))\n\n      validate('if (%s.length > %d) {', name, node.maxLength)\n      error('has longer length than allowed')\n      validate('}')\n\n      if (type !== 'string') validate('}')\n    }\n\n    if (node.minLength !== undefined) {\n      if (type !== 'string') validate('if (%s) {', types.string(name))\n\n      validate('if (%s.length < %d) {', name, node.minLength)\n      error('has less length than allowed')\n      validate('}')\n\n      if (type !== 'string') validate('}')\n    }\n\n    if (node.minimum !== undefined) {\n      validate('if (%s %s %d) {', name, node.exclusiveMinimum ? '<=' : '<', node.minimum)\n      error('is less than minimum')\n      validate('}')\n    }\n\n    if (node.maximum !== undefined) {\n      validate('if (%s %s %d) {', name, node.exclusiveMaximum ? '>=' : '>', node.maximum)\n      error('is more than maximum')\n      validate('}')\n    }\n\n    if (properties) {\n      Object.keys(properties).forEach(function(p) {\n        if (Array.isArray(type) && type.indexOf('null') !== -1) validate('if (%s !== null) {', name)\n\n        visit(genobj(name, p), properties[p], reporter, filter)\n\n        if (Array.isArray(type) && type.indexOf('null') !== -1) validate('}')\n      })\n    }\n\n    while (indent--) validate('}')\n  }\n\n  var validate = genfun\n    ('function validate(data) {')\n      ('validate.errors = null')\n      ('var errors = 0')\n\n  visit('data', schema, reporter, opts && opts.filter)\n\n  validate\n      ('return errors === 0')\n    ('}')\n\n  validate = validate.toFunction(scope)\n  validate.errors = null\n\n  if (Object.defineProperty) {\n    Object.defineProperty(validate, 'error', {\n      get: function() {\n        if (!validate.errors) return ''\n        return validate.errors.map(function(err) {\n          return err.field + ' ' + err.message;\n        }).join('\\n')\n      }\n    })\n  }\n\n  validate.toJSON = function() {\n    return schema\n  }\n\n  return validate\n}\n\nmodule.exports = function(schema, opts) {\n  if (typeof schema === 'string') schema = JSON.parse(schema)\n  return compile(schema, {}, schema, true, opts)\n}\n\nmodule.exports.filter = function(schema, opts) {\n  var validate = module.exports(schema, xtend(opts, {filter: true}))\n  return function(sch) {\n    validate(sch)\n    return sch\n  }\n}\n"]}