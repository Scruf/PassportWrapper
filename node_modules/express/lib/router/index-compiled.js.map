{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["/*!\n * express\n * Copyright(c) 2009-2013 TJ Holowaychuk\n * Copyright(c) 2013 Roman Shtylman\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar Route = require('./route');\nvar Layer = require('./layer');\nvar methods = require('methods');\nvar mixin = require('utils-merge');\nvar debug = require('debug')('express:router');\nvar deprecate = require('depd')('express');\nvar flatten = require('array-flatten');\nvar parseUrl = require('parseurl');\n\n/**\n * Module variables.\n * @private\n */\n\nvar objectRegExp = /^\\[object (\\S+)\\]$/;\nvar slice = Array.prototype.slice;\nvar toString = Object.prototype.toString;\n\n/**\n * Initialize a new `Router` with the given `options`.\n *\n * @param {Object} options\n * @return {Router} which is an callable function\n * @public\n */\n\nvar proto = module.exports = function(options) {\n  var opts = options || {};\n\n  function router(req, res, next) {\n    router.handle(req, res, next);\n  }\n\n  // mixin Router class functions\n  router.__proto__ = proto;\n\n  router.params = {};\n  router._params = [];\n  router.caseSensitive = opts.caseSensitive;\n  router.mergeParams = opts.mergeParams;\n  router.strict = opts.strict;\n  router.stack = [];\n\n  return router;\n};\n\n/**\n * Map the given param placeholder `name`(s) to the given callback.\n *\n * Parameter mapping is used to provide pre-conditions to routes\n * which use normalized placeholders. For example a _:user_id_ parameter\n * could automatically load a user's information from the database without\n * any additional code,\n *\n * The callback uses the same signature as middleware, the only difference\n * being that the value of the placeholder is passed, in this case the _id_\n * of the user. Once the `next()` function is invoked, just like middleware\n * it will continue on to execute the route, or subsequent parameter functions.\n *\n * Just like in middleware, you must either respond to the request or call next\n * to avoid stalling the request.\n *\n *  app.param('user_id', function(req, res, next, id){\n *    User.find(id, function(err, user){\n *      if (err) {\n *        return next(err);\n *      } else if (!user) {\n *        return next(new Error('failed to load user'));\n *      }\n *      req.user = user;\n *      next();\n *    });\n *  });\n *\n * @param {String} name\n * @param {Function} fn\n * @return {app} for chaining\n * @public\n */\n\nproto.param = function param(name, fn) {\n  // param logic\n  if (typeof name === 'function') {\n    deprecate('router.param(fn): Refactor to use path params');\n    this._params.push(name);\n    return;\n  }\n\n  // apply param functions\n  var params = this._params;\n  var len = params.length;\n  var ret;\n\n  if (name[0] === ':') {\n    deprecate('router.param(' + JSON.stringify(name) + ', fn): Use router.param(' + JSON.stringify(name.substr(1)) + ', fn) instead');\n    name = name.substr(1);\n  }\n\n  for (var i = 0; i < len; ++i) {\n    if (ret = params[i](name, fn)) {\n      fn = ret;\n    }\n  }\n\n  // ensure we end up with a\n  // middleware function\n  if ('function' != typeof fn) {\n    throw new Error('invalid param() call for ' + name + ', got ' + fn);\n  }\n\n  (this.params[name] = this.params[name] || []).push(fn);\n  return this;\n};\n\n/**\n * Dispatch a req, res into the router.\n * @private\n */\n\nproto.handle = function handle(req, res, out) {\n  var self = this;\n\n  debug('dispatching %s %s', req.method, req.url);\n\n  var search = 1 + req.url.indexOf('?');\n  var pathlength = search ? search - 1 : req.url.length;\n  var fqdn = req.url[0] !== '/' && 1 + req.url.substr(0, pathlength).indexOf('://');\n  var protohost = fqdn ? req.url.substr(0, req.url.indexOf('/', 2 + fqdn)) : '';\n  var idx = 0;\n  var removed = '';\n  var slashAdded = false;\n  var paramcalled = {};\n\n  // store options for OPTIONS request\n  // only used if OPTIONS request\n  var options = [];\n\n  // middleware and routes\n  var stack = self.stack;\n\n  // manage inter-router variables\n  var parentParams = req.params;\n  var parentUrl = req.baseUrl || '';\n  var done = restore(out, req, 'baseUrl', 'next', 'params');\n\n  // setup next layer\n  req.next = next;\n\n  // for options requests, respond with a default if nothing else responds\n  if (req.method === 'OPTIONS') {\n    done = wrap(done, function(old, err) {\n      if (err || options.length === 0) return old(err);\n      sendOptionsResponse(res, options, old);\n    });\n  }\n\n  // setup basic req values\n  req.baseUrl = parentUrl;\n  req.originalUrl = req.originalUrl || req.url;\n\n  next();\n\n  function next(err) {\n    var layerError = err === 'route'\n      ? null\n      : err;\n\n    // remove added slash\n    if (slashAdded) {\n      req.url = req.url.substr(1);\n      slashAdded = false;\n    }\n\n    // restore altered req.url\n    if (removed.length !== 0) {\n      req.baseUrl = parentUrl;\n      req.url = protohost + removed + req.url.substr(protohost.length);\n      removed = '';\n    }\n\n    // no more matching layers\n    if (idx >= stack.length) {\n      setImmediate(done, layerError);\n      return;\n    }\n\n    // get pathname of request\n    var path = getPathname(req);\n\n    if (path == null) {\n      return done(layerError);\n    }\n\n    // find next matching layer\n    var layer;\n    var match;\n    var route;\n\n    while (match !== true && idx < stack.length) {\n      layer = stack[idx++];\n      match = matchLayer(layer, path);\n      route = layer.route;\n\n      if (typeof match !== 'boolean') {\n        // hold on to layerError\n        layerError = layerError || match;\n      }\n\n      if (match !== true) {\n        continue;\n      }\n\n      if (!route) {\n        // process non-route handlers normally\n        continue;\n      }\n\n      if (layerError) {\n        // routes do not match with a pending error\n        match = false;\n        continue;\n      }\n\n      var method = req.method;\n      var has_method = route._handles_method(method);\n\n      // build up automatic options response\n      if (!has_method && method === 'OPTIONS') {\n        appendMethods(options, route._options());\n      }\n\n      // don't even bother matching route\n      if (!has_method && method !== 'HEAD') {\n        match = false;\n        continue;\n      }\n    }\n\n    // no match\n    if (match !== true) {\n      return done(layerError);\n    }\n\n    // store route for dispatch on change\n    if (route) {\n      req.route = route;\n    }\n\n    // Capture one-time layer values\n    req.params = self.mergeParams\n      ? mergeParams(layer.params, parentParams)\n      : layer.params;\n    var layerPath = layer.path;\n\n    // this should be done for the layer\n    self.process_params(layer, paramcalled, req, res, function (err) {\n      if (err) {\n        return next(layerError || err);\n      }\n\n      if (route) {\n        return layer.handle_request(req, res, next);\n      }\n\n      trim_prefix(layer, layerError, layerPath, path);\n    });\n  }\n\n  function trim_prefix(layer, layerError, layerPath, path) {\n    var c = path[layerPath.length];\n    if (c && '/' !== c && '.' !== c) return next(layerError);\n\n     // Trim off the part of the url that matches the route\n     // middleware (.use stuff) needs to have the path stripped\n    if (layerPath.length !== 0) {\n      debug('trim prefix (%s) from url %s', layerPath, req.url);\n      removed = layerPath;\n      req.url = protohost + req.url.substr(protohost.length + removed.length);\n\n      // Ensure leading slash\n      if (!fqdn && req.url[0] !== '/') {\n        req.url = '/' + req.url;\n        slashAdded = true;\n      }\n\n      // Setup base URL (no trailing slash)\n      req.baseUrl = parentUrl + (removed[removed.length - 1] === '/'\n        ? removed.substring(0, removed.length - 1)\n        : removed);\n    }\n\n    debug('%s %s : %s', layer.name, layerPath, req.originalUrl);\n\n    if (layerError) {\n      layer.handle_error(layerError, req, res, next);\n    } else {\n      layer.handle_request(req, res, next);\n    }\n  }\n};\n\n/**\n * Process any parameters for the layer.\n * @private\n */\n\nproto.process_params = function process_params(layer, called, req, res, done) {\n  var params = this.params;\n\n  // captured parameters from the layer, keys and values\n  var keys = layer.keys;\n\n  // fast track\n  if (!keys || keys.length === 0) {\n    return done();\n  }\n\n  var i = 0;\n  var name;\n  var paramIndex = 0;\n  var key;\n  var paramVal;\n  var paramCallbacks;\n  var paramCalled;\n\n  // process params in order\n  // param callbacks can be async\n  function param(err) {\n    if (err) {\n      return done(err);\n    }\n\n    if (i >= keys.length ) {\n      return done();\n    }\n\n    paramIndex = 0;\n    key = keys[i++];\n\n    if (!key) {\n      return done();\n    }\n\n    name = key.name;\n    paramVal = req.params[name];\n    paramCallbacks = params[name];\n    paramCalled = called[name];\n\n    if (paramVal === undefined || !paramCallbacks) {\n      return param();\n    }\n\n    // param previously called with same value or error occurred\n    if (paramCalled && (paramCalled.match === paramVal\n      || (paramCalled.error && paramCalled.error !== 'route'))) {\n      // restore value\n      req.params[name] = paramCalled.value;\n\n      // next param\n      return param(paramCalled.error);\n    }\n\n    called[name] = paramCalled = {\n      error: null,\n      match: paramVal,\n      value: paramVal\n    };\n\n    paramCallback();\n  }\n\n  // single param callbacks\n  function paramCallback(err) {\n    var fn = paramCallbacks[paramIndex++];\n\n    // store updated value\n    paramCalled.value = req.params[key.name];\n\n    if (err) {\n      // store error\n      paramCalled.error = err;\n      param(err);\n      return;\n    }\n\n    if (!fn) return param();\n\n    try {\n      fn(req, res, paramCallback, paramVal, key.name);\n    } catch (e) {\n      paramCallback(e);\n    }\n  }\n\n  param();\n};\n\n/**\n * Use the given middleware function, with optional path, defaulting to \"/\".\n *\n * Use (like `.all`) will run for any http METHOD, but it will not add\n * handlers for those methods so OPTIONS requests will not consider `.use`\n * functions even if they could respond.\n *\n * The other difference is that _route_ path is stripped and not visible\n * to the handler function. The main effect of this feature is that mounted\n * handlers can operate without any code changes regardless of the \"prefix\"\n * pathname.\n *\n * @public\n */\n\nproto.use = function use(fn) {\n  var offset = 0;\n  var path = '/';\n\n  // default path to '/'\n  // disambiguate router.use([fn])\n  if (typeof fn !== 'function') {\n    var arg = fn;\n\n    while (Array.isArray(arg) && arg.length !== 0) {\n      arg = arg[0];\n    }\n\n    // first arg is the path\n    if (typeof arg !== 'function') {\n      offset = 1;\n      path = fn;\n    }\n  }\n\n  var callbacks = flatten(slice.call(arguments, offset));\n\n  if (callbacks.length === 0) {\n    throw new TypeError('Router.use() requires middleware functions');\n  }\n\n  for (var i = 0; i < callbacks.length; i++) {\n    var fn = callbacks[i];\n\n    if (typeof fn !== 'function') {\n      throw new TypeError('Router.use() requires middleware function but got a ' + gettype(fn));\n    }\n\n    // add the middleware\n    debug('use %s %s', path, fn.name || '<anonymous>');\n\n    var layer = new Layer(path, {\n      sensitive: this.caseSensitive,\n      strict: false,\n      end: false\n    }, fn);\n\n    layer.route = undefined;\n\n    this.stack.push(layer);\n  }\n\n  return this;\n};\n\n/**\n * Create a new Route for the given path.\n *\n * Each route contains a separate middleware stack and VERB handlers.\n *\n * See the Route api documentation for details on adding handlers\n * and middleware to routes.\n *\n * @param {String} path\n * @return {Route}\n * @public\n */\n\nproto.route = function route(path) {\n  var route = new Route(path);\n\n  var layer = new Layer(path, {\n    sensitive: this.caseSensitive,\n    strict: this.strict,\n    end: true\n  }, route.dispatch.bind(route));\n\n  layer.route = route;\n\n  this.stack.push(layer);\n  return route;\n};\n\n// create Router#VERB functions\nmethods.concat('all').forEach(function(method){\n  proto[method] = function(path){\n    var route = this.route(path)\n    route[method].apply(route, slice.call(arguments, 1));\n    return this;\n  };\n});\n\n// append methods to a list of methods\nfunction appendMethods(list, addition) {\n  for (var i = 0; i < addition.length; i++) {\n    var method = addition[i];\n    if (list.indexOf(method) === -1) {\n      list.push(method);\n    }\n  }\n}\n\n// get pathname of request\nfunction getPathname(req) {\n  try {\n    return parseUrl(req).pathname;\n  } catch (err) {\n    return undefined;\n  }\n}\n\n// get type for error message\nfunction gettype(obj) {\n  var type = typeof obj;\n\n  if (type !== 'object') {\n    return type;\n  }\n\n  // inspect [[Class]] for objects\n  return toString.call(obj)\n    .replace(objectRegExp, '$1');\n}\n\n/**\n * Match path to a layer.\n *\n * @param {Layer} layer\n * @param {string} path\n * @private\n */\n\nfunction matchLayer(layer, path) {\n  try {\n    return layer.match(path);\n  } catch (err) {\n    return err;\n  }\n}\n\n// merge params with parent params\nfunction mergeParams(params, parent) {\n  if (typeof parent !== 'object' || !parent) {\n    return params;\n  }\n\n  // make copy of parent for base\n  var obj = mixin({}, parent);\n\n  // simple non-numeric merging\n  if (!(0 in params) || !(0 in parent)) {\n    return mixin(obj, params);\n  }\n\n  var i = 0;\n  var o = 0;\n\n  // determine numeric gaps\n  while (i in params) {\n    i++;\n  }\n\n  while (o in parent) {\n    o++;\n  }\n\n  // offset numeric indices in params before merge\n  for (i--; i >= 0; i--) {\n    params[i + o] = params[i];\n\n    // create holes for the merge when necessary\n    if (i < o) {\n      delete params[i];\n    }\n  }\n\n  return mixin(obj, params);\n}\n\n// restore obj props after function\nfunction restore(fn, obj) {\n  var props = new Array(arguments.length - 2);\n  var vals = new Array(arguments.length - 2);\n\n  for (var i = 0; i < props.length; i++) {\n    props[i] = arguments[i + 2];\n    vals[i] = obj[props[i]];\n  }\n\n  return function(err){\n    // restore vals\n    for (var i = 0; i < props.length; i++) {\n      obj[props[i]] = vals[i];\n    }\n\n    return fn.apply(this, arguments);\n  };\n}\n\n// send an OPTIONS response\nfunction sendOptionsResponse(res, options, next) {\n  try {\n    var body = options.join(',');\n    res.set('Allow', body);\n    res.send(body);\n  } catch (err) {\n    next(err);\n  }\n}\n\n// wrap a function\nfunction wrap(old, fn) {\n  return function proxy() {\n    var args = new Array(arguments.length + 1);\n\n    args[0] = old;\n    for (var i = 0, len = arguments.length; i < len; i++) {\n      args[i + 1] = arguments[i];\n    }\n\n    fn.apply(this, args);\n  };\n}\n"]}