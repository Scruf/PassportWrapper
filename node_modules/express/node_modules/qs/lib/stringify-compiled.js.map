{"version":3,"sources":["stringify.js"],"names":[],"mappings":";;AAEA,IAAI,QAAQ,QAAQ,SAAR,CAAR;;;;AAKJ,IAAI,YAAY;AACZ,eAAW,GAAX;AACA,2BAAuB;AACnB,kBAAU,UAAU,MAAV,EAAkB,GAAlB,EAAuB;;AAE7B,mBAAO,SAAS,IAAT,CAFsB;SAAvB;AAIV,iBAAS,UAAU,MAAV,EAAkB,GAAlB,EAAuB;;AAE5B,mBAAO,SAAS,GAAT,GAAe,GAAf,GAAqB,GAArB,CAFqB;SAAvB;AAIT,gBAAQ,UAAU,MAAV,EAAkB,GAAlB,EAAuB;;AAE3B,mBAAO,MAAP,CAF2B;SAAvB;KATZ;AAcA,wBAAoB,KAApB;CAhBA;;AAoBJ,UAAU,SAAV,GAAsB,UAAU,GAAV,EAAe,MAAf,EAAuB,mBAAvB,EAA4C,kBAA5C,EAAgE,MAAhE,EAAwE;;AAE1F,QAAI,OAAO,MAAP,KAAkB,UAAlB,EAA8B;AAC9B,cAAM,OAAO,MAAP,EAAe,GAAf,CAAN,CAD8B;KAAlC,MAGK,IAAI,MAAM,QAAN,CAAe,GAAf,CAAJ,EAAyB;AAC1B,cAAM,IAAI,QAAJ,EAAN,CAD0B;KAAzB,MAGA,IAAI,eAAe,IAAf,EAAqB;AAC1B,cAAM,IAAI,WAAJ,EAAN,CAD0B;KAAzB,MAGA,IAAI,QAAQ,IAAR,EAAc;AACnB,YAAI,kBAAJ,EAAwB;AACpB,mBAAO,MAAM,MAAN,CAAa,MAAb,CAAP,CADoB;SAAxB;;AAIA,cAAM,EAAN,CALmB;KAAlB;;AAQL,QAAI,OAAO,GAAP,KAAe,QAAf,IACA,OAAO,GAAP,KAAe,QAAf,IACA,OAAO,GAAP,KAAe,SAAf,EAA0B;;AAE1B,eAAO,CAAC,MAAM,MAAN,CAAa,MAAb,IAAuB,GAAvB,GAA6B,MAAM,MAAN,CAAa,GAAb,CAA7B,CAAR,CAF0B;KAF9B;;AAOA,QAAI,SAAS,EAAT,CA1BsF;;AA4B1F,QAAI,OAAO,GAAP,KAAe,WAAf,EAA4B;AAC5B,eAAO,MAAP,CAD4B;KAAhC;;AAIA,QAAI,UAAU,MAAM,OAAN,CAAc,MAAd,IAAwB,MAAxB,GAAiC,OAAO,IAAP,CAAY,GAAZ,CAAjC,CAhC4E;AAiC1F,SAAK,IAAI,IAAI,CAAJ,EAAO,KAAK,QAAQ,MAAR,EAAgB,IAAI,EAAJ,EAAQ,EAAE,CAAF,EAAK;AAC9C,YAAI,MAAM,QAAQ,CAAR,CAAN,CAD0C;;AAG9C,YAAI,MAAM,OAAN,CAAc,GAAd,CAAJ,EAAwB;AACpB,qBAAS,OAAO,MAAP,CAAc,UAAU,SAAV,CAAoB,IAAI,GAAJ,CAApB,EAA8B,oBAAoB,MAApB,EAA4B,GAA5B,CAA9B,EAAgE,mBAAhE,EAAqF,kBAArF,EAAyG,MAAzG,CAAd,CAAT,CADoB;SAAxB,MAGK;AACD,qBAAS,OAAO,MAAP,CAAc,UAAU,SAAV,CAAoB,IAAI,GAAJ,CAApB,EAA8B,SAAS,GAAT,GAAe,GAAf,GAAqB,GAArB,EAA0B,mBAAxD,EAA6E,kBAA7E,EAAiG,MAAjG,CAAd,CAAT,CADC;SAHL;KAHJ;;AAWA,WAAO,MAAP,CA5C0F;CAAxE;;AAgDtB,OAAO,OAAP,GAAiB,UAAU,GAAV,EAAe,OAAf,EAAwB;;AAErC,cAAU,WAAW,EAAX,CAF2B;AAGrC,QAAI,YAAY,OAAO,QAAQ,SAAR,KAAsB,WAA7B,GAA2C,UAAU,SAAV,GAAsB,QAAQ,SAAR,CAH5C;AAIrC,QAAI,qBAAqB,OAAO,QAAQ,kBAAR,KAA+B,SAAtC,GAAkD,QAAQ,kBAAR,GAA6B,UAAU,kBAAV,CAJnE;AAKrC,QAAI,OAAJ,CALqC;AAMrC,QAAI,MAAJ,CANqC;AAOrC,QAAI,OAAO,QAAQ,MAAR,KAAmB,UAA1B,EAAsC;AACtC,iBAAS,QAAQ,MAAR,CAD6B;AAEtC,cAAM,OAAO,EAAP,EAAW,GAAX,CAAN,CAFsC;KAA1C,MAIK,IAAI,MAAM,OAAN,CAAc,QAAQ,MAAR,CAAlB,EAAmC;AACpC,kBAAU,SAAS,QAAQ,MAAR,CADiB;KAAnC;;AAIL,QAAI,OAAO,EAAP,CAfiC;;AAiBrC,QAAI,OAAO,GAAP,KAAe,QAAf,IACA,QAAQ,IAAR,EAAc;;AAEd,eAAO,EAAP,CAFc;KADlB;;AAMA,QAAI,WAAJ,CAvBqC;AAwBrC,QAAI,QAAQ,WAAR,IAAuB,UAAU,qBAAV,EAAiC;AACxD,sBAAc,QAAQ,WAAR,CAD0C;KAA5D,MAGK,IAAI,aAAa,OAAb,EAAsB;AAC3B,sBAAc,QAAQ,OAAR,GAAkB,SAAlB,GAA8B,QAA9B,CADa;KAA1B,MAGA;AACD,sBAAc,SAAd,CADC;KAHA;;AAOL,QAAI,sBAAsB,UAAU,qBAAV,CAAgC,WAAhC,CAAtB,CAlCiC;;AAoCrC,QAAI,CAAC,OAAD,EAAU;AACV,kBAAU,OAAO,IAAP,CAAY,GAAZ,CAAV,CADU;KAAd;AAGA,SAAK,IAAI,IAAI,CAAJ,EAAO,KAAK,QAAQ,MAAR,EAAgB,IAAI,EAAJ,EAAQ,EAAE,CAAF,EAAK;AAC9C,YAAI,MAAM,QAAQ,CAAR,CAAN,CAD0C;AAE9C,eAAO,KAAK,MAAL,CAAY,UAAU,SAAV,CAAoB,IAAI,GAAJ,CAApB,EAA8B,GAA9B,EAAmC,mBAAnC,EAAwD,kBAAxD,EAA4E,MAA5E,CAAZ,CAAP,CAF8C;KAAlD;;AAKA,WAAO,KAAK,IAAL,CAAU,SAAV,CAAP,CA5CqC;CAAxB","file":"stringify-compiled.js","sourcesContent":["// Load modules\n\nvar Utils = require('./utils');\n\n\n// Declare internals\n\nvar internals = {\n    delimiter: '&',\n    arrayPrefixGenerators: {\n        brackets: function (prefix, key) {\n\n            return prefix + '[]';\n        },\n        indices: function (prefix, key) {\n\n            return prefix + '[' + key + ']';\n        },\n        repeat: function (prefix, key) {\n\n            return prefix;\n        }\n    },\n    strictNullHandling: false\n};\n\n\ninternals.stringify = function (obj, prefix, generateArrayPrefix, strictNullHandling, filter) {\n\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    }\n    else if (Utils.isBuffer(obj)) {\n        obj = obj.toString();\n    }\n    else if (obj instanceof Date) {\n        obj = obj.toISOString();\n    }\n    else if (obj === null) {\n        if (strictNullHandling) {\n            return Utils.encode(prefix);\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' ||\n        typeof obj === 'number' ||\n        typeof obj === 'boolean') {\n\n        return [Utils.encode(prefix) + '=' + Utils.encode(obj)];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys = Array.isArray(filter) ? filter : Object.keys(obj);\n    for (var i = 0, il = objKeys.length; i < il; ++i) {\n        var key = objKeys[i];\n\n        if (Array.isArray(obj)) {\n            values = values.concat(internals.stringify(obj[key], generateArrayPrefix(prefix, key), generateArrayPrefix, strictNullHandling, filter));\n        }\n        else {\n            values = values.concat(internals.stringify(obj[key], prefix + '[' + key + ']', generateArrayPrefix, strictNullHandling, filter));\n        }\n    }\n\n    return values;\n};\n\n\nmodule.exports = function (obj, options) {\n\n    options = options || {};\n    var delimiter = typeof options.delimiter === 'undefined' ? internals.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n    var objKeys;\n    var filter;\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    }\n    else if (Array.isArray(options.filter)) {\n        objKeys = filter = options.filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' ||\n        obj === null) {\n\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in internals.arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    }\n    else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    }\n    else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = internals.arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n    for (var i = 0, il = objKeys.length; i < il; ++i) {\n        var key = objKeys[i];\n        keys = keys.concat(internals.stringify(obj[key], key, generateArrayPrefix, strictNullHandling, filter));\n    }\n\n    return keys.join(delimiter);\n};\n"]}