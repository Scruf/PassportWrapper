{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;AAKA,OAAO,OAAP,GAAiB,KAAjB;;;;;;;;;;;;;;;AAeA,SAAS,KAAT,CAAe,GAAf,EAAoB,GAApB,EAAyB;;AAEvB,MAAI,cAAc,IAAd,CAFmB;AAGvB,MAAI,cAAc,IAAd;;;AAHmB,MAMnB,gBAAgB,IAAI,mBAAJ,CAAhB,CANmB;AAOvB,MAAI,YAAY,IAAI,eAAJ,CAAZ,CAPmB;AAQvB,MAAI,eAAe,IAAI,eAAJ,CAAf,CARmB;AASvB,MAAI,OAAO,IAAI,MAAJ,CAAP,CATmB;AAUvB,MAAI,KAAK,IAAI,eAAJ,CAAL;;;AAVmB,MAanB,CAAC,aAAD,IAAkB,CAAC,SAAD,EAAY,OAAO,KAAP,CAAlC;;;AAbuB,MAgBnB,MAAM,GAAG,OAAH,CAAW,UAAX,MAA2B,CAAC,CAAD,EAAI,OAAO,KAAP,CAAzC;;;AAhBuB,MAmBnB,SAAJ,EAAe,YAAY,UAAU,KAAV,CAAgB,OAAhB,CAAZ,CAAf;;;AAnBuB,MAsBnB,SAAJ,EAAe;AACb,kBAAc,UAAU,IAAV,CAAe,UAAU,KAAV,EAAiB;AAC5C,aAAO,UAAU,GAAV,IAAiB,UAAU,IAAV,IAAkB,UAAU,OAAO,IAAP,CADR;KAAjB,CAA7B,CADa;GAAf;;;AAtBuB,MA6BnB,aAAJ,EAAmB;AACjB,oBAAgB,IAAI,IAAJ,CAAS,aAAT,CAAhB,CADiB;AAEjB,mBAAe,IAAI,IAAJ,CAAS,YAAT,CAAf,CAFiB;AAGjB,kBAAc,gBAAgB,aAAhB,CAHG;GAAnB;;AAMA,SAAO,CAAC,EAAG,eAAe,WAAf,CAAH,CAnCe;CAAzB","file":"index-compiled.js","sourcesContent":["\n/**\n * Expose `fresh()`.\n */\n\nmodule.exports = fresh;\n\n/**\n * Check freshness of `req` and `res` headers.\n *\n * When the cache is \"fresh\" __true__ is returned,\n * otherwise __false__ is returned to indicate that\n * the cache is now stale.\n *\n * @param {Object} req\n * @param {Object} res\n * @return {Boolean}\n * @api public\n */\n\nfunction fresh(req, res) {\n  // defaults\n  var etagMatches = true;\n  var notModified = true;\n\n  // fields\n  var modifiedSince = req['if-modified-since'];\n  var noneMatch = req['if-none-match'];\n  var lastModified = res['last-modified'];\n  var etag = res['etag'];\n  var cc = req['cache-control'];\n\n  // unconditional request\n  if (!modifiedSince && !noneMatch) return false;\n\n  // check for no-cache cache request directive\n  if (cc && cc.indexOf('no-cache') !== -1) return false;  \n\n  // parse if-none-match\n  if (noneMatch) noneMatch = noneMatch.split(/ *, */);\n\n  // if-none-match\n  if (noneMatch) {\n    etagMatches = noneMatch.some(function (match) {\n      return match === '*' || match === etag || match === 'W/' + etag;\n    });\n  }\n\n  // if-modified-since\n  if (modifiedSince) {\n    modifiedSince = new Date(modifiedSince);\n    lastModified = new Date(lastModified);\n    notModified = lastModified <= modifiedSince;\n  }\n\n  return !! (etagMatches && notModified);\n}\n"]}