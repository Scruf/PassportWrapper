{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;AAMA;;;;;;;AAOA,OAAO,OAAP,GAAiB,IAAjB;;;;;;;AAOA,IAAI,SAAS,QAAQ,QAAR,CAAT;AACJ,IAAI,QAAQ,QAAQ,IAAR,EAAc,KAAd;;;;;;;AAOZ,IAAI,sBAAsB,KAAtB;AACJ,IAAI,WAAW,OAAO,SAAP,CAAiB,QAAjB;;;;;;;;;;AAUf,SAAS,SAAT,CAAmB,MAAnB,EAA2B;AACzB,MAAI,OAAO,MAAP,KAAkB,CAAlB,EAAqB;;AAEvB,WAAO,4BAAP,CAFuB;GAAzB;;;AADyB,MAOrB,OAAO,OACR,UADQ,CACG,KADH,EAER,MAFQ,CAED,MAFC,EAEO,MAFP,EAGR,MAHQ,CAGD,QAHC,EAIR,OAJQ,CAIA,mBAJA,EAIqB,EAJrB,CAAP;;;AAPqB,MAcrB,MAAM,OAAO,MAAP,KAAkB,QAAlB,GACN,OAAO,UAAP,CAAkB,MAAlB,EAA0B,MAA1B,CADM,GAEN,OAAO,MAAP,CAhBqB;;AAkBzB,SAAO,MAAM,IAAI,QAAJ,CAAa,EAAb,CAAN,GAAyB,GAAzB,GAA+B,IAA/B,GAAsC,GAAtC,CAlBkB;CAA3B;;;;;;;;;;;;AA+BA,SAAS,IAAT,CAAc,MAAd,EAAsB,OAAtB,EAA+B;AAC7B,MAAI,UAAU,IAAV,EAAgB;AAClB,UAAM,IAAI,SAAJ,CAAc,6BAAd,CAAN,CADkB;GAApB;;;AAD6B,MAMzB,UAAU,QAAQ,MAAR,CAAV,CANyB;AAO7B,MAAI,OAAO,WAAW,OAAO,QAAQ,IAAR,KAAiB,SAAxB,GAClB,QAAQ,IAAR,GACA,OAFO;;;AAPkB,MAYzB,CAAC,OAAD,IAAY,OAAO,MAAP,KAAkB,QAAlB,IAA8B,CAAC,OAAO,QAAP,CAAgB,MAAhB,CAAD,EAA0B;AACtE,UAAM,IAAI,SAAJ,CAAc,qDAAd,CAAN,CADsE;GAAxE;;;AAZ6B,MAiBzB,MAAM,UACN,QAAQ,MAAR,CADM,GAEN,UAAU,MAAV,CAFM,CAjBmB;;AAqB7B,SAAO,OACH,OAAO,GAAP,GACA,GAFG,CArBsB;CAA/B;;;;;;;;;;AAkCA,SAAS,OAAT,CAAiB,GAAjB,EAAsB;;AAEpB,MAAI,OAAO,KAAP,KAAiB,UAAjB,IAA+B,eAAe,KAAf,EAAsB;AACvD,WAAO,IAAP,CADuD;GAAzD;;;AAFoB,SAOb,OAAO,OAAO,GAAP,KAAe,QAAf,IACT,WAAW,GAAX,IAAkB,SAAS,IAAT,CAAc,IAAI,KAAJ,CAAd,KAA6B,eAA7B,IAClB,WAAW,GAAX,IAAkB,SAAS,IAAT,CAAc,IAAI,KAAJ,CAAd,KAA6B,eAA7B,IAClB,SAAS,GAAT,IAAgB,OAAO,IAAI,GAAJ,KAAY,QAAnB,IAChB,UAAU,GAAV,IAAiB,OAAO,IAAI,IAAJ,KAAa,QAApB,CAXF;CAAtB;;;;;;;;;;AAsBA,SAAS,OAAT,CAAiB,IAAjB,EAAuB;AACrB,MAAI,QAAQ,KAAK,KAAL,CAAW,OAAX,GAAqB,QAArB,CAA8B,EAA9B,CAAR,CADiB;AAErB,MAAI,OAAO,KAAK,IAAL,CAAU,QAAV,CAAmB,EAAnB,CAAP,CAFiB;;AAIrB,SAAO,MAAM,IAAN,GAAa,GAAb,GAAmB,KAAnB,GAA2B,GAA3B,CAJc;CAAvB","file":"index-compiled.js","sourcesContent":["/*!\n * etag\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = etag\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar crypto = require('crypto')\nvar Stats = require('fs').Stats\n\n/**\n * Module variables.\n * @private\n */\n\nvar base64PadCharRegExp = /=+$/\nvar toString = Object.prototype.toString\n\n/**\n * Generate an entity tag.\n *\n * @param {Buffer|string} entity\n * @return {string}\n * @private\n */\n\nfunction entitytag(entity) {\n  if (entity.length === 0) {\n    // fast-path empty\n    return '\"0-1B2M2Y8AsgTpgAmY7PhCfg\"'\n  }\n\n  // compute hash of entity\n  var hash = crypto\n    .createHash('md5')\n    .update(entity, 'utf8')\n    .digest('base64')\n    .replace(base64PadCharRegExp, '')\n\n  // compute length of entity\n  var len = typeof entity === 'string'\n    ? Buffer.byteLength(entity, 'utf8')\n    : entity.length\n\n  return '\"' + len.toString(16) + '-' + hash + '\"'\n}\n\n/**\n * Create a simple ETag.\n *\n * @param {string|Buffer|Stats} entity\n * @param {object} [options]\n * @param {boolean} [options.weak]\n * @return {String}\n * @public\n */\n\nfunction etag(entity, options) {\n  if (entity == null) {\n    throw new TypeError('argument entity is required')\n  }\n\n  // support fs.Stats object\n  var isStats = isstats(entity)\n  var weak = options && typeof options.weak === 'boolean'\n    ? options.weak\n    : isStats\n\n  // validate argument\n  if (!isStats && typeof entity !== 'string' && !Buffer.isBuffer(entity)) {\n    throw new TypeError('argument entity must be string, Buffer, or fs.Stats')\n  }\n\n  // generate entity tag\n  var tag = isStats\n    ? stattag(entity)\n    : entitytag(entity)\n\n  return weak\n    ? 'W/' + tag\n    : tag\n}\n\n/**\n * Determine if object is a Stats object.\n *\n * @param {object} obj\n * @return {boolean}\n * @api private\n */\n\nfunction isstats(obj) {\n  // genuine fs.Stats\n  if (typeof Stats === 'function' && obj instanceof Stats) {\n    return true\n  }\n\n  // quack quack\n  return obj && typeof obj === 'object'\n    && 'ctime' in obj && toString.call(obj.ctime) === '[object Date]'\n    && 'mtime' in obj && toString.call(obj.mtime) === '[object Date]'\n    && 'ino' in obj && typeof obj.ino === 'number'\n    && 'size' in obj && typeof obj.size === 'number'\n}\n\n/**\n * Generate a tag for a stat.\n *\n * @param {object} stat\n * @return {string}\n * @private\n */\n\nfunction stattag(stat) {\n  var mtime = stat.mtime.getTime().toString(16)\n  var size = stat.size.toString(16)\n\n  return '\"' + size + '-' + mtime + '\"'\n}\n"]}