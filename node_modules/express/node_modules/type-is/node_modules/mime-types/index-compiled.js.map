{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["/*!\n * mime-types\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar db = require('mime-db')\nvar extname = require('path').extname\n\n/**\n * Module variables.\n * @private\n */\n\nvar extractTypeRegExp = /^\\s*([^;\\s]*)(?:;|\\s|$)/\nvar textTypeRegExp = /^text\\//i\n\n/**\n * Module exports.\n * @public\n */\n\nexports.charset = charset\nexports.charsets = { lookup: charset }\nexports.contentType = contentType\nexports.extension = extension\nexports.extensions = Object.create(null)\nexports.lookup = lookup\nexports.types = Object.create(null)\n\n// Populate the extensions/types maps\npopulateMaps(exports.extensions, exports.types)\n\n/**\n * Get the default charset for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction charset(type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = extractTypeRegExp.exec(type)\n  var mime = match && db[match[1].toLowerCase()]\n\n  if (mime && mime.charset) {\n    return mime.charset\n  }\n\n  // default text/* to utf-8\n  if (match && textTypeRegExp.test(match[1])) {\n    return 'UTF-8'\n  }\n\n  return false\n}\n\n/**\n * Create a full Content-Type header given a MIME type or extension.\n *\n * @param {string} str\n * @return {boolean|string}\n */\n\nfunction contentType(str) {\n  // TODO: should this even be in this module?\n  if (!str || typeof str !== 'string') {\n    return false\n  }\n\n  var mime = str.indexOf('/') === -1\n    ? exports.lookup(str)\n    : str\n\n  if (!mime) {\n    return false\n  }\n\n  // TODO: use content-type or other module\n  if (mime.indexOf('charset') === -1) {\n    var charset = exports.charset(mime)\n    if (charset) mime += '; charset=' + charset.toLowerCase()\n  }\n\n  return mime\n}\n\n/**\n * Get the default extension for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction extension(type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = extractTypeRegExp.exec(type)\n\n  // get extensions\n  var exts = match && exports.extensions[match[1].toLowerCase()]\n\n  if (!exts || !exts.length) {\n    return false\n  }\n\n  return exts[0]\n}\n\n/**\n * Lookup the MIME type for a file path/extension.\n *\n * @param {string} path\n * @return {boolean|string}\n */\n\nfunction lookup(path) {\n  if (!path || typeof path !== 'string') {\n    return false\n  }\n\n  // get the extension (\"ext\" or \".ext\" or full path)\n  var extension = extname('x.' + path)\n    .toLowerCase()\n    .substr(1)\n\n  if (!extension) {\n    return false\n  }\n\n  return exports.types[extension] || false\n}\n\n/**\n * Populate the extensions and types maps.\n * @private\n */\n\nfunction populateMaps(extensions, types) {\n  // source preference (least -> most)\n  var preference = ['nginx', 'apache', undefined, 'iana']\n\n  Object.keys(db).forEach(function forEachMimeType(type) {\n    var mime = db[type]\n    var exts = mime.extensions\n\n    if (!exts || !exts.length) {\n      return\n    }\n\n    // mime -> extensions\n    extensions[type] = exts\n\n    // extension -> mime\n    for (var i = 0; i < exts.length; i++) {\n      var extension = exts[i]\n\n      if (types[extension]) {\n        var from = preference.indexOf(db[types[extension]].source)\n        var to = preference.indexOf(mime.source)\n\n        if (types[extension] !== 'application/octet-stream'\n          && from > to || (from === to && types[extension].substr(0, 12) === 'application/')) {\n          // skip the remapping\n          continue\n        }\n      }\n\n      // set the extension -> mime\n      types[extension] = type\n    }\n  })\n}\n"]}