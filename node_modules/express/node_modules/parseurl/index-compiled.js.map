{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAOA;;;;;;AAMA,IAAI,MAAM,QAAQ,KAAR,CAAN;AACJ,IAAI,QAAQ,IAAI,KAAJ;AACZ,IAAI,MAAM,IAAI,GAAJ;;;;;;;AAOV,IAAI,mBAAmB,sCAAnB;;;;;;AAMJ,OAAO,OAAP,GAAiB,QAAjB;AACA,OAAO,OAAP,CAAe,QAAf,GAA0B,WAA1B;;;;;;;;;;AAUA,SAAS,QAAT,CAAkB,GAAlB,EAAuB;AACrB,MAAI,MAAM,IAAI,GAAJ,CADW;;AAGrB,MAAI,QAAQ,SAAR,EAAmB;;AAErB,WAAO,SAAP,CAFqB;GAAvB;;AAKA,MAAI,SAAS,IAAI,UAAJ,CARQ;;AAUrB,MAAI,MAAM,GAAN,EAAW,MAAX,CAAJ,EAAwB;;AAEtB,WAAO,MAAP,CAFsB;GAAxB;;;AAVqB,QAgBrB,GAAS,UAAU,GAAV,CAAT,CAhBqB;AAiBrB,SAAO,IAAP,GAAc,GAAd,CAjBqB;;AAmBrB,SAAO,IAAI,UAAJ,GAAiB,MAAjB,CAnBc;CAAvB;;;;;;;;;;AA8BA,SAAS,WAAT,CAAqB,GAArB,EAA0B;AACxB,MAAI,MAAM,IAAI,WAAJ,CADc;;AAGxB,MAAI,OAAO,GAAP,KAAe,QAAf,EAAyB;;AAE3B,WAAO,SAAS,GAAT,CAAP,CAF2B;GAA7B;;AAKA,MAAI,SAAS,IAAI,kBAAJ,CARW;;AAUxB,MAAI,MAAM,GAAN,EAAW,MAAX,CAAJ,EAAwB;;AAEtB,WAAO,MAAP,CAFsB;GAAxB;;;AAVwB,QAgBxB,GAAS,UAAU,GAAV,CAAT,CAhBwB;AAiBxB,SAAO,IAAP,GAAc,GAAd,CAjBwB;;AAmBxB,SAAO,IAAI,kBAAJ,GAAyB,MAAzB,CAnBiB;CAA1B;;;;;;;;;;AA8BA,SAAS,SAAT,CAAmB,GAAnB,EAAwB;;;AAGtB,MAAI,aAAa,OAAO,GAAP,KAAe,QAAf,IAA2B,iBAAiB,IAAjB,CAAsB,GAAtB,CAA3B;;;AAHK,MAMlB,UAAJ,EAAgB;AACd,QAAI,WAAW,WAAW,CAAX,CAAX,CADU;AAEd,QAAI,SAAS,WAAW,CAAX,KAAiB,IAAjB,CAFC;AAGd,QAAI,MAAM,QAAQ,SAAR,GACN,IAAI,GAAJ,EADM,GAEN,EAFM,CAHI;AAMd,QAAI,IAAJ,GAAW,GAAX,CANc;AAOd,QAAI,IAAJ,GAAW,GAAX,CAPc;AAQd,QAAI,QAAJ,GAAe,QAAf,CARc;AASd,QAAI,MAAJ,GAAa,MAAb,CATc;AAUd,QAAI,KAAJ,GAAY,UAAU,OAAO,MAAP,CAAc,CAAd,CAAV,CAVE;;AAYd,WAAO,GAAP,CAZc;GAAhB;;AAeA,SAAO,MAAM,GAAN,CAAP,CArBsB;CAAxB;;;;;;;;;;;AAiCA,SAAS,KAAT,CAAe,GAAf,EAAoB,SAApB,EAA+B;AAC7B,SAAO,OAAO,SAAP,KAAqB,QAArB,IACF,cAAc,IAAd,KACC,QAAQ,SAAR,IAAqB,qBAAqB,GAArB,CAFpB,IAGF,UAAU,IAAV,KAAmB,GAAnB,CAJwB;CAA/B","file":"index-compiled.js","sourcesContent":["/*!\n * parseurl\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2014 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n */\n\nvar url = require('url')\nvar parse = url.parse\nvar Url = url.Url\n\n/**\n * Pattern for a simple path case.\n * See: https://github.com/joyent/node/pull/7878\n */\n\nvar simplePathRegExp = /^(\\/\\/?(?!\\/)[^\\?#\\s]*)(\\?[^#\\s]*)?$/\n\n/**\n * Exports.\n */\n\nmodule.exports = parseurl\nmodule.exports.original = originalurl\n\n/**\n * Parse the `req` url with memoization.\n *\n * @param {ServerRequest} req\n * @return {Object}\n * @api public\n */\n\nfunction parseurl(req) {\n  var url = req.url\n\n  if (url === undefined) {\n    // URL is undefined\n    return undefined\n  }\n\n  var parsed = req._parsedUrl\n\n  if (fresh(url, parsed)) {\n    // Return cached URL parse\n    return parsed\n  }\n\n  // Parse the URL\n  parsed = fastparse(url)\n  parsed._raw = url\n\n  return req._parsedUrl = parsed\n};\n\n/**\n * Parse the `req` original url with fallback and memoization.\n *\n * @param {ServerRequest} req\n * @return {Object}\n * @api public\n */\n\nfunction originalurl(req) {\n  var url = req.originalUrl\n\n  if (typeof url !== 'string') {\n    // Fallback\n    return parseurl(req)\n  }\n\n  var parsed = req._parsedOriginalUrl\n\n  if (fresh(url, parsed)) {\n    // Return cached URL parse\n    return parsed\n  }\n\n  // Parse the URL\n  parsed = fastparse(url)\n  parsed._raw = url\n\n  return req._parsedOriginalUrl = parsed\n};\n\n/**\n * Parse the `str` url with fast-path short-cut.\n *\n * @param {string} str\n * @return {Object}\n * @api private\n */\n\nfunction fastparse(str) {\n  // Try fast path regexp\n  // See: https://github.com/joyent/node/pull/7878\n  var simplePath = typeof str === 'string' && simplePathRegExp.exec(str)\n\n  // Construct simple URL\n  if (simplePath) {\n    var pathname = simplePath[1]\n    var search = simplePath[2] || null\n    var url = Url !== undefined\n      ? new Url()\n      : {}\n    url.path = str\n    url.href = str\n    url.pathname = pathname\n    url.search = search\n    url.query = search && search.substr(1)\n\n    return url\n  }\n\n  return parse(str)\n}\n\n/**\n * Determine if parsed is still fresh for url.\n *\n * @param {string} url\n * @param {object} parsedUrl\n * @return {boolean}\n * @api private\n */\n\nfunction fresh(url, parsedUrl) {\n  return typeof parsedUrl === 'object'\n    && parsedUrl !== null\n    && (Url === undefined || parsedUrl instanceof Url)\n    && parsedUrl._raw === url\n}\n"]}