{"version":3,"sources":["bom-handling.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,UAAU,QAAV;;AAEJ,QAAQ,UAAR,GAAqB,iBAArB;AACA,SAAS,iBAAT,CAA2B,OAA3B,EAAoC,OAApC,EAA6C;AACzC,SAAK,OAAL,GAAe,OAAf,CADyC;AAEzC,SAAK,MAAL,GAAc,IAAd,CAFyC;CAA7C;;AAKA,kBAAkB,SAAlB,CAA4B,KAA5B,GAAoC,UAAS,GAAT,EAAc;AAC9C,QAAI,KAAK,MAAL,EAAa;AACb,cAAM,UAAU,GAAV,CADO;AAEb,aAAK,MAAL,GAAc,KAAd,CAFa;KAAjB;;AAKA,WAAO,KAAK,OAAL,CAAa,KAAb,CAAmB,GAAnB,CAAP,CAN8C;CAAd;;AASpC,kBAAkB,SAAlB,CAA4B,GAA5B,GAAkC,YAAW;AACzC,WAAO,KAAK,OAAL,CAAa,GAAb,EAAP,CADyC;CAAX;;;;AAOlC,QAAQ,QAAR,GAAmB,eAAnB;AACA,SAAS,eAAT,CAAyB,OAAzB,EAAkC,OAAlC,EAA2C;AACvC,SAAK,OAAL,GAAe,OAAf,CADuC;AAEvC,SAAK,IAAL,GAAY,KAAZ,CAFuC;AAGvC,SAAK,OAAL,GAAe,WAAW,EAAX,CAHwB;CAA3C;;AAMA,gBAAgB,SAAhB,CAA0B,KAA1B,GAAkC,UAAS,GAAT,EAAc;AAC5C,QAAI,MAAM,KAAK,OAAL,CAAa,KAAb,CAAmB,GAAnB,CAAN,CADwC;AAE5C,QAAI,KAAK,IAAL,IAAa,CAAC,GAAD,EACb,OAAO,GAAP,CADJ;;AAGA,QAAI,IAAI,CAAJ,MAAW,OAAX,EAAoB;AACpB,cAAM,IAAI,KAAJ,CAAU,CAAV,CAAN,CADoB;AAEpB,YAAI,OAAO,KAAK,OAAL,CAAa,QAAb,KAA0B,UAAjC,EACA,KAAK,OAAL,CAAa,QAAb,GADJ;KAFJ;;AAMA,SAAK,IAAL,GAAY,IAAZ,CAX4C;AAY5C,WAAO,GAAP,CAZ4C;CAAd;;AAelC,gBAAgB,SAAhB,CAA0B,GAA1B,GAAgC,YAAW;AACvC,WAAO,KAAK,OAAL,CAAa,GAAb,EAAP,CADuC;CAAX","file":"bom-handling-compiled.js","sourcesContent":["\"use strict\"\n\nvar BOMChar = '\\uFEFF';\n\nexports.PrependBOM = PrependBOMWrapper\nfunction PrependBOMWrapper(encoder, options) {\n    this.encoder = encoder;\n    this.addBOM = true;\n}\n\nPrependBOMWrapper.prototype.write = function(str) {\n    if (this.addBOM) {\n        str = BOMChar + str;\n        this.addBOM = false;\n    }\n\n    return this.encoder.write(str);\n}\n\nPrependBOMWrapper.prototype.end = function() {\n    return this.encoder.end();\n}\n\n\n//------------------------------------------------------------------------------\n\nexports.StripBOM = StripBOMWrapper;\nfunction StripBOMWrapper(decoder, options) {\n    this.decoder = decoder;\n    this.pass = false;\n    this.options = options || {};\n}\n\nStripBOMWrapper.prototype.write = function(buf) {\n    var res = this.decoder.write(buf);\n    if (this.pass || !res)\n        return res;\n\n    if (res[0] === BOMChar) {\n        res = res.slice(1);\n        if (typeof this.options.stripBOM === 'function')\n            this.options.stripBOM();\n    }\n\n    this.pass = true;\n    return res;\n}\n\nStripBOMWrapper.prototype.end = function() {\n    return this.decoder.end();\n}\n\n"]}