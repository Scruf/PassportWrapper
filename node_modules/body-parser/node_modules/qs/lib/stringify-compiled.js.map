{"version":3,"sources":["stringify.js"],"names":[],"mappings":"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","file":"stringify-compiled.js","sourcesContent":["'use strict';\n\nvar Utils = require('./utils');\n\nvar internals = {\n    delimiter: '&',\n    arrayPrefixGenerators: {\n        brackets: function (prefix) {\n            return prefix + '[]';\n        },\n        indices: function (prefix, key) {\n            return prefix + '[' + key + ']';\n        },\n        repeat: function (prefix) {\n            return prefix;\n        }\n    },\n    strictNullHandling: false,\n    skipNulls: false,\n    encode: true\n};\n\ninternals.stringify = function (object, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (Utils.isBuffer(obj)) {\n        obj = String(obj);\n    } else if (obj instanceof Date) {\n        obj = obj.toISOString();\n    } else if (obj === null) {\n        if (strictNullHandling) {\n            return encode ? Utils.encode(prefix) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean') {\n        if (encode) {\n            return [Utils.encode(prefix) + '=' + Utils.encode(obj)];\n        }\n        return [prefix + '=' + obj];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(internals.stringify(obj[key], generateArrayPrefix(prefix, key), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n        } else {\n            values = values.concat(internals.stringify(obj[key], prefix + (allowDots ? '.' + key : '[' + key + ']'), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n        }\n    }\n\n    return values;\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = opts || {};\n    var delimiter = typeof options.delimiter === 'undefined' ? internals.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : internals.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : internals.encode;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var allowDots = typeof options.allowDots === 'undefined' ? false : options.allowDots;\n    var objKeys;\n    var filter;\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (Array.isArray(options.filter)) {\n        objKeys = filter = options.filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in internals.arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    } else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = internals.arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        keys = keys.concat(internals.stringify(obj[key], key, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n    }\n\n    return keys.join(delimiter);\n};\n"]}