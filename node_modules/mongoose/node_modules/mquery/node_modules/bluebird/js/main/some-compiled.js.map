{"version":3,"sources":["some.js"],"names":[],"mappings":"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","file":"some-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = require(\"./util.js\");\nvar RangeError = require(\"./errors.js\").RangeError;\nvar AggregateError = require(\"./errors.js\").AggregateError;\nvar isArray = util.isArray;\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n    }\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            e.push(this._values[i]);\n        }\n        this._reject(e);\n    }\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/1wAmHx\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n"]}