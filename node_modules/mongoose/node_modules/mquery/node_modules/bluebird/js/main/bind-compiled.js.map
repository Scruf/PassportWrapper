{"version":3,"sources":["bind.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UAAS,OAAT,EAAkB,QAAlB,EAA4B,mBAA5B,EAAiD;AAClE,QAAI,aAAa,UAAS,CAAT,EAAY,CAAZ,EAAe;AAC5B,aAAK,OAAL,CAAa,CAAb,EAD4B;KAAf,CADiD;;AAKlE,QAAI,iBAAiB,UAAS,CAAT,EAAY,OAAZ,EAAqB;AACtC,gBAAQ,sBAAR,GAAiC,IAAjC,CADsC;AAEtC,gBAAQ,cAAR,CAAuB,KAAvB,CAA6B,UAA7B,EAAyC,UAAzC,EAAqD,IAArD,EAA2D,IAA3D,EAAiE,CAAjE,EAFsC;KAArB,CAL6C;;AAUlE,QAAI,kBAAkB,UAAS,OAAT,EAAkB,OAAlB,EAA2B;AAC7C,YAAI,KAAK,UAAL,EAAJ,EAAuB;AACnB,iBAAK,gBAAL,CAAsB,QAAQ,MAAR,CAAtB,CADmB;SAAvB;KADkB,CAV4C;;AAgBlE,QAAI,kBAAkB,UAAS,CAAT,EAAY,OAAZ,EAAqB;AACvC,YAAI,CAAC,QAAQ,sBAAR,EAAgC,KAAK,OAAL,CAAa,CAAb,EAArC;KADkB,CAhB4C;;AAoBlE,YAAQ,SAAR,CAAkB,IAAlB,GAAyB,UAAU,OAAV,EAAmB;AACxC,YAAI,eAAe,oBAAoB,OAApB,CAAf,CADoC;AAExC,YAAI,MAAM,IAAI,OAAJ,CAAY,QAAZ,CAAN,CAFoC;AAGxC,YAAI,cAAJ,CAAmB,IAAnB,EAAyB,CAAzB,EAHwC;AAIxC,YAAI,SAAS,KAAK,OAAL,EAAT,CAJoC;;AAMxC,YAAI,WAAJ,CAAgB,YAAhB,EANwC;AAOxC,YAAI,wBAAwB,OAAxB,EAAiC;AACjC,gBAAI,UAAU;AACV,wCAAwB,KAAxB;AACA,yBAAS,GAAT;AACA,wBAAQ,MAAR;AACA,gCAAgB,YAAhB;aAJA,CAD6B;AAOjC,mBAAO,KAAP,CAAa,QAAb,EAAuB,cAAvB,EAAuC,IAAI,SAAJ,EAAe,GAAtD,EAA2D,OAA3D,EAPiC;AAQjC,yBAAa,KAAb,CACI,eADJ,EACqB,eADrB,EACsC,IAAI,SAAJ,EAAe,GADrD,EAC0D,OAD1D,EARiC;SAArC,MAUO;AACH,gBAAI,gBAAJ,CAAqB,MAArB,EADG;SAVP;AAaA,eAAO,GAAP,CApBwC;KAAnB,CApByC;;AA2ClE,YAAQ,SAAR,CAAkB,WAAlB,GAAgC,UAAU,GAAV,EAAe;AAC3C,YAAI,QAAQ,SAAR,EAAmB;AACnB,iBAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,MAAjB,CADE;AAEnB,iBAAK,QAAL,GAAgB,GAAhB,CAFmB;SAAvB,MAGO;AACH,iBAAK,SAAL,GAAiB,KAAK,SAAL,GAAkB,CAAC,MAAD,CADhC;SAHP;KAD4B,CA3CkC;;AAoDlE,YAAQ,SAAR,CAAkB,QAAlB,GAA6B,YAAY;AACrC,eAAO,CAAC,KAAK,SAAL,GAAiB,MAAjB,CAAD,KAA8B,MAA9B,CAD8B;KAAZ,CApDqC;;AAwDlE,YAAQ,IAAR,GAAe,UAAU,OAAV,EAAmB,KAAnB,EAA0B;AACrC,YAAI,eAAe,oBAAoB,OAApB,CAAf,CADiC;AAErC,YAAI,MAAM,IAAI,OAAJ,CAAY,QAAZ,CAAN,CAFiC;;AAIrC,YAAI,WAAJ,CAAgB,YAAhB,EAJqC;AAKrC,YAAI,wBAAwB,OAAxB,EAAiC;AACjC,yBAAa,KAAb,CAAmB,YAAW;AAC1B,oBAAI,gBAAJ,CAAqB,KAArB,EAD0B;aAAX,EAEhB,IAAI,OAAJ,EAAa,IAAI,SAAJ,EAAe,GAF/B,EAEoC,IAFpC,EADiC;SAArC,MAIO;AACH,gBAAI,gBAAJ,CAAqB,KAArB,EADG;SAJP;AAOA,eAAO,GAAP,CAZqC;KAA1B,CAxDmD;CAAjD","file":"bind-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise) {\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (this._isPending()) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, ret._progress, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, ret._progress, ret, context);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 131072;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~131072);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 131072) === 131072;\n};\n\nPromise.bind = function (thisArg, value) {\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        maybePromise._then(function() {\n            ret._resolveCallback(value);\n        }, ret._reject, ret._progress, ret, null);\n    } else {\n        ret._resolveCallback(value);\n    }\n    return ret;\n};\n};\n"]}