{"version":3,"sources":["debuggability.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UAAS,OAAT,EAAkB,aAAlB,EAAiC;AAClD,QAAI,YAAY,QAAQ,UAAR,CADkC;AAElD,QAAI,QAAQ,QAAQ,YAAR,CAAR,CAF8C;AAGlD,QAAI,UAAU,QAAQ,aAAR,EAAuB,OAAvB,CAHoC;AAIlD,QAAI,OAAO,QAAQ,WAAR,CAAP,CAJ8C;AAKlD,QAAI,iBAAiB,KAAK,cAAL,CAL6B;AAMlD,QAAI,yBAAJ,CANkD;AAOlD,QAAI,0BAAJ,CAPkD;AAQlD,QAAI,YAAY,SAAU,KAAK,MAAL,KACL,CAAC,CAAC,QAAQ,GAAR,CAAY,gBAAZ,CAAD,IACD,QAAQ,GAAR,CAAY,UAAZ,MAA4B,aAA5B,CAFK,CARwB;;AAYlD,QAAI,KAAK,MAAL,IAAe,QAAQ,GAAR,CAAY,gBAAZ,KAAiC,CAAjC,EAAoC,YAAY,KAAZ,CAAvD;;AAEA,QAAI,SAAJ,EAAe;AACX,cAAM,4BAAN,GADW;KAAf;;AAIA,YAAQ,SAAR,CAAkB,iBAAlB,GAAsC,YAAW;AAC7C,aAAK,0BAAL,GAD6C;AAE7C,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,QAAjB,CAF4B;KAAX,CAlBY;;AAuBlD,YAAQ,SAAR,CAAkB,+BAAlB,GAAoD,YAAY;AAC5D,YAAI,CAAC,KAAK,SAAL,GAAiB,QAAjB,CAAD,KAAgC,CAAhC,EAAmC,OAAvC;AACA,aAAK,wBAAL,GAF4D;AAG5D,cAAM,WAAN,CAAkB,KAAK,yBAAL,EAAgC,IAAlD,EAAwD,SAAxD,EAH4D;KAAZ,CAvBF;;AA6BlD,YAAQ,SAAR,CAAkB,kCAAlB,GAAuD,YAAY;AAC/D,sBAAc,kBAAd,CAAiC,kBAAjC,EAC8B,yBAD9B,EACyD,SADzD,EACoE,IADpE,EAD+D;KAAZ,CA7BL;;AAkClD,YAAQ,SAAR,CAAkB,yBAAlB,GAA8C,YAAY;AACtD,YAAI,KAAK,qBAAL,EAAJ,EAAkC;AAC9B,gBAAI,SAAS,KAAK,qBAAL,MAAgC,KAAK,aAAL,CADf;AAE9B,iBAAK,gCAAL,GAF8B;AAG9B,0BAAc,kBAAd,CAAiC,oBAAjC,EAC8B,0BAD9B,EAC0D,MAD1D,EACkE,IADlE,EAH8B;SAAlC;KAD0C,CAlCI;;AA2ClD,YAAQ,SAAR,CAAkB,gCAAlB,GAAqD,YAAY;AAC7D,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,MAAjB,CAD4C;KAAZ,CA3CH;;AA+ClD,YAAQ,SAAR,CAAkB,kCAAlB,GAAuD,YAAY;AAC/D,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAkB,CAAC,MAAD,CAD4B;KAAZ,CA/CL;;AAmDlD,YAAQ,SAAR,CAAkB,6BAAlB,GAAkD,YAAY;AAC1D,eAAO,CAAC,KAAK,SAAL,GAAiB,MAAjB,CAAD,GAA4B,CAA5B,CADmD;KAAZ,CAnDA;;AAuDlD,YAAQ,SAAR,CAAkB,wBAAlB,GAA6C,YAAY;AACrD,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,OAAjB,CADoC;KAAZ,CAvDK;;AA2DlD,YAAQ,SAAR,CAAkB,0BAAlB,GAA+C,YAAY;AACvD,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAkB,CAAC,OAAD,CADoB;AAEvD,YAAI,KAAK,6BAAL,EAAJ,EAA0C;AACtC,iBAAK,kCAAL,GADsC;AAEtC,iBAAK,kCAAL,GAFsC;SAA1C;KAF2C,CA3DG;;AAmElD,YAAQ,SAAR,CAAkB,qBAAlB,GAA0C,YAAY;AAClD,eAAO,CAAC,KAAK,SAAL,GAAiB,OAAjB,CAAD,GAA6B,CAA7B,CAD2C;KAAZ,CAnEQ;;AAuElD,YAAQ,SAAR,CAAkB,qBAAlB,GAA0C,UAAU,aAAV,EAAyB;AAC/D,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,OAAjB,CAD8C;AAE/D,aAAK,oBAAL,GAA4B,aAA5B,CAF+D;KAAzB,CAvEQ;;AA4ElD,YAAQ,SAAR,CAAkB,qBAAlB,GAA0C,YAAY;AAClD,eAAO,CAAC,KAAK,SAAL,GAAiB,OAAjB,CAAD,GAA6B,CAA7B,CAD2C;KAAZ,CA5EQ;;AAgFlD,YAAQ,SAAR,CAAkB,qBAAlB,GAA0C,YAAY;AAClD,eAAO,KAAK,qBAAL,KACD,KAAK,oBAAL,GACA,SAFC,CAD2C;KAAZ,CAhFQ;;AAsFlD,YAAQ,SAAR,CAAkB,kBAAlB,GAAuC,YAAY;AAC/C,YAAI,SAAJ,EAAe;AACX,iBAAK,MAAL,GAAc,IAAI,aAAJ,CAAkB,KAAK,YAAL,EAAlB,CAAd,CADW;SAAf;AAGA,eAAO,IAAP,CAJ+C;KAAZ,CAtFW;;AA6FlD,YAAQ,SAAR,CAAkB,iBAAlB,GAAsC,UAAU,KAAV,EAAiB,UAAjB,EAA6B;AAC/D,YAAI,aAAa,eAAe,KAAf,CAAb,EAAoC;AACpC,gBAAI,QAAQ,KAAK,MAAL,CADwB;AAEpC,gBAAI,UAAU,SAAV,EAAqB;AACrB,oBAAI,UAAJ,EAAgB,QAAQ,MAAM,OAAN,CAAxB;aADJ;AAGA,gBAAI,UAAU,SAAV,EAAqB;AACrB,sBAAM,gBAAN,CAAuB,KAAvB,EADqB;aAAzB,MAEO,IAAI,CAAC,MAAM,gBAAN,EAAwB;AAChC,oBAAI,SAAS,cAAc,oBAAd,CAAmC,KAAnC,CAAT,CAD4B;AAEhC,qBAAK,iBAAL,CAAuB,KAAvB,EAA8B,OAA9B,EACI,OAAO,OAAP,GAAiB,IAAjB,GAAwB,OAAO,KAAP,CAAa,IAAb,CAAkB,IAAlB,CAAxB,CADJ,CAFgC;AAIhC,qBAAK,iBAAL,CAAuB,KAAvB,EAA8B,kBAA9B,EAAkD,IAAlD,EAJgC;aAA7B;SAPX;KADkC,CA7FY;;AA8GlD,YAAQ,SAAR,CAAkB,KAAlB,GAA0B,UAAS,OAAT,EAAkB;AACxC,YAAI,UAAU,IAAI,OAAJ,CAAY,OAAZ,CAAV,CADoC;AAExC,YAAI,MAAM,KAAK,YAAL,EAAN,CAFoC;AAGxC,YAAI,GAAJ,EAAS;AACL,gBAAI,gBAAJ,CAAqB,OAArB,EADK;SAAT,MAEO;AACH,gBAAI,SAAS,cAAc,oBAAd,CAAmC,OAAnC,CAAT,CADD;AAEH,oBAAQ,KAAR,GAAgB,OAAO,OAAP,GAAiB,IAAjB,GAAwB,OAAO,KAAP,CAAa,IAAb,CAAkB,IAAlB,CAAxB,CAFb;SAFP;AAMA,sBAAc,iBAAd,CAAgC,OAAhC,EAAyC,EAAzC,EATwC;KAAlB,CA9GwB;;AA0HlD,YAAQ,4BAAR,GAAuC,UAAU,EAAV,EAAc;AACjD,YAAI,SAAS,WAAT,CAD6C;AAEjD,qCACI,OAAO,EAAP,KAAc,UAAd,GAA4B,WAAW,IAAX,GAAkB,EAAlB,GAAuB,OAAO,IAAP,CAAY,EAAZ,CAAvB,GACD,SAD3B,CAH6C;KAAd,CA1HW;;AAiIlD,YAAQ,2BAAR,GAAsC,UAAU,EAAV,EAAc;AAChD,YAAI,SAAS,WAAT,CAD4C;AAEhD,oCACI,OAAO,EAAP,KAAc,UAAd,GAA4B,WAAW,IAAX,GAAkB,EAAlB,GAAuB,OAAO,IAAP,CAAY,EAAZ,CAAvB,GACD,SAD3B,CAH4C;KAAd,CAjIY;;AAwIlD,YAAQ,eAAR,GAA0B,YAAY;AAClC,YAAI,MAAM,eAAN,MACA,cAAc,KAAd,EACH;AACG,kBAAM,IAAI,KAAJ,CAAU,gHAAV,CAAN,CADH;SAFD;AAKA,oBAAY,cAAc,WAAd,EAAZ,CANkC;AAOlC,YAAI,SAAJ,EAAe;AACX,kBAAM,4BAAN,GADW;SAAf;KAPsB,CAxIwB;;AAoJlD,YAAQ,kBAAR,GAA6B,YAAY;AACrC,eAAO,aAAa,cAAc,WAAd,EAAb,CAD8B;KAAZ,CApJqB;;AAwJlD,QAAI,CAAC,cAAc,WAAd,EAAD,EAA8B;AAC9B,gBAAQ,eAAR,GAA0B,YAAU,EAAV,CADI;AAE9B,oBAAY,KAAZ,CAF8B;KAAlC;;AAKA,WAAO,YAAW;AACd,eAAO,SAAP,CADc;KAAX,CA7J2C;CAAjC","file":"debuggability-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, CapturedTrace) {\nvar getDomain = Promise._getDomain;\nvar async = require(\"./async.js\");\nvar Warning = require(\"./errors.js\").Warning;\nvar util = require(\"./util.js\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar debugging = false || (util.isNode &&\n                    (!!process.env[\"BLUEBIRD_DEBUG\"] ||\n                     process.env[\"NODE_ENV\"] === \"development\"));\n\nif (util.isNode && process.env[\"BLUEBIRD_DEBUG\"] == 0) debugging = false;\n\nif (debugging) {\n    async.disableTrampolineIfNecessary();\n}\n\nPromise.prototype._ignoreRejections = function() {\n    this._unsetRejectionIsUnhandled();\n    this._bitField = this._bitField | 16777216;\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 16777216) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    CapturedTrace.fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._getCarriedStackTrace() || this._settledValue;\n        this._setUnhandledRejectionIsNotified();\n        CapturedTrace.fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 524288;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~524288);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 524288) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 2097152;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~2097152);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 2097152) > 0;\n};\n\nPromise.prototype._setCarriedStackTrace = function (capturedTrace) {\n    this._bitField = this._bitField | 1048576;\n    this._fulfillmentHandler0 = capturedTrace;\n};\n\nPromise.prototype._isCarryingStackTrace = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._getCarriedStackTrace = function () {\n    return this._isCarryingStackTrace()\n        ? this._fulfillmentHandler0\n        : undefined;\n};\n\nPromise.prototype._captureStackTrace = function () {\n    if (debugging) {\n        this._trace = new CapturedTrace(this._peekContext());\n    }\n    return this;\n};\n\nPromise.prototype._attachExtraTrace = function (error, ignoreSelf) {\n    if (debugging && canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = CapturedTrace.parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n};\n\nPromise.prototype._warn = function(message) {\n    var warning = new Warning(message);\n    var ctx = this._peekContext();\n    if (ctx) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = CapturedTrace.parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n    CapturedTrace.formatAndLogError(warning, \"\");\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ? fn : domain.bind(fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ? fn : domain.bind(fn))\n                                 : undefined;\n};\n\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() &&\n        debugging === false\n   ) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/DT1qyG\\u000a\");\n    }\n    debugging = CapturedTrace.isSupported();\n    if (debugging) {\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return debugging && CapturedTrace.isSupported();\n};\n\nif (!CapturedTrace.isSupported()) {\n    Promise.longStackTraces = function(){};\n    debugging = false;\n}\n\nreturn function() {\n    return debugging;\n};\n};\n"]}