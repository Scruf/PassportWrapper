{"version":3,"sources":["timers.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UAAS,OAAT,EAAkB,QAAlB,EAA4B;AAC7C,QAAI,OAAO,QAAQ,WAAR,CAAP,CADyC;AAE7C,QAAI,eAAe,QAAQ,YAAR,CAF0B;;AAI7C,QAAI,eAAe,UAAU,OAAV,EAAmB,OAAnB,EAA4B;AAC3C,YAAI,CAAC,QAAQ,SAAR,EAAD,EAAsB,OAA1B;;AAEA,YAAI,GAAJ,CAH2C;AAI3C,YAAG,CAAC,KAAK,WAAL,CAAiB,OAAjB,CAAD,IAA+B,mBAAmB,KAAnB,EAA2B;AACzD,kBAAM,OAAN,CADyD;SAA7D,MAEO;AACH,gBAAI,OAAO,OAAP,KAAmB,QAAnB,EAA6B;AAC7B,0BAAU,qBAAV,CAD6B;aAAjC;AAGA,kBAAM,IAAI,YAAJ,CAAiB,OAAjB,CAAN,CAJG;SAFP;AAQA,aAAK,8BAAL,CAAoC,GAApC,EAZ2C;AAa3C,gBAAQ,iBAAR,CAA0B,GAA1B,EAb2C;AAc3C,gBAAQ,OAAR,CAAgB,GAAhB,EAd2C;KAA5B,CAJ0B;;AAqB7C,QAAI,aAAa,UAAS,KAAT,EAAgB;AAAE,eAAO,MAAM,CAAC,IAAD,CAAN,CAAa,UAAb,CAAwB,KAAxB,CAAP,CAAF;KAAhB,CArB4B;AAsB7C,QAAI,QAAQ,QAAQ,KAAR,GAAgB,UAAU,KAAV,EAAiB,EAAjB,EAAqB;AAC7C,YAAI,OAAO,SAAP,EAAkB;AAClB,iBAAK,KAAL,CADkB;AAElB,oBAAQ,SAAR,CAFkB;AAGlB,gBAAI,MAAM,IAAI,OAAJ,CAAY,QAAZ,CAAN,CAHc;AAIlB,uBAAW,YAAW;AAAE,oBAAI,QAAJ,GAAF;aAAX,EAAgC,EAA3C,EAJkB;AAKlB,mBAAO,GAAP,CALkB;SAAtB;AAOA,aAAK,CAAC,EAAD,CARwC;AAS7C,eAAO,QAAQ,OAAR,CAAgB,KAAhB,EAAuB,KAAvB,CAA6B,UAA7B,EAAyC,IAAzC,EAA+C,IAA/C,EAAqD,EAArD,EAAyD,SAAzD,CAAP,CAT6C;KAArB,CAtBiB;;AAkC7C,YAAQ,SAAR,CAAkB,KAAlB,GAA0B,UAAU,EAAV,EAAc;AACpC,eAAO,MAAM,IAAN,EAAY,EAAZ,CAAP,CADoC;KAAd,CAlCmB;;AAsC7C,aAAS,YAAT,CAAsB,KAAtB,EAA6B;AACzB,YAAI,SAAS,IAAT,CADqB;AAEzB,YAAI,kBAAkB,MAAlB,EAA0B,SAAS,CAAC,MAAD,CAAvC;AACA,qBAAa,MAAb,EAHyB;AAIzB,eAAO,KAAP,CAJyB;KAA7B;;AAOA,aAAS,YAAT,CAAsB,MAAtB,EAA8B;AAC1B,YAAI,SAAS,IAAT,CADsB;AAE1B,YAAI,kBAAkB,MAAlB,EAA0B,SAAS,CAAC,MAAD,CAAvC;AACA,qBAAa,MAAb,EAH0B;AAI1B,cAAM,MAAN,CAJ0B;KAA9B;;AAOA,YAAQ,SAAR,CAAkB,OAAlB,GAA4B,UAAU,EAAV,EAAc,OAAd,EAAuB;AAC/C,aAAK,CAAC,EAAD,CAD0C;AAE/C,YAAI,MAAM,KAAK,IAAL,GAAY,WAAZ,EAAN,CAF2C;AAG/C,YAAI,mBAAJ,GAA0B,IAA1B,CAH+C;AAI/C,YAAI,SAAS,WAAW,SAAS,cAAT,GAA0B;AAC9C,yBAAa,GAAb,EAAkB,OAAlB,EAD8C;SAA1B,EAErB,EAFU,CAAT,CAJ2C;AAO/C,eAAO,IAAI,KAAJ,CAAU,YAAV,EAAwB,YAAxB,EAAsC,SAAtC,EAAiD,MAAjD,EAAyD,SAAzD,CAAP,CAP+C;KAAvB,CApDiB;CAA5B","file":"timers-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = require(\"./util.js\");\nvar TimeoutError = Promise.TimeoutError;\n\nvar afterTimeout = function (promise, message) {\n    if (!promise.isPending()) return;\n    \n    var err;\n    if(!util.isPrimitive(message) && (message instanceof Error)) {\n        err = message;\n    } else {\n        if (typeof message !== \"string\") {\n            message = \"operation timed out\";\n        }\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._cancel(err);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (value, ms) {\n    if (ms === undefined) {\n        ms = value;\n        value = undefined;\n        var ret = new Promise(INTERNAL);\n        setTimeout(function() { ret._fulfill(); }, ms);\n        return ret;\n    }\n    ms = +ms;\n    return Promise.resolve(value)._then(afterValue, null, null, ms, undefined);\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(this, ms);\n};\n\nfunction successClear(value) {\n    var handle = this;\n    if (handle instanceof Number) handle = +handle;\n    clearTimeout(handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    var handle = this;\n    if (handle instanceof Number) handle = +handle;\n    clearTimeout(handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret = this.then().cancellable();\n    ret._cancellationParent = this;\n    var handle = setTimeout(function timeoutTimeout() {\n        afterTimeout(ret, message);\n    }, ms);\n    return ret._then(successClear, failureClear, undefined, handle, undefined);\n};\n\n};\n"]}