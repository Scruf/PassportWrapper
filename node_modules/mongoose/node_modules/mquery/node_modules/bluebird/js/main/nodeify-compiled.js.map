{"version":3,"sources":["nodeify.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UAAS,OAAT,EAAkB;AACnC,QAAI,OAAO,QAAQ,WAAR,CAAP,CAD+B;AAEnC,QAAI,QAAQ,QAAQ,YAAR,CAAR,CAF+B;AAGnC,QAAI,WAAW,KAAK,QAAL,CAHoB;AAInC,QAAI,WAAW,KAAK,QAAL,CAJoB;;AAMnC,aAAS,aAAT,CAAuB,GAAvB,EAA4B,QAA5B,EAAsC;AAClC,YAAI,UAAU,IAAV,CAD8B;AAElC,YAAI,CAAC,KAAK,OAAL,CAAa,GAAb,CAAD,EAAoB,OAAO,eAAe,IAAf,CAAoB,OAApB,EAA6B,GAA7B,EAAkC,QAAlC,CAAP,CAAxB;AACA,YAAI,MACA,SAAS,QAAT,EAAmB,KAAnB,CAAyB,QAAQ,WAAR,EAAzB,EAAgD,CAAC,IAAD,EAAO,MAAP,CAAc,GAAd,CAAhD,CADA,CAH8B;AAKlC,YAAI,QAAQ,QAAR,EAAkB;AAClB,kBAAM,UAAN,CAAiB,IAAI,CAAJ,CAAjB,CADkB;SAAtB;KALJ;;AAUA,aAAS,cAAT,CAAwB,GAAxB,EAA6B,QAA7B,EAAuC;AACnC,YAAI,UAAU,IAAV,CAD+B;AAEnC,YAAI,WAAW,QAAQ,WAAR,EAAX,CAF+B;AAGnC,YAAI,MAAM,QAAQ,SAAR,GACJ,SAAS,QAAT,EAAmB,IAAnB,CAAwB,QAAxB,EAAkC,IAAlC,CADI,GAEJ,SAAS,QAAT,EAAmB,IAAnB,CAAwB,QAAxB,EAAkC,IAAlC,EAAwC,GAAxC,CAFI,CAHyB;AAMnC,YAAI,QAAQ,QAAR,EAAkB;AAClB,kBAAM,UAAN,CAAiB,IAAI,CAAJ,CAAjB,CADkB;SAAtB;KANJ;AAUA,aAAS,YAAT,CAAsB,MAAtB,EAA8B,QAA9B,EAAwC;AACpC,YAAI,UAAU,IAAV,CADgC;AAEpC,YAAI,CAAC,MAAD,EAAS;AACT,gBAAI,SAAS,QAAQ,OAAR,EAAT,CADK;AAET,gBAAI,YAAY,OAAO,qBAAP,EAAZ,CAFK;AAGT,sBAAU,KAAV,GAAkB,MAAlB,CAHS;AAIT,qBAAS,SAAT,CAJS;SAAb;AAMA,YAAI,MAAM,SAAS,QAAT,EAAmB,IAAnB,CAAwB,QAAQ,WAAR,EAAxB,EAA+C,MAA/C,CAAN,CARgC;AASpC,YAAI,QAAQ,QAAR,EAAkB;AAClB,kBAAM,UAAN,CAAiB,IAAI,CAAJ,CAAjB,CADkB;SAAtB;KATJ;;AAcA,YAAQ,SAAR,CAAkB,UAAlB,GACA,QAAQ,SAAR,CAAkB,OAAlB,GAA4B,UAAU,QAAV,EAAoB,OAApB,EAA6B;AACrD,YAAI,OAAO,QAAP,IAAmB,UAAnB,EAA+B;AAC/B,gBAAI,UAAU,cAAV,CAD2B;AAE/B,gBAAI,YAAY,SAAZ,IAAyB,OAAO,OAAP,EAAgB,MAAhB,EAAwB;AACjD,0BAAU,aAAV,CADiD;aAArD;AAGA,iBAAK,KAAL,CACI,OADJ,EAEI,YAFJ,EAGI,SAHJ,EAII,IAJJ,EAKI,QALJ,EAL+B;SAAnC;AAaA,eAAO,IAAP,CAdqD;KAA7B,CAzCO;CAAlB","file":"nodeify-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise) {\nvar util = require(\"./util.js\");\nvar async = require(\"./async.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var target = promise._target();\n        var newReason = target._getCarriedStackTrace();\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback =\nPromise.prototype.nodeify = function (nodeback, options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n"]}