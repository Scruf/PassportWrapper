{"version":3,"sources":["progress.js"],"names":[],"mappings":"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","file":"progress-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, PromiseArray) {\nvar util = require(\"./util.js\");\nvar async = require(\"./async.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nPromise.prototype.progressed = function (handler) {\n    return this._then(undefined, undefined, handler, undefined, undefined);\n};\n\nPromise.prototype._progress = function (progressValue) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    this._target()._progressUnchecked(progressValue);\n\n};\n\nPromise.prototype._progressHandlerAt = function (index) {\n    return index === 0\n        ? this._progressHandler0\n        : this[(index << 2) + index - 5 + 2];\n};\n\nPromise.prototype._doProgressWith = function (progression) {\n    var progressValue = progression.value;\n    var handler = progression.handler;\n    var promise = progression.promise;\n    var receiver = progression.receiver;\n\n    var ret = tryCatch(handler).call(receiver, progressValue);\n    if (ret === errorObj) {\n        if (ret.e != null &&\n            ret.e.name !== \"StopProgressPropagation\") {\n            var trace = util.canAttachTrace(ret.e)\n                ? ret.e : new Error(util.toString(ret.e));\n            promise._attachExtraTrace(trace);\n            promise._progress(ret.e);\n        }\n    } else if (ret instanceof Promise) {\n        ret._then(promise._progress, null, null, promise, undefined);\n    } else {\n        promise._progress(ret);\n    }\n};\n\n\nPromise.prototype._progressUnchecked = function (progressValue) {\n    var len = this._length();\n    var progress = this._progress;\n    for (var i = 0; i < len; i++) {\n        var handler = this._progressHandlerAt(i);\n        var promise = this._promiseAt(i);\n        if (!(promise instanceof Promise)) {\n            var receiver = this._receiverAt(i);\n            if (typeof handler === \"function\") {\n                handler.call(receiver, progressValue, promise);\n            } else if (receiver instanceof PromiseArray &&\n                       !receiver._isResolved()) {\n                receiver._promiseProgressed(progressValue, promise);\n            }\n            continue;\n        }\n\n        if (typeof handler === \"function\") {\n            async.invoke(this._doProgressWith, this, {\n                handler: handler,\n                promise: promise,\n                receiver: this._receiverAt(i),\n                value: progressValue\n            });\n        } else {\n            async.invoke(progress, promise, progressValue);\n        }\n    }\n};\n};\n"]}