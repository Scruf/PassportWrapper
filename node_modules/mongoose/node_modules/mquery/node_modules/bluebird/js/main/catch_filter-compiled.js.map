{"version":3,"sources":["catch_filter.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UAAS,WAAT,EAAsB;AACvC,QAAI,OAAO,QAAQ,WAAR,CAAP,CADmC;AAEvC,QAAI,SAAS,QAAQ,aAAR,CAAT,CAFmC;AAGvC,QAAI,WAAW,KAAK,QAAL,CAHwB;AAIvC,QAAI,WAAW,KAAK,QAAL,CAJwB;AAKvC,QAAI,OAAO,QAAQ,UAAR,EAAoB,IAApB,CAL4B;AAMvC,QAAI,YAAY,OAAO,SAAP,CANuB;;AAQvC,aAAS,WAAT,CAAqB,SAArB,EAAgC,QAAhC,EAA0C,OAA1C,EAAmD;AAC/C,aAAK,UAAL,GAAkB,SAAlB,CAD+C;AAE/C,aAAK,SAAL,GAAiB,QAAjB,CAF+C;AAG/C,aAAK,QAAL,GAAgB,OAAhB,CAH+C;KAAnD;;AAMA,aAAS,aAAT,CAAuB,SAAvB,EAAkC,CAAlC,EAAqC;AACjC,YAAI,aAAa,EAAb,CAD6B;AAEjC,YAAI,YAAY,SAAS,SAAT,EAAoB,IAApB,CAAyB,UAAzB,EAAqC,CAArC,CAAZ,CAF6B;;AAIjC,YAAI,cAAc,QAAd,EAAwB,OAAO,SAAP,CAA5B;;AAEA,YAAI,WAAW,KAAK,UAAL,CAAX,CAN6B;AAOjC,YAAI,SAAS,MAAT,EAAiB;AACjB,qBAAS,CAAT,GAAa,IAAI,SAAJ,CAAc,sHAAd,CAAb,CADiB;AAEjB,mBAAO,QAAP,CAFiB;SAArB;AAIA,eAAO,SAAP,CAXiC;KAArC;;AAcA,gBAAY,SAAZ,CAAsB,QAAtB,GAAiC,UAAU,CAAV,EAAa;AAC1C,YAAI,KAAK,KAAK,SAAL,CADiC;AAE1C,YAAI,UAAU,KAAK,QAAL,CAF4B;AAG1C,YAAI,UAAU,QAAQ,WAAR,EAAV,CAHsC;AAI1C,aAAK,IAAI,IAAI,CAAJ,EAAO,MAAM,KAAK,UAAL,CAAgB,MAAhB,EAAwB,IAAI,GAAJ,EAAS,EAAE,CAAF,EAAK;AACxD,gBAAI,OAAO,KAAK,UAAL,CAAgB,CAAhB,CAAP,CADoD;AAExD,gBAAI,kBAAkB,SAAS,KAAT,IACjB,QAAQ,IAAR,IAAgB,KAAK,SAAL,YAA0B,KAA1B,CAHmC;;AAKxD,gBAAI,mBAAmB,aAAa,IAAb,EAAmB;AACtC,oBAAI,MAAM,SAAS,EAAT,EAAa,IAAb,CAAkB,OAAlB,EAA2B,CAA3B,CAAN,CADkC;AAEtC,oBAAI,QAAQ,QAAR,EAAkB;AAClB,gCAAY,CAAZ,GAAgB,IAAI,CAAJ,CADE;AAElB,2BAAO,WAAP,CAFkB;iBAAtB;AAIA,uBAAO,GAAP,CANsC;aAA1C,MAOO,IAAI,OAAO,IAAP,KAAgB,UAAhB,IAA8B,CAAC,eAAD,EAAkB;AACvD,oBAAI,eAAe,cAAc,IAAd,EAAoB,CAApB,CAAf,CADmD;AAEvD,oBAAI,iBAAiB,QAAjB,EAA2B;AAC3B,wBAAI,SAAS,CAAT,CADuB;AAE3B,0BAF2B;iBAA/B,MAGO,IAAI,YAAJ,EAAkB;AACrB,wBAAI,MAAM,SAAS,EAAT,EAAa,IAAb,CAAkB,OAAlB,EAA2B,CAA3B,CAAN,CADiB;AAErB,wBAAI,QAAQ,QAAR,EAAkB;AAClB,oCAAY,CAAZ,GAAgB,IAAI,CAAJ,CADE;AAElB,+BAAO,WAAP,CAFkB;qBAAtB;AAIA,2BAAO,GAAP,CANqB;iBAAlB;aALJ;SAZX;AA2BA,oBAAY,CAAZ,GAAgB,CAAhB,CA/B0C;AAgC1C,eAAO,WAAP,CAhC0C;KAAb,CA5BM;;AA+DvC,WAAO,WAAP,CA/DuC;CAAtB","file":"catch_filter-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = require(\"./util.js\");\nvar errors = require(\"./errors.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar keys = require(\"./es5.js\").keys;\nvar TypeError = errors.TypeError;\n\nfunction CatchFilter(instances, callback, promise) {\n    this._instances = instances;\n    this._callback = callback;\n    this._promise = promise;\n}\n\nfunction safePredicate(predicate, e) {\n    var safeObject = {};\n    var retfilter = tryCatch(predicate).call(safeObject, e);\n\n    if (retfilter === errorObj) return retfilter;\n\n    var safeKeys = keys(safeObject);\n    if (safeKeys.length) {\n        errorObj.e = new TypeError(\"Catch filter must inherit from Error or be a simple predicate function\\u000a\\u000a    See http://goo.gl/o84o68\\u000a\");\n        return errorObj;\n    }\n    return retfilter;\n}\n\nCatchFilter.prototype.doFilter = function (e) {\n    var cb = this._callback;\n    var promise = this._promise;\n    var boundTo = promise._boundValue();\n    for (var i = 0, len = this._instances.length; i < len; ++i) {\n        var item = this._instances[i];\n        var itemIsErrorType = item === Error ||\n            (item != null && item.prototype instanceof Error);\n\n        if (itemIsErrorType && e instanceof item) {\n            var ret = tryCatch(cb).call(boundTo, e);\n            if (ret === errorObj) {\n                NEXT_FILTER.e = ret.e;\n                return NEXT_FILTER;\n            }\n            return ret;\n        } else if (typeof item === \"function\" && !itemIsErrorType) {\n            var shouldHandle = safePredicate(item, e);\n            if (shouldHandle === errorObj) {\n                e = errorObj.e;\n                break;\n            } else if (shouldHandle) {\n                var ret = tryCatch(cb).call(boundTo, e);\n                if (ret === errorObj) {\n                    NEXT_FILTER.e = ret.e;\n                    return NEXT_FILTER;\n                }\n                return ret;\n            }\n        }\n    }\n    NEXT_FILTER.e = e;\n    return NEXT_FILTER;\n};\n\nreturn CatchFilter;\n};\n"]}