{"version":3,"sources":["generators.js"],"names":[],"mappings":"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","file":"generators-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise) {\nvar errors = require(\"./errors.js\");\nvar TypeError = errors.TypeError;\nvar util = require(\"./util.js\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    var promise = this._promise = new Promise(INTERNAL);\n    promise._captureStackTrace();\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n}\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._next(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    if (result === errorObj) {\n        return this._promise._rejectCallback(result.e, false, true);\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._promise._resolveCallback(value);\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._throw(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/4Y4pDk\\u000a\\u000a\".replace(\"%s\", value) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise._then(\n            this._next,\n            this._throw,\n            undefined,\n            this,\n            null\n       );\n    }\n};\n\nPromiseSpawn.prototype._throw = function (reason) {\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._next = function (value) {\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/6Vqhm0\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        spawn._generator = generator;\n        spawn._next(undefined);\n        return spawn.promise();\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") throw new TypeError(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/6Vqhm0\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n"]}