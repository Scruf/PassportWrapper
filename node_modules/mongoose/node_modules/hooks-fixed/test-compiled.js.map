{"version":3,"sources":["test.js"],"names":[],"mappings":"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","file":"test-compiled.js","sourcesContent":["var hooks = require('./hooks')\n  , should = require('should')\n  , assert = require('assert')\n  , _ = require('underscore');\n\n// TODO Add in test for making sure all pres get called if pre is defined directly on an instance.\n// TODO Test for calling `done` twice or `next` twice in the same function counts only once\nmodule.exports = {\n  'should be able to assign multiple hooks at once': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook({\n      hook1: function (a) {},\n      hook2: function (b) {}\n    });\n    var a = new A();\n    assert.equal(typeof a.hook1, 'function');\n    assert.equal(typeof a.hook2, 'function');\n  },\n  'should run without pres and posts when not present': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    });\n    var a = new A();\n    a.save();\n    a.value.should.equal(1);\n  },\n  'should run with pres when present': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    });\n    A.pre('save', function (next) {\n      this.preValue = 2;\n      next();\n    });\n    var a = new A();\n    a.save();\n    a.value.should.equal(1);\n    a.preValue.should.equal(2);\n  },\n  'should run with posts when present': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    });\n    A.post('save', function (next) {\n      this.value = 2;\n      next();\n    });\n    var a = new A();\n    a.save();\n    a.value.should.equal(2);\n  },\n  'should run pres and posts when present': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    });\n    A.pre('save', function (next) {\n      this.preValue = 2;\n      next();\n    });\n    A.post('save', function (next) {\n      this.value = 3;\n      next();\n    });\n    var a = new A();\n    a.save();\n    a.value.should.equal(3);\n    a.preValue.should.equal(2);\n  },\n  'should run posts after pres': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    });\n    A.pre('save', function (next) {\n      this.override = 100;\n      next();\n    });\n    A.post('save', function (next) {\n      this.override = 200;\n      next();\n    });\n    var a = new A();\n    a.save();\n    a.value.should.equal(1);\n    a.override.should.equal(200);\n  },\n  'should not run a hook if a pre fails': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    var counter = 0;\n    A.hook('save', function () {\n      this.value = 1;\n    }, function (err) {\n      counter++;\n    });\n    A.pre('save', true, function (next, done) {\n      next(new Error());\n    });\n    var a = new A();\n    a.save();\n    counter.should.equal(1);\n    assert.equal(typeof a.value, 'undefined');\n  },\n  'should be able to run multiple pres': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    });\n    A.pre('save', function (next) {\n      this.v1 = 1;\n      next();\n    }).pre('save', function (next) {\n      this.v2 = 2;\n      next();\n    });\n    var a = new A();\n    a.save();\n    a.v1.should.equal(1);\n    a.v2.should.equal(2);\n  },\n  'should run multiple pres until a pre fails and not call the hook': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    }, function (err) {});\n    A.pre('save', function (next) {\n      this.v1 = 1;\n      next();\n    }).pre('save', function (next) {\n      next(new Error());\n    }).pre('save', function (next) {\n      this.v3 = 3;\n      next();\n    });\n    var a = new A();\n    a.save();\n    a.v1.should.equal(1);\n    assert.equal(typeof a.v3, 'undefined');\n    assert.equal(typeof a.value, 'undefined');\n  },\n  'should be able to run multiple posts': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    });\n    A.post('save', function (next) {\n      this.value = 2;\n      next();\n    }).post('save', function (next) {\n      this.value = 3.14;\n      next();\n    }).post('save', function (next) {\n      this.v3 = 3;\n      next();\n    });\n    var a = new A();\n    a.save();\n    assert.equal(a.value, 3.14);\n    assert.equal(a.v3, 3);\n  },\n  'should run only posts up until an error': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    }, function (err) {});\n    A.post('save', function (next) {\n      this.value = 2;\n      next();\n    }).post('save', function (next) {\n      this.value = 3;\n      next(new Error());\n    }).post('save', function (next) {\n      this.value = 4;\n      next();\n    });\n    var a = new A();\n    a.save();\n    a.value.should.equal(3);\n  },\n  \"should fall back first to the hook method's last argument as the error handler if it is a function of arity 1 or 2\": function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    var counter = 0;\n    A.hook('save', function (callback) {\n      this.value = 1;\n    });\n    A.pre('save', true, function (next, done) {\n      next(new Error());\n    });\n    var a = new A();\n    a.save( function (err) {\n      if (err instanceof Error) counter++;\n    });\n    counter.should.equal(1);\n    should.deepEqual(undefined, a.value);\n  },\n  'should fall back second to the default error handler if specified': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    var counter = 0;\n    A.hook('save', function (callback) {\n      this.value = 1;\n    }, function (err) {\n      if (err instanceof Error) counter++;\n    });\n    A.pre('save', true, function (next, done) {\n      next(new Error());\n    });\n    var a = new A();\n    a.save();\n    counter.should.equal(1);\n    should.deepEqual(undefined, a.value);\n  },\n  'fallback default error handler should scope to the object': function () {\n    var A = function () {\n      this.counter = 0;\n    };\n    _.extend(A, hooks);\n    var counter = 0;\n    A.hook('save', function (callback) {\n      this.value = 1;\n    }, function (err) {\n      if (err instanceof Error) this.counter++;\n    });\n    A.pre('save', true, function (next, done) {\n      next(new Error());\n    });\n    var a = new A();\n    a.save();\n    a.counter.should.equal(1);\n    should.deepEqual(undefined, a.value);\n  },\n  'should fall back last to throwing the error': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    var counter = 0;\n    A.hook('save', function (err) {\n      if (err instanceof Error) return counter++;\n      this.value = 1;\n    });\n    A.pre('save', true, function (next, done) {\n      next(new Error());\n    });\n    var a = new A();\n    var didCatch = false;\n    try {\n      a.save();\n    } catch (e) {\n      didCatch = true;\n      e.should.be.an.instanceof(Error);\n      counter.should.equal(0);\n      assert.equal(typeof a.value, 'undefined');\n    }\n    didCatch.should.be.true;\n  },\n  \"should proceed without mutating arguments if `next(null|undefined)` is called in a serial pre, and the last argument of the target method is a callback with node-like signature function (err, obj) {...} or function (err) {...}\": function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    var counter = 0;\n    A.prototype.save = function (callback) {\n      this.value = 1;\n      callback();\n    };\n    A.pre('save', function (next) {\n      next(null);\n    });\n    A.pre('save', function (next) {\n      next(undefined);\n    });\n    var a = new A();\n    a.save( function (err) {\n      if (err instanceof Error) counter++;\n      else counter--;\n    });\n    counter.should.equal(-1);\n    a.value.should.eql(1);\n  },\n  \"should proceed with mutating arguments if `next(null|undefined)` is callback in a serial pre, and the last argument of the target method is not a function\": function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.prototype.set = function (v) {\n      this.value = v;\n    };\n    A.pre('set', function (next) {\n      next(undefined);\n    });\n    A.pre('set', function (next) {\n      next(null);\n    });\n    var a = new A();\n    a.set(1);\n    should.strictEqual(null, a.value);\n  },\n  'should not run any posts if a pre fails': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 2;\n    }, function (err) {});\n    A.pre('save', function (next) {\n      this.value = 1;\n      next(new Error());\n    }).post('save', function (next) {\n      this.value = 3;\n      next();\n    });\n    var a = new A();\n    a.save();\n    a.value.should.equal(1);\n  },\n\n  \"can pass the hook's arguments verbatim to pres\": function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('set', function (path, val) {\n      this[path] = val;\n    });\n    A.pre('set', function (next, path, val) {\n      path.should.equal('hello');\n      val.should.equal('world');\n      next();\n    });\n    var a = new A();\n    a.set('hello', 'world');\n    a.hello.should.equal('world');\n  },\n//  \"can pass the hook's arguments as an array to pres\": function () {\n//    // Great for dynamic arity - e.g., slice(...)\n//    var A = function () {};\n//    _.extend(A, hooks);\n//    A.hook('set', function (path, val) {\n//      this[path] = val;\n//    });\n//    A.pre('set', function (next, hello, world) {\n//      hello.should.equal('hello');\n//      world.should.equal('world');\n//      next();\n//    });\n//    var a = new A();\n//    a.set('hello', 'world');\n//    assert.equal(a.hello, 'world');\n//  },\n  \"can pass the hook's arguments verbatim to posts\": function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('set', function (path, val) {\n      this[path] = val;\n    });\n    A.post('set', function (next, path, val) {\n      path.should.equal('hello');\n      val.should.equal('world');\n      next();\n    });\n    var a = new A();\n    a.set('hello', 'world');\n    assert.equal(a.hello, 'world');\n  },\n//  \"can pass the hook's arguments as an array to posts\": function () {\n//    var A = function () {};\n//    _.extend(A, hooks);\n//    A.hook('set', function (path, val) {\n//      this[path] = val;\n//    });\n//    A.post('set', function (next, halt, args) {\n//      assert.equal(args[0], 'hello');\n//      assert.equal(args[1], 'world');\n//      next();\n//    });\n//    var a = new A();\n//    a.set('hello', 'world');\n//    assert.equal(a.hello, 'world');\n//  },\n  \"pres should be able to modify and pass on a modified version of the hook's arguments\": function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('set', function (path, val) {\n      this[path] = val;\n      assert.equal(arguments[2], 'optional');\n    });\n    A.pre('set', function (next, path, val) {\n      next('foo', 'bar');\n    });\n    A.pre('set', function (next, path, val) {\n      assert.equal(path, 'foo');\n      assert.equal(val, 'bar');\n      next('rock', 'says', 'optional');\n    });\n    A.pre('set', function (next, path, val, opt) {\n      assert.equal(path, 'rock');\n      assert.equal(val, 'says');\n      assert.equal(opt, 'optional');\n      next();\n    });\n    var a = new A();\n    a.set('hello', 'world');\n    assert.equal(typeof a.hello, 'undefined');\n    a.rock.should.equal('says');\n  },\n  'posts should see the modified version of arguments if the pres modified them': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('set', function (path, val) {\n      this[path] = val;\n    });\n    A.pre('set', function (next, path, val) {\n      next('foo', 'bar');\n    });\n    A.post('set', function (next, path, val) {\n      path.should.equal('foo');\n      val.should.equal('bar');\n    });\n    var a = new A();\n    a.set('hello', 'world');\n    assert.equal(typeof a.hello, 'undefined');\n    a.foo.should.equal('bar');\n  },\n  'should pad missing arguments (relative to expected arguments of the hook) with null': function () {\n    // Otherwise, with hookFn = function (a, b, next, ),\n    // if we use hookFn(a), then because the pre functions are of the form\n    // preFn = function (a, b, next, ), then it actually gets executed with\n    // preFn(a, next, ), so when we call next() from within preFn, we are actually\n    // calling ()\n\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('set', function (path, val, opts) {\n      this[path] = val;\n    });\n    A.pre('set', function (next, path, val, opts) {\n      next('foo', 'bar');\n      assert.equal(typeof opts, 'undefined');\n    });\n    var a = new A();\n    a.set('hello', 'world');\n  },\n\n  'should not invoke the target method until all asynchronous middleware have invoked dones': function () {\n    var counter = 0;\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('set', function (path, val) {\n      counter++;\n      this[path] = val;\n      counter.should.equal(7);\n    });\n    A.pre('set', function (next, path, val) {\n      counter++;\n      next();\n    });\n    A.pre('set', true, function (next, done, path, val) {\n      counter++;\n      setTimeout(function () {\n        counter++;\n        done();\n      }, 1000);\n      next();\n    });\n    A.pre('set', function (next, path, val) {\n      counter++;\n      next();\n    });\n    A.pre('set', true, function (next, done, path, val) {\n      counter++;\n      setTimeout(function () {\n        counter++;\n        done();\n      }, 500);\n      next();\n    });\n    var a = new A();\n    a.set('hello', 'world');\n  },\n\n  'invoking a method twice should run its async middleware twice': function () {\n    var counter = 0;\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('set', function (path, val) {\n      this[path] = val;\n      if (path === 'hello') counter.should.equal(1);\n      if (path === 'foo') counter.should.equal(2);\n    });\n    A.pre('set', true, function (next, done, path, val) {\n      setTimeout(function () {\n        counter++;\n        done();\n      }, 1000);\n      next();\n    });\n    var a = new A();\n    a.set('hello', 'world');\n    a.set('foo', 'bar');\n  },\n\n  'calling the same done multiple times should have the effect of only calling it once': function () {\n    var A = function () {\n      this.acked = false;\n    };\n    _.extend(A, hooks);\n    A.hook('ack', function () {\n      console.log(\"UH OH, YOU SHOULD NOT BE SEEING THIS\");\n      this.acked = true;\n    });\n    A.pre('ack', true, function (next, done) {\n      next();\n      done();\n      done();\n    });\n    A.pre('ack', true, function (next, done) {\n      next();\n      // Notice that done() is not invoked here\n    });\n    var a = new A();\n    a.ack();\n    setTimeout( function () {\n      a.acked.should.be.false;\n    }, 1000);\n  },\n\n  'calling the same next multiple times should have the effect of only calling it once': function (beforeExit) {\n    var A = function () {\n      this.acked = false;\n    };\n    _.extend(A, hooks);\n    A.hook('ack', function () {\n      console.log(\"UH OH, YOU SHOULD NOT BE SEEING THIS\");\n      this.acked = true;\n    });\n    A.pre('ack', function (next) {\n      // force a throw to re-exec next()\n      try {\n        next(new Error('bam'));\n      } catch (err) {\n        next();\n      }\n    });\n    A.pre('ack', function (next) {\n      next();\n    });\n    var a = new A();\n    a.ack();\n    beforeExit( function () {\n      a.acked.should.be.false;\n    });\n  },\n\n  'asynchronous middleware should be able to pass an error via `done`, stopping the middleware chain': function () {\n    var counter = 0;\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('set', function (path, val, fn) {\n      counter++;\n      this[path] = val;\n      fn(null);\n    });\n    A.pre('set', true, function (next, done, path, val, fn) {\n      setTimeout(function () {\n        counter++;\n        done(new Error);\n      }, 1000);\n      next();\n    });\n    var a = new A();\n    a.set('hello', 'world', function (err) {\n      err.should.be.an.instanceof(Error);\n      should.strictEqual(undefined, a['hello']);\n      counter.should.eql(1);\n    });\n  },\n\n  'should be able to remove a particular pre': function () {\n    var A = function () {}\n      , preTwo;\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    });\n    A.pre('save', function (next) {\n      this.preValueOne = 2;\n      next();\n    });\n    A.pre('save', preTwo = function (next) {\n      this.preValueTwo = 4;\n      next();\n    });\n    A.removePre('save', preTwo);\n    var a = new A();\n    a.save();\n    a.value.should.equal(1);\n    a.preValueOne.should.equal(2);\n    should.strictEqual(undefined, a.preValueTwo);\n  },\n\n  'should be able to remove all pres associated with a hook': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    });\n    A.pre('save', function (next) {\n      this.preValueOne = 2;\n      next();\n    });\n    A.pre('save', function (next) {\n      this.preValueTwo = 4;\n      next();\n    });\n    A.removePre('save');\n    var a = new A();\n    a.save();\n    a.value.should.equal(1);\n    should.strictEqual(undefined, a.preValueOne);\n    should.strictEqual(undefined, a.preValueTwo);\n  },\n\n  'should be able to remove a particular post': function () {\n    var A = function () {}\n      , postTwo;\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    });\n    A.post('save', function (next) {\n      this.postValueOne = 2;\n      next();\n    });\n    A.post('save', postTwo = function (next) {\n      this.postValueTwo = 4;\n      next();\n    });\n    A.removePost('save', postTwo);\n    var a = new A();\n    a.save();\n    a.value.should.equal(1);\n    a.postValueOne.should.equal(2);\n    should.strictEqual(undefined, a.postValueTwo);\n  },\n\n  'should be able to remove all posts associated with a hook': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function () {\n      this.value = 1;\n    });\n    A.post('save', function (next) {\n      this.postValueOne = 2;\n      next();\n    });\n    A.post('save', function (next) {\n      this.postValueTwo = 4;\n      next();\n    });\n    A.removePost('save');\n    var a = new A();\n    a.save();\n    a.value.should.equal(1);\n    should.strictEqual(undefined, a.postValueOne);\n    should.strictEqual(undefined, a.postValueTwo);\n  },\n\n  '#pre should lazily make a method hookable': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.prototype.save = function () {\n      this.value = 1;\n    };\n    A.pre('save', function (next) {\n      this.preValue = 2;\n      next();\n    });\n    var a = new A();\n    a.save();\n    a.value.should.equal(1);\n    a.preValue.should.equal(2);\n  },\n\n  '#pre lazily making a method hookable should be able to provide a default errorHandler as the last argument': function () {\n    var A = function () {};\n    var preValue = \"\";\n    _.extend(A, hooks);\n    A.prototype.save = function () {\n      this.value = 1;\n    };\n    A.pre('save', function (next) {\n      next(new Error);\n    }, function (err) {\n      preValue = 'ERROR';\n    });\n    var a = new A();\n    a.save();\n    should.strictEqual(undefined, a.value);\n    preValue.should.equal('ERROR');\n  },\n\n  '#post should lazily make a method hookable': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.prototype.save = function () {\n      this.value = 1;\n    };\n    A.post('save', function (next) {\n      this.value = 2;\n      next();\n    });\n    var a = new A();\n    a.save();\n    a.value.should.equal(2);\n  },\n\n  \"a lazy hooks setup should handle errors via a method's last argument, if it's a callback\": function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.prototype.save = function (fn) {};\n    A.pre('save', function (next) {\n      next(new Error(\"hi there\"));\n    });\n    var a = new A();\n    a.save( function (err) {\n      err.should.be.an.instanceof(Error);\n    });\n  },\n\n  'should intercept method callbacks for post handlers': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function (val, callback) {\n      this.value = val;\n      callback();\n    });\n    A.post('save', function (next) {\n      assert.equal(a.value, 2);\n      this.value += 2;\n      setTimeout(next, 10);\n    }).post('save', function (next) {\n      assert.equal(a.value, 4);\n      this.value += 3;\n      setTimeout(next, 10);\n    }).post('save', function (next) {\n      assert.equal(a.value, 7);\n      this.value2 = 3;\n      setTimeout(next, 10);\n    });\n    var a = new A();\n    a.save(2, function(){\n      assert.equal(a.value, 7);\n      assert.equal(a.value2, 3);\n    });\n  },\n\n  'should handle parallel followed by serial': function () {\n    var A = function () {};\n    _.extend(A, hooks);\n    A.hook('save', function (val, callback) {\n      this.value = val;\n      callback();\n    });\n    A.pre('save', true, function(next, done) {\n      process.nextTick(function() {\n        done();\n      });\n      next();\n    }).pre('save', function(done) {\n      process.nextTick(function() {\n        done();\n      });\n    });\n    var a = new A();\n    a.save(2, function(){\n      assert.ok(true);\n    });\n  }\n};\n"]}