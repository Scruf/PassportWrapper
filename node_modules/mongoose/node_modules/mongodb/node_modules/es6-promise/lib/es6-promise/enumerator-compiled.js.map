{"version":3,"sources":["enumerator.js"],"names":[],"mappings":"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","file":"enumerator-compiled.js","sourcesContent":["import {\n  isArray,\n  isMaybeThenable\n} from './utils';\n\nimport {\n  noop,\n  reject,\n  fulfill,\n  subscribe,\n  FULFILLED,\n  REJECTED,\n  PENDING\n} from './-internal';\n\nfunction Enumerator(Constructor, input) {\n  var enumerator = this;\n\n  enumerator._instanceConstructor = Constructor;\n  enumerator.promise = new Constructor(noop);\n\n  if (enumerator._validateInput(input)) {\n    enumerator._input     = input;\n    enumerator.length     = input.length;\n    enumerator._remaining = input.length;\n\n    enumerator._init();\n\n    if (enumerator.length === 0) {\n      fulfill(enumerator.promise, enumerator._result);\n    } else {\n      enumerator.length = enumerator.length || 0;\n      enumerator._enumerate();\n      if (enumerator._remaining === 0) {\n        fulfill(enumerator.promise, enumerator._result);\n      }\n    }\n  } else {\n    reject(enumerator.promise, enumerator._validationError());\n  }\n}\n\nEnumerator.prototype._validateInput = function(input) {\n  return isArray(input);\n};\n\nEnumerator.prototype._validationError = function() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nEnumerator.prototype._init = function() {\n  this._result = new Array(this.length);\n};\n\nexport default Enumerator;\n\nEnumerator.prototype._enumerate = function() {\n  var enumerator = this;\n\n  var length  = enumerator.length;\n  var promise = enumerator.promise;\n  var input   = enumerator._input;\n\n  for (var i = 0; promise._state === PENDING && i < length; i++) {\n    enumerator._eachEntry(input[i], i);\n  }\n};\n\nEnumerator.prototype._eachEntry = function(entry, i) {\n  var enumerator = this;\n  var c = enumerator._instanceConstructor;\n\n  if (isMaybeThenable(entry)) {\n    if (entry.constructor === c && entry._state !== PENDING) {\n      entry._onerror = null;\n      enumerator._settledAt(entry._state, i, entry._result);\n    } else {\n      enumerator._willSettleAt(c.resolve(entry), i);\n    }\n  } else {\n    enumerator._remaining--;\n    enumerator._result[i] = entry;\n  }\n};\n\nEnumerator.prototype._settledAt = function(state, i, value) {\n  var enumerator = this;\n  var promise = enumerator.promise;\n\n  if (promise._state === PENDING) {\n    enumerator._remaining--;\n\n    if (state === REJECTED) {\n      reject(promise, value);\n    } else {\n      enumerator._result[i] = value;\n    }\n  }\n\n  if (enumerator._remaining === 0) {\n    fulfill(promise, enumerator._result);\n  }\n};\n\nEnumerator.prototype._willSettleAt = function(promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function(value) {\n    enumerator._settledAt(FULFILLED, i, value);\n  }, function(reason) {\n    enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n"]}