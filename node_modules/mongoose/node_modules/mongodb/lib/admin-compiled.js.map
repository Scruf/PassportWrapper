{"version":3,"sources":["admin.js"],"names":[],"mappings":"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","file":"admin-compiled.js","sourcesContent":["\"use strict\";\n\nvar toError = require('./utils').toError,\n  Define = require('./metadata'),\n  shallowClone = require('./utils').shallowClone;\n\n/**\n * @fileOverview The **Admin** class is an internal class that allows convenient access to\n * the admin functionality and commands for MongoDB.\n *\n * **ADMIN Cannot directly be instantiated**\n * @example\n * var MongoClient = require('mongodb').MongoClient,\n *   test = require('assert');\n * // Connection url\n * var url = 'mongodb://localhost:27017/test';\n * // Connect using MongoClient\n * MongoClient.connect(url, function(err, db) {\n *   // Use the admin database for the operation\n *   var adminDb = db.admin();\n *\n *   // List all the available databases\n *   adminDb.listDatabases(function(err, dbs) {\n *     test.equal(null, err);\n *     test.ok(dbs.databases.length > 0);\n *     db.close();\n *   });\n * });\n */\n\n/**\n * Create a new Admin instance (INTERNAL TYPE, do not instantiate directly)\n * @class\n * @return {Admin} a collection instance.\n */\nvar Admin = function(db, topology, promiseLibrary) {\n  if(!(this instanceof Admin)) return new Admin(db, topology);\n  var self = this;\n\n  // Internal state\n  this.s = {\n      db: db\n    , topology: topology\n    , promiseLibrary: promiseLibrary\n  }\n}\n\nvar define = Admin.define = new Define('Admin', Admin, false);\n\n/**\n * The callback format for results\n * @callback Admin~resultCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {object} result The result object if the command was executed successfully.\n */\n\n/**\n * Execute a command\n * @method\n * @param {object} command The command hash\n * @param {object} [options=null] Optional settings.\n * @param {(ReadPreference|string)} [options.readPreference=null] The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n * @param {number} [options.maxTimeMS=null] Number of milliseconds to wait before aborting the query.\n * @param {Admin~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.command = function(command, options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 1);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  options = args.length ? args.shift() : {};\n\n  // Execute using callback\n  if(typeof callback == 'function') return this.s.db.executeDbAdminCommand(command, options, function(err, doc) {\n    return callback != null ? callback(err, doc) : null;\n  });\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    self.s.db.executeDbAdminCommand(command, options, function(err, doc) {\n      if(err) return reject(err);\n      resolve(doc);\n    });\n  });\n}\n\ndefine.classMethod('command', {callback: true, promise:true});\n\n/**\n * Retrieve the server information for the current\n * instance of the db client\n *\n * @param {Admin~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.buildInfo = function(callback) {\n  var self = this;\n  // Execute using callback\n  if(typeof callback == 'function') return this.serverInfo(callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    self.serverInfo(function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\ndefine.classMethod('buildInfo', {callback: true, promise:true});\n\n/**\n * Retrieve the server information for the current\n * instance of the db client\n *\n * @param {Admin~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.serverInfo = function(callback) {\n  var self = this;\n  // Execute using callback\n  if(typeof callback == 'function') return this.s.db.executeDbAdminCommand({buildinfo:1}, function(err, doc) {\n    if(err != null) return callback(err, null);\n    callback(null, doc);\n  });\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    self.s.db.executeDbAdminCommand({buildinfo:1}, function(err, doc) {\n      if(err) return reject(err);\n      resolve(doc);\n    });\n  });\n}\n\ndefine.classMethod('serverInfo', {callback: true, promise:true});\n\n/**\n * Retrieve this db's server status.\n *\n * @param {Admin~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.serverStatus = function(callback) {\n  var self = this;\n\n  // Execute using callback\n  if(typeof callback == 'function') return serverStatus(self, callback)\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    serverStatus(self, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n};\n\nvar serverStatus = function(self, callback) {\n  self.s.db.executeDbAdminCommand({serverStatus: 1}, function(err, doc) {\n    if(err == null && doc.ok === 1) {\n      callback(null, doc);\n    } else {\n      if(err) return callback(err, false);\n      return callback(toError(doc), false);\n    }\n  });\n}\n\ndefine.classMethod('serverStatus', {callback: true, promise:true});\n\n/**\n * Retrieve the current profiling Level for MongoDB\n *\n * @param {Admin~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.profilingLevel = function(callback) {\n  var self = this;\n\n  // Execute using callback\n  if(typeof callback == 'function') return profilingLevel(self, callback)\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    profilingLevel(self, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n};\n\nvar profilingLevel = function(self, callback) {\n  self.s.db.executeDbAdminCommand({profile:-1}, function(err, doc) {\n    doc = doc;\n\n    if(err == null && doc.ok === 1) {\n      var was = doc.was;\n      if(was == 0) return callback(null, \"off\");\n      if(was == 1) return callback(null, \"slow_only\");\n      if(was == 2) return callback(null, \"all\");\n        return callback(new Error(\"Error: illegal profiling level value \" + was), null);\n    } else {\n      err != null ? callback(err, null) : callback(new Error(\"Error with profile command\"), null);\n    }\n  });\n}\n\ndefine.classMethod('profilingLevel', {callback: true, promise:true});\n\n/**\n * Ping the MongoDB server and retrieve results\n *\n * @param {Admin~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.ping = function(options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 0);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n\n  // Execute using callback\n  if(typeof callback == 'function') return this.s.db.executeDbAdminCommand({ping: 1}, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    self.s.db.executeDbAdminCommand({ping: 1}, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\ndefine.classMethod('ping', {callback: true, promise:true});\n\n/**\n * Authenticate a user against the server.\n * @method\n * @param {string} username The username.\n * @param {string} [password] The password.\n * @param {Admin~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.authenticate = function(username, password, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = shallowClone(options);\n  options.authdb = 'admin';\n  \n  // Execute using callback\n  if(typeof callback == 'function') return this.s.db.authenticate(username, password, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    self.s.db.authenticate(username, password, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\ndefine.classMethod('authenticate', {callback: true, promise:true});\n\n/**\n * Logout user from server, fire off on all connections and remove all auth info\n * @method\n * @param {Admin~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.logout = function(callback) {\n  var self = this;\n  // Execute using callback\n  if(typeof callback == 'function') return this.s.db.logout({authdb: 'admin'}, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    self.s.db.logout({authdb: 'admin'}, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\ndefine.classMethod('logout', {callback: true, promise:true});\n\n// Get write concern\nvar writeConcern = function(options, db) {\n  options = shallowClone(options);\n\n  // If options already contain write concerns return it\n  if(options.w || options.wtimeout || options.j || options.fsync) {\n    return options;\n  }\n\n  // Set db write concern if available\n  if(db.writeConcern) {\n    if(options.w) options.w = db.writeConcern.w;\n    if(options.wtimeout) options.wtimeout = db.writeConcern.wtimeout;\n    if(options.j) options.j = db.writeConcern.j;\n    if(options.fsync) options.fsync = db.writeConcern.fsync;\n  }\n\n  // Return modified options\n  return options;\n}\n\n/**\n * Add a user to the database.\n * @method\n * @param {string} username The username.\n * @param {string} password The password.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.fsync=false] Specify a file sync write concern.\n * @param {object} [options.customData=null] Custom data associated with the user (only Mongodb 2.6 or higher)\n * @param {object[]} [options.roles=null] Roles associated with the created user (only Mongodb 2.6 or higher)\n * @param {Admin~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.addUser = function(username, password, options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 2);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  options = args.length ? args.shift() : {};\n  options = options || {};\n  // Get the options\n  options = writeConcern(options, self.s.db)\n  // Set the db name to admin\n  options.dbName = 'admin';\n\n  // Execute using callback\n  if(typeof callback == 'function')\n    return self.s.db.addUser(username, password, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    self.s.db.addUser(username, password, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\ndefine.classMethod('addUser', {callback: true, promise:true});\n\n/**\n * Remove a user from a database\n * @method\n * @param {string} username The username.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.fsync=false] Specify a file sync write concern.\n * @param {Admin~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.removeUser = function(username, options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 1);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  options = args.length ? args.shift() : {};\n  options = options || {};\n  // Get the options\n  options = writeConcern(options, self.s.db)\n  // Set the db name\n  options.dbName = 'admin';\n\n  // Execute using callback\n  if(typeof callback == 'function')\n    return self.s.db.removeUser(username, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    self.s.db.removeUser(username, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\ndefine.classMethod('removeUser', {callback: true, promise:true});\n\n/**\n * Set the current profiling level of MongoDB\n *\n * @param {string} level The new profiling level (off, slow_only, all).\n * @param {Admin~resultCallback} [callback] The command result callback.\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.setProfilingLevel = function(level, callback) {\n  var self = this;\n\n  // Execute using callback\n  if(typeof callback == 'function') return setProfilingLevel(self, level, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    setProfilingLevel(self, level, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n};\n\nvar setProfilingLevel = function(self, level, callback) {\n  var command = {};\n  var profile = 0;\n\n  if(level == \"off\") {\n    profile = 0;\n  } else if(level == \"slow_only\") {\n    profile = 1;\n  } else if(level == \"all\") {\n    profile = 2;\n  } else {\n    return callback(new Error(\"Error: illegal profiling level value \" + level));\n  }\n\n  // Set up the profile number\n  command['profile'] = profile;\n\n  self.s.db.executeDbAdminCommand(command, function(err, doc) {\n    doc = doc;\n\n    if(err == null && doc.ok === 1)\n      return callback(null, level);\n    return err != null ? callback(err, null) : callback(new Error(\"Error with profile command\"), null);\n  });\n}\n\ndefine.classMethod('setProfilingLevel', {callback: true, promise:true});\n\n/**\n * Retrive the current profiling information for MongoDB\n *\n * @param {Admin~resultCallback} [callback] The command result callback.\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.profilingInfo = function(callback) {\n  var self = this;\n\n  // Execute using callback\n  if(typeof callback == 'function') return profilingInfo(self, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    profilingInfo(self, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n};\n\nvar profilingInfo = function(self, callback) {\n  try {\n    self.s.topology.cursor(\"admin.system.profile\", { find: 'system.profile', query: {}}, {}).toArray(callback);\n  } catch (err) {\n    return callback(err, null);\n  }\n}\n\ndefine.classMethod('profilingLevel', {callback: true, promise:true});\n\n/**\n * Validate an existing collection\n *\n * @param {string} collectionName The name of the collection to validate.\n * @param {object} [options=null] Optional settings.\n * @param {Admin~resultCallback} [callback] The command result callback.\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.validateCollection = function(collectionName, options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 1);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  options = args.length ? args.shift() : {};\n  options = options || {};\n\n  // Execute using callback\n  if(typeof callback == 'function')\n    return validateCollection(self, collectionName, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    validateCollection(self, collectionName, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n};\n\nvar validateCollection = function(self, collectionName, options, callback) {\n  var command = {validate: collectionName};\n  var keys = Object.keys(options);\n\n  // Decorate command with extra options\n  for(var i = 0; i < keys.length; i++) {\n    if(options.hasOwnProperty(keys[i])) {\n      command[keys[i]] = options[keys[i]];\n    }\n  }\n\n  self.s.db.command(command, function(err, doc) {\n    if(err != null) return callback(err, null);\n\n    if(doc.ok === 0)\n      return callback(new Error(\"Error with validate command\"), null);\n    if(doc.result != null && doc.result.constructor != String)\n      return callback(new Error(\"Error with validation data\"), null);\n    if(doc.result != null && doc.result.match(/exception|corrupt/) != null)\n      return callback(new Error(\"Error: invalid collection \" + collectionName), null);\n    if(doc.valid != null && !doc.valid)\n      return callback(new Error(\"Error: invalid collection \" + collectionName), null);\n\n    return callback(null, doc);\n  });\n}\n\ndefine.classMethod('validateCollection', {callback: true, promise:true});\n\n/**\n * List the available databases\n *\n * @param {Admin~resultCallback} [callback] The command result callback.\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.listDatabases = function(callback) {\n  var self = this;\n  // Execute using callback\n  if(typeof callback == 'function') return self.s.db.executeDbAdminCommand({listDatabases:1}, {}, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    self.s.db.executeDbAdminCommand({listDatabases:1}, {}, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\ndefine.classMethod('listDatabases', {callback: true, promise:true});\n\n/**\n * Get ReplicaSet status\n *\n * @param {Admin~resultCallback} [callback] The command result callback.\n * @return {Promise} returns Promise if no callback passed\n */\nAdmin.prototype.replSetGetStatus = function(callback) {\n  var self = this;\n  // Execute using callback\n  if(typeof callback == 'function') return replSetGetStatus(self, callback);\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    replSetGetStatus(self, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n};\n\nvar replSetGetStatus = function(self, callback) {\n  self.s.db.executeDbAdminCommand({replSetGetStatus:1}, function(err, doc) {\n    if(err == null && doc.ok === 1)\n      return callback(null, doc);\n    if(err) return callback(err, false);\n    callback(toError(doc), false);\n  });\n}\n\ndefine.classMethod('replSetGetStatus', {callback: true, promise:true});\n\nmodule.exports = Admin;\n"]}