{"version":3,"sources":["collection.js"],"names":[],"mappings":"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","file":"collection-compiled.js","sourcesContent":["\"use strict\";\n\nvar checkCollectionName = require('./utils').checkCollectionName\n  , ObjectID = require('mongodb-core').BSON.ObjectID\n  , Long = require('mongodb-core').BSON.Long\n  , Code = require('mongodb-core').BSON.Code\n  , f = require('util').format\n  , AggregationCursor = require('./aggregation_cursor')\n  , MongoError = require('mongodb-core').MongoError\n  , shallowClone = require('./utils').shallowClone\n  , isObject = require('./utils').isObject\n  , toError = require('./utils').toError\n  , normalizeHintField = require('./utils').normalizeHintField\n  , handleCallback = require('./utils').handleCallback\n  , decorateCommand = require('./utils').decorateCommand\n  , formattedOrderClause = require('./utils').formattedOrderClause\n  , ReadPreference = require('./read_preference')\n  , CoreReadPreference = require('mongodb-core').ReadPreference\n  , CommandCursor = require('./command_cursor')\n  , Define = require('./metadata')\n  , Cursor = require('./cursor')\n  , unordered = require('./bulk/unordered')\n  , ordered = require('./bulk/ordered');\n\n/**\n * @fileOverview The **Collection** class is an internal class that embodies a MongoDB collection\n * allowing for insert/update/remove/find and other command operation on that MongoDB collection.\n *\n * **COLLECTION Cannot directly be instantiated**\n * @example\n * var MongoClient = require('mongodb').MongoClient,\n *   test = require('assert');\n * // Connection url\n * var url = 'mongodb://localhost:27017/test';\n * // Connect using MongoClient\n * MongoClient.connect(url, function(err, db) {\n *   // Create a collection we want to drop later\n *   var col = db.collection('createIndexExample1');\n *   // Show that duplicate records got dropped\n *   col.find({}).toArray(function(err, items) {\n *     test.equal(null, err);\n *     test.equal(4, items.length);\n *     db.close();\n *   });\n * });\n */\n\n/**\n * Create a new Collection instance (INTERNAL TYPE, do not instantiate directly)\n * @class\n * @property {string} collectionName Get the collection name.\n * @property {string} namespace Get the full collection namespace.\n * @property {object} writeConcern The current write concern values.\n * @property {object} readConcern The current read concern values.\n * @property {object} hint Get current index hint for collection.\n * @return {Collection} a Collection instance.\n */\nvar Collection = function(db, topology, dbName, name, pkFactory, options) {\n  checkCollectionName(name);\n  var self = this;\n  // Unpack variables\n  var internalHint = null;\n  var opts = options != null && ('object' === typeof options) ? options : {};\n  var slaveOk = options == null || options.slaveOk == null ? db.slaveOk : options.slaveOk;\n  var serializeFunctions = options == null || options.serializeFunctions == null ? db.serializeFunctions : options.serializeFunctions;\n  var raw = options == null || options.raw == null ? db.raw : options.raw;\n  var readPreference = null;\n  var collectionHint = null;\n  var namespace = f(\"%s.%s\", dbName, name);\n\n  // Get the promiseLibrary\n  var promiseLibrary = options.promiseLibrary;\n\n  // No promise library selected fall back\n  if(!promiseLibrary) {\n    promiseLibrary = typeof global.Promise == 'function' ?\n      global.Promise : require('es6-promise').Promise;\n  }\n\n  // Assign the right collection level readPreference\n  if(options && options.readPreference) {\n    readPreference = options.readPreference;\n  } else if(db.options.readPreference) {\n    readPreference = db.options.readPreference;\n  }\n\n  // Set custom primary key factory if provided\n  pkFactory = pkFactory == null\n    ? ObjectID\n    : pkFactory;\n\n  // Internal state\n  this.s = {\n    // Set custom primary key factory if provided\n      pkFactory: pkFactory\n    // Db\n    , db: db\n    // Topology\n    , topology: topology\n    // dbName\n    , dbName: dbName\n    // Options\n    , options: options\n    // Namespace\n    , namespace: namespace\n    // Read preference\n    , readPreference: readPreference\n    // Raw\n    , raw: raw\n    // SlaveOK\n    , slaveOk: slaveOk\n    // Serialize functions\n    , serializeFunctions: serializeFunctions\n    // internalHint\n    , internalHint: internalHint\n    // collectionHint\n    , collectionHint: collectionHint\n    // Name\n    , name: name\n    // Promise library\n    , promiseLibrary: promiseLibrary\n    // Read Concern\n    , readConcern: options.readConcern\n  }\n}\n\nvar define = Collection.define = new Define('Collection', Collection, false);\n\nObject.defineProperty(Collection.prototype, 'collectionName', {\n  enumerable: true, get: function() { return this.s.name; }\n});\n\nObject.defineProperty(Collection.prototype, 'namespace', {\n  enumerable: true, get: function() { return this.s.namespace; }\n});\n\nObject.defineProperty(Collection.prototype, 'readConcern', {\n  enumerable: true, get: function() { return this.s.readConcern || {level: 'local'}; }\n});\n\nObject.defineProperty(Collection.prototype, 'writeConcern', {\n  enumerable:true,\n  get: function() {\n    var ops = {};\n    if(this.s.options.w != null) ops.w = this.s.options.w;\n    if(this.s.options.j != null) ops.j = this.s.options.j;\n    if(this.s.options.fsync != null) ops.fsync = this.s.options.fsync;\n    if(this.s.options.wtimeout != null) ops.wtimeout = this.s.options.wtimeout;\n    return ops;\n  }\n});\n\n/**\n * @ignore\n */\nObject.defineProperty(Collection.prototype, \"hint\", {\n    enumerable: true\n  , get: function () { return this.s.collectionHint; }\n  , set: function (v) { this.s.collectionHint = normalizeHintField(v); }\n});\n\n/**\n * Creates a cursor for a query that can be used to iterate over results from MongoDB\n * @method\n * @param {object} query The cursor query object.\n * @throws {MongoError}\n * @return {Cursor}\n */\nCollection.prototype.find = function() {\n  var options\n    , args = Array.prototype.slice.call(arguments, 0)\n    , has_callback = typeof args[args.length - 1] === 'function'\n    , has_weird_callback = typeof args[0] === 'function'\n    , callback = has_callback ? args.pop() : (has_weird_callback ? args.shift() : null)\n    , len = args.length\n    , selector = len >= 1 ? args[0] : {}\n    , fields = len >= 2 ? args[1] : undefined;\n\n  if(len === 1 && has_weird_callback) {\n    // backwards compat for callback?, options case\n    selector = {};\n    options = args[0];\n  }\n\n  if(len === 2 && fields !== undefined && !Array.isArray(fields)) {\n    var fieldKeys = Object.keys(fields);\n    var is_option = false;\n\n    for(var i = 0; i < fieldKeys.length; i++) {\n      if(testForFields[fieldKeys[i]] != null) {\n        is_option = true;\n        break;\n      }\n    }\n\n    if(is_option) {\n      options = fields;\n      fields = undefined;\n    } else {\n      options = {};\n    }\n  } else if(len === 2 && Array.isArray(fields) && !Array.isArray(fields[0])) {\n    var newFields = {};\n    // Rewrite the array\n    for(var i = 0; i < fields.length; i++) {\n      newFields[fields[i]] = 1;\n    }\n    // Set the fields\n    fields = newFields;\n  }\n\n  if(3 === len) {\n    options = args[2];\n  }\n\n  // Ensure selector is not null\n  selector = selector == null ? {} : selector;\n  // Validate correctness off the selector\n  var object = selector;\n  if(Buffer.isBuffer(object)) {\n    var object_size = object[0] | object[1] << 8 | object[2] << 16 | object[3] << 24;\n    if(object_size != object.length)  {\n      var error = new Error(\"query selector raw message size does not match message header size [\" + object.length + \"] != [\" + object_size + \"]\");\n      error.name = 'MongoError';\n      throw error;\n    }\n  }\n\n  // Validate correctness of the field selector\n  var object = fields;\n  if(Buffer.isBuffer(object)) {\n    var object_size = object[0] | object[1] << 8 | object[2] << 16 | object[3] << 24;\n    if(object_size != object.length)  {\n      var error = new Error(\"query fields raw message size does not match message header size [\" + object.length + \"] != [\" + object_size + \"]\");\n      error.name = 'MongoError';\n      throw error;\n    }\n  }\n\n  // Check special case where we are using an objectId\n  if(selector instanceof ObjectID || (selector != null && selector._bsontype == 'ObjectID')) {\n    selector = {_id:selector};\n  }\n\n  // If it's a serialized fields field we need to just let it through\n  // user be warned it better be good\n  if(options && options.fields && !(Buffer.isBuffer(options.fields))) {\n    fields = {};\n\n    if(Array.isArray(options.fields)) {\n      if(!options.fields.length) {\n        fields['_id'] = 1;\n      } else {\n        for (var i = 0, l = options.fields.length; i < l; i++) {\n          fields[options.fields[i]] = 1;\n        }\n      }\n    } else {\n      fields = options.fields;\n    }\n  }\n\n  if (!options) options = {};\n\n  var newOptions = {};\n  // Make a shallow copy of options\n  for (var key in options) {\n    newOptions[key] = options[key];\n  }\n\n  // Unpack options\n  newOptions.skip = len > 3 ? args[2] : options.skip ? options.skip : 0;\n  newOptions.limit = len > 3 ? args[3] : options.limit ? options.limit : 0;\n  newOptions.raw = options.raw != null && typeof options.raw === 'boolean' ? options.raw : this.s.raw;\n  newOptions.hint = options.hint != null ? normalizeHintField(options.hint) : this.s.collectionHint;\n  newOptions.timeout = len == 5 ? args[4] : typeof options.timeout === 'undefined' ? undefined : options.timeout;\n  // // If we have overridden slaveOk otherwise use the default db setting\n  newOptions.slaveOk = options.slaveOk != null ? options.slaveOk : this.s.db.slaveOk;\n\n  // Add read preference if needed\n  newOptions = getReadPreference(this, newOptions, this.s.db, this);\n  // Set slave ok to true if read preference different from primary\n  if(newOptions.readPreference != null\n    && (newOptions.readPreference != 'primary' || newOptions.readPreference.mode != 'primary')) {\n    newOptions.slaveOk = true;\n  }\n\n  // Ensure the query is an object\n  if(selector != null && typeof selector != 'object') {\n    throw MongoError.create({message: \"query selector must be an object\", driver:true });\n  }\n\n  // Build the find command\n  var findCommand = {\n      find: this.s.namespace\n    , limit: newOptions.limit\n    , skip: newOptions.skip\n    , query: selector\n  }\n\n  // Ensure we use the right await data option\n  if(typeof newOptions.awaitdata == 'boolean')  {\n    newOptions.awaitData = newOptions.awaitdata\n  };\n\n  // Translate to new command option noCursorTimeout\n  if(typeof newOptions.timeout == 'boolean') newOptions.noCursorTimeout = newOptions.timeout;\n\n  // Merge in options to command\n  for(var name in newOptions) {\n    if(newOptions[name] != null) findCommand[name] = newOptions[name];\n  }\n\n  // Format the fields\n  var formatFields = function(fields) {\n    var object = {};\n    if(Array.isArray(fields)) {\n      for(var i = 0; i < fields.length; i++) {\n        if(Array.isArray(fields[i])) {\n          object[fields[i][0]] = fields[i][1];\n        } else {\n          object[fields[i][0]] = 1;\n        }\n      }\n    } else {\n      object = fields;\n    }\n\n    return object;\n  }\n\n  // Special treatment for the fields selector\n  if(fields) findCommand.fields = formatFields(fields);\n\n  // Add db object to the new options\n  newOptions.db = this.s.db;\n\n  // Add the promise library\n  newOptions.promiseLibrary = this.s.promiseLibrary;\n\n  // Set raw if available at collection level\n  if(newOptions.raw == null && this.s.raw) newOptions.raw = this.s.raw;\n\n  // Sort options\n  if(findCommand.sort)\n    findCommand.sort = formattedOrderClause(findCommand.sort);\n\n  // Set the readConcern\n  if(this.s.readConcern) {\n    findCommand.readConcern = this.s.readConcern;\n  }\n\n  // Create the cursor\n  if(typeof callback == 'function') return handleCallback(callback, null, this.s.topology.cursor(this.s.namespace, findCommand, newOptions));\n  return this.s.topology.cursor(this.s.namespace, findCommand, newOptions);\n}\n\ndefine.classMethod('find', {callback: false, promise:false, returns: [Cursor]});\n\n/**\n * Inserts a single document into MongoDB. If documents passed in do not contain the **_id** field,\n * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n * can be overridden by setting the **forceServerObjectId** flag.\n *\n * @method\n * @param {object} doc Document to insert.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.serializeFunctions=false] Serialize functions on any object.\n * @param {boolean} [options.forceServerObjectId=false] Force server to assign _id values instead of driver.\n * @param {boolean} [options.bypassDocumentValidation=false] Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n * @param {Collection~insertOneWriteOpCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.insertOne = function(doc, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = options || {};\n  if(Array.isArray(doc) && typeof callback == 'function') {\n    return callback(MongoError.create({message: 'doc parameter must be an object', driver:true }));\n  } else if(Array.isArray(doc)) {\n    return new this.s.promiseLibrary(function(resolve, reject) {\n      reject(MongoError.create({message: 'doc parameter must be an object', driver:true }));\n    });\n  }\n\n  // Add ignoreUndfined\n  if(this.s.options.ignoreUndefined) {\n    options = shallowClone(options);\n    options.ignoreUndefined = this.s.options.ignoreUndefined;\n  }\n\n  // Execute using callback\n  if(typeof callback == 'function') return insertOne(self, doc, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    insertOne(self, doc, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar insertOne = function(self, doc, options, callback) {\n  insertDocuments(self, [doc], options, function(err, r) {\n    if(callback == null) return;\n    if(err && callback) return callback(err);\n    // Workaround for pre 2.6 servers\n    if(r == null) return callback(null, {result: {ok:1}});\n    // Add values to top level to ensure crud spec compatibility\n    r.insertedCount = r.result.n;\n    r.insertedId = doc._id;\n    if(callback) callback(null, r);\n  });\n}\n\nvar mapInserManyResults = function(docs, r) {\n  var ids = r.getInsertedIds();\n  var keys = Object.keys(ids);\n  var finalIds = new Array(keys.length);\n\n  for(var i = 0; i < keys.length; i++) {\n    if(ids[keys[i]]._id) {\n      finalIds[ids[keys[i]].index] = ids[keys[i]]._id;\n    }\n  }\n\n  var finalResult = {\n    result: {ok: 1, n: r.insertedCount},\n    ops: docs,\n    insertedCount: r.insertedCount,\n    insertedIds: finalIds\n  };\n\n  if(r.getLastOp()) {\n    finalResult.result.opTime = r.getLastOp();\n  }\n\n  return finalResult;\n}\n\ndefine.classMethod('insertOne', {callback: true, promise:true});\n\n/**\n * Inserts an array of documents into MongoDB. If documents passed in do not contain the **_id** field,\n * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n * can be overridden by setting the **forceServerObjectId** flag.\n *\n * @method\n * @param {object[]} docs Documents to insert.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.serializeFunctions=false] Serialize functions on any object.\n * @param {boolean} [options.forceServerObjectId=false] Force server to assign _id values instead of driver.\n * @param {boolean} [options.bypassDocumentValidation=false] Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n * @param {Collection~insertWriteOpCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.insertMany = function(docs, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = options || {ordered:true};\n  if(!Array.isArray(docs) && typeof callback == 'function') {\n    return callback(MongoError.create({message: 'docs parameter must be an array of documents', driver:true }));\n  } else if(!Array.isArray(docs)) {\n    return new this.s.promiseLibrary(function(resolve, reject) {\n      reject(MongoError.create({message: 'docs parameter must be an array of documents', driver:true }));\n    });\n  }\n\n  // Get the write concern options\n  if(typeof options.checkKeys != 'boolean') {\n    options.checkKeys = true;\n  }\n\n  // If keep going set unordered\n  options['serializeFunctions'] = options['serializeFunctions'] || self.s.serializeFunctions;\n\n  // Set up the force server object id\n  var forceServerObjectId = typeof options.forceServerObjectId == 'boolean'\n    ? options.forceServerObjectId : self.s.db.options.forceServerObjectId;\n\n  // Do we want to force the server to assign the _id key\n  if(forceServerObjectId !== true) {\n    // Add _id if not specified\n    for(var i = 0; i < docs.length; i++) {\n      if(docs[i]._id == null) docs[i]._id = self.s.pkFactory.createPk();\n    }\n  }\n\n  // Generate the bulk write operations\n  var operations = [{\n    insertMany: docs\n  }];\n\n  // Execute using callback\n  if(typeof callback == 'function') return bulkWrite(self, operations, options, function(err, r) {\n    if(err) return callback(err, r);\n    callback(null, mapInserManyResults(docs, r));\n  });\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    bulkWrite(self, operations, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(mapInserManyResults(docs, r));\n    });\n  });\n}\n\ndefine.classMethod('insertMany', {callback: true, promise:true});\n\n/**\n * @typedef {Object} Collection~BulkWriteOpResult\n * @property {number} insertedCount Number of documents inserted.\n * @property {number} matchedCount Number of documents matched for update.\n * @property {number} modifiedCount Number of documents modified.\n * @property {number} deletedCount Number of documents deleted.\n * @property {number} upsertedCount Number of documents upserted.\n * @property {object} insertedIds Inserted document generated Id's, hash key is the index of the originating operation\n * @property {object} upsertedIds Upserted document generated Id's, hash key is the index of the originating operation\n * @property {object} result The command result object.\n */\n\n/**\n * The callback format for inserts\n * @callback Collection~bulkWriteOpCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {Collection~BulkWriteOpResult} result The result object if the command was executed successfully.\n */\n\n/**\n * Perform a bulkWrite operation without a fluent API\n *\n * Legal operation types are\n *\n *  { insertOne: { document: { a: 1 } } }\n *\n *  { updateOne: { filter: {a:2}, update: {$set: {a:2}}, upsert:true } }\n *\n *  { updateMany: { filter: {a:2}, update: {$set: {a:2}}, upsert:true } }\n *\n *  { deleteOne: { filter: {c:1} } }\n *\n *  { deleteMany: { filter: {c:1} } }\n *\n *  { replaceOne: { filter: {c:3}, replacement: {c:4}, upsert:true}}\n *\n * If documents passed in do not contain the **_id** field,\n * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n * can be overridden by setting the **forceServerObjectId** flag.\n *\n * @method\n * @param {object[]} operations Bulk operations to perform.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.serializeFunctions=false] Serialize functions on any object.\n * @param {boolean} [options.ordered=true] Execute write operation in ordered or unordered fashion.\n * @param {boolean} [options.bypassDocumentValidation=false] Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n * @param {Collection~bulkWriteOpCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.bulkWrite = function(operations, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = options || {ordered:true};\n\n  if(!Array.isArray(operations)) {\n    throw MongoError.create({message: \"operations must be an array of documents\", driver:true });\n  }\n\n  // Execute using callback\n  if(typeof callback == 'function') return bulkWrite(self, operations, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    bulkWrite(self, operations, options, function(err, r) {\n      if(err && r == null) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar bulkWrite = function(self, operations, options, callback) {\n  // Add ignoreUndfined\n  if(self.s.options.ignoreUndefined) {\n    options = shallowClone(options);\n    options.ignoreUndefined = self.s.options.ignoreUndefined;\n  }\n\n  // Create the bulk operation\n  var bulk = options.ordered == true || options.ordered == null ? self.initializeOrderedBulkOp(options) : self.initializeUnorderedBulkOp(options);\n\n  // for each op go through and add to the bulk\n  try {\n    for(var i = 0; i < operations.length; i++) {\n      bulk.raw(operations[i]);\n    }\n  } catch(err) {\n    return callback(err, null);\n  }\n\n  // Final options for write concern\n  var finalOptions = writeConcern(shallowClone(options), self.s.db, self, options);\n  var writeCon = finalOptions.writeConcern ? finalOptions.writeConcern : {};\n\n  // Execute the bulk\n  bulk.execute(writeCon, function(err, r) {\n    // We have connection level error\n    if(!r && err) return callback(err, null);\n    // We have single error\n    if(r && r.hasWriteErrors() && r.getWriteErrorCount() == 1) {\n      return callback(toError(r.getWriteErrorAt(0)), r);\n    }\n\n    // if(err) return callback(err);\n    r.insertedCount = r.nInserted;\n    r.matchedCount = r.nMatched;\n    r.modifiedCount = r.nModified || 0;\n    r.deletedCount = r.nRemoved;\n    r.upsertedCount = r.getUpsertedIds().length;\n    r.upsertedIds = {};\n    r.insertedIds = {};\n\n    // Update the n\n    r.n = r.insertedCount;\n\n    // Inserted documents\n    var inserted = r.getInsertedIds();\n    // Map inserted ids\n    for(var i = 0; i < inserted.length; i++) {\n      r.insertedIds[inserted[i].index] = inserted[i]._id;\n    }\n\n    // Upserted documents\n    var upserted = r.getUpsertedIds();\n    // Map upserted ids\n    for(var i = 0; i < upserted.length; i++) {\n      r.upsertedIds[upserted[i].index] = upserted[i]._id;\n    }\n\n    // Check if we have write errors\n    if(r.hasWriteErrors()) {\n      // Get all the errors\n      var errors = r.getWriteErrors();\n      // Return the MongoError object\n      return callback(toError({\n        message: 'write operation failed', code: errors[0].code, writeErrors: errors\n      }), r);\n    }\n\n    // Check if we have a writeConcern error\n    if(r.getWriteConcernError()) {\n      // Return the MongoError object\n      return callback(toError(r.getWriteConcernError()), r);\n    }\n\n    // Return the results\n    callback(null, r);\n  });\n}\n\nvar insertDocuments = function(self, docs, options, callback) {\n  if(typeof options == 'function') callback = options, options = {};\n  options = options || {};\n  // Ensure we are operating on an array op docs\n  docs = Array.isArray(docs) ? docs : [docs];\n\n  // Get the write concern options\n  var finalOptions = writeConcern(shallowClone(options), self.s.db, self, options);\n  if(typeof finalOptions.checkKeys != 'boolean') finalOptions.checkKeys = true;\n\n  // If keep going set unordered\n  if(finalOptions.keepGoing == true) finalOptions.ordered = false;\n  finalOptions['serializeFunctions'] = options['serializeFunctions'] || self.s.serializeFunctions;\n\n  // Set up the force server object id\n  var forceServerObjectId = typeof options.forceServerObjectId == 'boolean'\n    ? options.forceServerObjectId : self.s.db.options.forceServerObjectId;\n\n  // Add _id if not specified\n  if(forceServerObjectId !== true){\n    for(var i = 0; i < docs.length; i++) {\n      if(docs[i]._id == null) docs[i]._id = self.s.pkFactory.createPk();\n    }\n  }\n\n  // File inserts\n  self.s.topology.insert(self.s.namespace, docs, finalOptions, function(err, result) {\n    if(callback == null) return;\n    if(err) return handleCallback(callback, err);\n    if(result == null) return handleCallback(callback, null, null);\n    if(result.result.code) return handleCallback(callback, toError(result.result));\n    if(result.result.writeErrors) return handleCallback(callback, toError(result.result.writeErrors[0]));\n    // Add docs to the list\n    result.ops = docs;\n    // Return the results\n    handleCallback(callback, null, result);\n  });\n}\n\ndefine.classMethod('bulkWrite', {callback: true, promise:true});\n\n/**\n * @typedef {Object} Collection~WriteOpResult\n * @property {object[]} ops All the documents inserted using insertOne/insertMany/replaceOne. Documents contain the _id field if forceServerObjectId == false for insertOne/insertMany\n * @property {object} connection The connection object used for the operation.\n * @property {object} result The command result object.\n */\n\n/**\n * The callback format for inserts\n * @callback Collection~writeOpCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {Collection~WriteOpResult} result The result object if the command was executed successfully.\n */\n\n/**\n * @typedef {Object} Collection~insertWriteOpResult\n * @property {Number} insertedCount The total amount of documents inserted.\n * @property {object[]} ops All the documents inserted using insertOne/insertMany/replaceOne. Documents contain the _id field if forceServerObjectId == false for insertOne/insertMany\n * @property {ObjectId[]} insertedIds All the generated _id's for the inserted documents.\n * @property {object} connection The connection object used for the operation.\n * @property {object} result The raw command result object returned from MongoDB (content might vary by server version).\n * @property {Number} result.ok Is 1 if the command executed correctly.\n * @property {Number} result.n The total count of documents inserted.\n */\n\n/**\n * @typedef {Object} Collection~insertOneWriteOpResult\n * @property {Number} insertedCount The total amount of documents inserted.\n * @property {object[]} ops All the documents inserted using insertOne/insertMany/replaceOne. Documents contain the _id field if forceServerObjectId == false for insertOne/insertMany\n * @property {ObjectId} insertedId The driver generated ObjectId for the insert operation.\n * @property {object} connection The connection object used for the operation.\n * @property {object} result The raw command result object returned from MongoDB (content might vary by server version).\n * @property {Number} result.ok Is 1 if the command executed correctly.\n * @property {Number} result.n The total count of documents inserted.\n */\n\n/**\n * The callback format for inserts\n * @callback Collection~insertWriteOpCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {Collection~insertWriteOpResult} result The result object if the command was executed successfully.\n */\n\n/**\n * The callback format for inserts\n * @callback Collection~insertOneWriteOpCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {Collection~insertOneWriteOpResult} result The result object if the command was executed successfully.\n */\n\n/**\n * Inserts a single document or a an array of documents into MongoDB. If documents passed in do not contain the **_id** field,\n * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n * can be overridden by setting the **forceServerObjectId** flag.\n *\n * @method\n * @param {(object|object[])} docs Documents to insert.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.serializeFunctions=false] Serialize functions on any object.\n * @param {boolean} [options.forceServerObjectId=false] Force server to assign _id values instead of driver.\n * @param {boolean} [options.bypassDocumentValidation=false] Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n * @param {Collection~insertWriteOpCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n * @deprecated Use insertOne, insertMany or bulkWrite\n */\nCollection.prototype.insert = function(docs, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = options || {ordered:false};\n  docs = !Array.isArray(docs) ? [docs] : docs;\n\n  if(options.keepGoing == true) {\n    options.ordered = false;\n  }\n\n  return this.insertMany(docs, options, callback);\n}\n\ndefine.classMethod('insert', {callback: true, promise:true});\n\n/**\n * @typedef {Object} Collection~updateWriteOpResult\n * @property {Object} result The raw result returned from MongoDB, field will vary depending on server version.\n * @property {Number} result.ok Is 1 if the command executed correctly.\n * @property {Number} result.n The total count of documents scanned.\n * @property {Number} result.nModified The total count of documents modified.\n * @property {Object} connection The connection object used for the operation.\n * @property {Number} matchedCount The number of documents that matched the filter.\n * @property {Number} modifiedCount The number of documents that were modified.\n * @property {Number} upsertedCount The number of documents upserted.\n * @property {Object} upsertedId The upserted id.\n * @property {ObjectId} upsertedId._id The upserted _id returned from the server.\n */\n\n/**\n * The callback format for inserts\n * @callback Collection~updateWriteOpCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {Collection~updateWriteOpResult} result The result object if the command was executed successfully.\n */\n\n/**\n * Update a single document on MongoDB\n * @method\n * @param {object} filter The Filter used to select the document to update\n * @param {object} update The update operations to be applied to the document\n * @param {object} [options=null] Optional settings.\n * @param {boolean} [options.upsert=false] Update operation is an upsert.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.bypassDocumentValidation=false] Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n * @param {Collection~updateWriteOpCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.updateOne = function(filter, update, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = shallowClone(options)\n\n  // Add ignoreUndfined\n  if(this.s.options.ignoreUndefined) {\n    options = shallowClone(options);\n    options.ignoreUndefined = this.s.options.ignoreUndefined;\n  }\n\n  // Execute using callback\n  if(typeof callback == 'function') return updateOne(self, filter, update, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    updateOne(self, filter, update, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar updateOne = function(self, filter, update, options, callback) {\n  // Set single document update\n  options.multi = false;\n  // Execute update\n  updateDocuments(self, filter, update, options, function(err, r) {\n    if(callback == null) return;\n    if(err && callback) return callback(err);\n    if(r == null) return callback(null, {result: {ok:1}});\n    r.matchedCount = r.result.n;\n    r.modifiedCount = r.result.nModified != null ? r.result.nModified : r.result.n;\n    r.upsertedId = Array.isArray(r.result.upserted) && r.result.upserted.length > 0 ? r.result.upserted[0] : null;\n    r.upsertedCount = Array.isArray(r.result.upserted) && r.result.upserted.length ? r.result.upserted.length : 0;\n    if(callback) callback(null, r);\n  });\n}\n\ndefine.classMethod('updateOne', {callback: true, promise:true});\n\n/**\n * Replace a document on MongoDB\n * @method\n * @param {object} filter The Filter used to select the document to update\n * @param {object} doc The Document that replaces the matching document\n * @param {object} [options=null] Optional settings.\n * @param {boolean} [options.upsert=false] Update operation is an upsert.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.bypassDocumentValidation=false] Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n * @param {Collection~updateWriteOpCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.replaceOne = function(filter, update, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = shallowClone(options)\n\n  // Add ignoreUndfined\n  if(this.s.options.ignoreUndefined) {\n    options = shallowClone(options);\n    options.ignoreUndefined = this.s.options.ignoreUndefined;\n  }\n\n  // Execute using callback\n  if(typeof callback == 'function') return replaceOne(self, filter, update, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    replaceOne(self, filter, update, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar replaceOne = function(self, filter, update, options, callback) {\n  // Set single document update\n  options.multi = false;\n  // Execute update\n  updateDocuments(self, filter, update, options, function(err, r) {\n    if(callback == null) return;\n    if(err && callback) return callback(err);\n    if(r == null) return callback(null, {result: {ok:1}});\n    r.matchedCount = r.result.n;\n    r.modifiedCount = r.result.nModified != null ? r.result.nModified : r.result.n;\n    r.upsertedId = Array.isArray(r.result.upserted) && r.result.upserted.length > 0 ? r.result.upserted[0] : null;\n    r.upsertedCount = Array.isArray(r.result.upserted) && r.result.upserted.length ? r.result.upserted.length : 0;\n    r.ops = [update];\n    if(callback) callback(null, r);\n  });\n}\n\ndefine.classMethod('replaceOne', {callback: true, promise:true});\n\n/**\n * Update multiple documents on MongoDB\n * @method\n * @param {object} filter The Filter used to select the document to update\n * @param {object} update The update operations to be applied to the document\n * @param {object} [options=null] Optional settings.\n * @param {boolean} [options.upsert=false] Update operation is an upsert.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {Collection~updateWriteOpCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.updateMany = function(filter, update, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = shallowClone(options)\n\n  // Add ignoreUndfined\n  if(this.s.options.ignoreUndefined) {\n    options = shallowClone(options);\n    options.ignoreUndefined = this.s.options.ignoreUndefined;\n  }\n\n  // Execute using callback\n  if(typeof callback == 'function') return updateMany(self, filter, update, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    updateMany(self, filter, update, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar updateMany = function(self, filter, update, options, callback) {\n  // Set single document update\n  options.multi = true;\n  // Execute update\n  updateDocuments(self, filter, update, options, function(err, r) {\n    if(callback == null) return;\n    if(err && callback) return callback(err);\n    if(r == null) return callback(null, {result: {ok:1}});\n    r.matchedCount = r.result.n;\n    r.modifiedCount = r.result.nModified != null ? r.result.nModified : r.result.n;\n    r.upsertedId = Array.isArray(r.result.upserted) && r.result.upserted.length > 0 ? r.result.upserted[0] : null;\n    r.upsertedCount = Array.isArray(r.result.upserted) && r.result.upserted.length ? r.result.upserted.length : 0;\n    if(callback) callback(null, r);\n  });\n}\n\ndefine.classMethod('updateMany', {callback: true, promise:true});\n\nvar updateDocuments = function(self, selector, document, options, callback) {\n  if('function' === typeof options) callback = options, options = null;\n  if(options == null) options = {};\n  if(!('function' === typeof callback)) callback = null;\n\n  // If we are not providing a selector or document throw\n  if(selector == null || typeof selector != 'object') return callback(toError(\"selector must be a valid JavaScript object\"));\n  if(document == null || typeof document != 'object') return callback(toError(\"document must be a valid JavaScript object\"));\n\n  // Get the write concern options\n  var finalOptions = writeConcern(shallowClone(options), self.s.db, self, options);\n\n  // Do we return the actual result document\n  // Either use override on the function, or go back to default on either the collection\n  // level or db\n  finalOptions['serializeFunctions'] = options['serializeFunctions'] || self.s.serializeFunctions;\n\n  // Execute the operation\n  var op = {q: selector, u: document};\n  op.upsert = typeof options.upsert == 'boolean' ? options.upsert : false;\n  op.multi = typeof options.multi == 'boolean' ? options.multi : false;\n\n  // Update options\n  self.s.topology.update(self.s.namespace, [op], finalOptions, function(err, result) {\n    if(callback == null) return;\n    if(err) return handleCallback(callback, err, null);\n    if(result == null) return handleCallback(callback, null, null);\n    if(result.result.code) return handleCallback(callback, toError(result.result));\n    if(result.result.writeErrors) return handleCallback(callback, toError(result.result.writeErrors[0]));\n    // Return the results\n    handleCallback(callback, null, result);\n  });\n}\n\n/**\n * Updates documents.\n * @method\n * @param {object} selector The selector for the update operation.\n * @param {object} document The update document.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.upsert=false] Update operation is an upsert.\n * @param {boolean} [options.multi=false] Update one/all documents with operation.\n * @param {boolean} [options.bypassDocumentValidation=false] Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n * @param {Collection~writeOpCallback} [callback] The command result callback\n * @throws {MongoError}\n * @return {Promise} returns Promise if no callback passed\n * @deprecated use updateOne, updateMany or bulkWrite\n */\nCollection.prototype.update = function(selector, document, options, callback) {\n  var self = this;\n\n  // Add ignoreUndfined\n  if(this.s.options.ignoreUndefined) {\n    options = shallowClone(options);\n    options.ignoreUndefined = this.s.options.ignoreUndefined;\n  }\n\n  // Execute using callback\n  if(typeof callback == 'function') return updateDocuments(self, selector, document, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    updateDocuments(self, selector, document, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\ndefine.classMethod('update', {callback: true, promise:true});\n\n/**\n * @typedef {Object} Collection~deleteWriteOpResult\n * @property {Object} result The raw result returned from MongoDB, field will vary depending on server version.\n * @property {Number} result.ok Is 1 if the command executed correctly.\n * @property {Number} result.n The total count of documents deleted.\n * @property {Object} connection The connection object used for the operation.\n * @property {Number} deletedCount The number of documents deleted.\n */\n\n/**\n * The callback format for inserts\n * @callback Collection~deleteWriteOpCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {Collection~deleteWriteOpResult} result The result object if the command was executed successfully.\n */\n\n/**\n * Delete a document on MongoDB\n * @method\n * @param {object} filter The Filter used to select the document to remove\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {Collection~deleteWriteOpCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.deleteOne = function(filter, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  var options = shallowClone(options);\n\n  // Add ignoreUndfined\n  if(this.s.options.ignoreUndefined) {\n    options = shallowClone(options);\n    options.ignoreUndefined = this.s.options.ignoreUndefined;\n  }\n\n  // Execute using callback\n  if(typeof callback == 'function') return deleteOne(self, filter, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    deleteOne(self, filter, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar deleteOne = function(self, filter, options, callback) {\n  options.single = true;\n  removeDocuments(self, filter, options, function(err, r) {\n    if(callback == null) return;\n    if(err && callback) return callback(err);\n    if(r == null) return callback(null, {result: {ok:1}});\n    r.deletedCount = r.result.n;\n    if(callback) callback(null, r);\n  });\n}\n\ndefine.classMethod('deleteOne', {callback: true, promise:true});\n\nCollection.prototype.removeOne = Collection.prototype.deleteOne;\n\ndefine.classMethod('removeOne', {callback: true, promise:true});\n\n/**\n * Delete multiple documents on MongoDB\n * @method\n * @param {object} filter The Filter used to select the documents to remove\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {Collection~deleteWriteOpCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.deleteMany = function(filter, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  var options = shallowClone(options);\n\n  // Add ignoreUndfined\n  if(this.s.options.ignoreUndefined) {\n    options = shallowClone(options);\n    options.ignoreUndefined = this.s.options.ignoreUndefined;\n  }\n\n  // Execute using callback\n  if(typeof callback == 'function') return deleteMany(self, filter, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    deleteMany(self, filter, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar deleteMany = function(self, filter, options, callback) {\n  options.single = false;\n  removeDocuments(self, filter, options, function(err, r) {\n    if(callback == null) return;\n    if(err && callback) return callback(err);\n    if(r == null) return callback(null, {result: {ok:1}});\n    r.deletedCount = r.result.n;\n    if(callback) callback(null, r);\n  });\n}\n\nvar removeDocuments = function(self, selector, options, callback) {\n  if(typeof options == 'function') {\n    callback = options, options = {};\n  } else if (typeof selector === 'function') {\n    callback = selector;\n    options = {};\n    selector = {};\n  }\n\n  // Create an empty options object if the provided one is null\n  options = options || {};\n\n  // Get the write concern options\n  var finalOptions = writeConcern(shallowClone(options), self.s.db, self, options);\n\n  // If selector is null set empty\n  if(selector == null) selector = {};\n\n  // Build the op\n  var op = {q: selector, limit: 0};\n  if(options.single) op.limit = 1;\n\n  // Execute the remove\n  self.s.topology.remove(self.s.namespace, [op], finalOptions, function(err, result) {\n    if(callback == null) return;\n    if(err) return handleCallback(callback, err, null);\n    if(result == null) return handleCallback(callback, null, null);\n    if(result.result.code) return handleCallback(callback, toError(result.result));\n    if(result.result.writeErrors) return handleCallback(callback, toError(result.result.writeErrors[0]));\n    // Return the results\n    handleCallback(callback, null, result);\n  });\n}\n\ndefine.classMethod('deleteMany', {callback: true, promise:true});\n\nCollection.prototype.removeMany = Collection.prototype.deleteMany;\n\ndefine.classMethod('removeMany', {callback: true, promise:true});\n\n/**\n * Remove documents.\n * @method\n * @param {object} selector The selector for the update operation.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.single=false] Removes the first document found.\n * @param {Collection~writeOpCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n * @deprecated use deleteOne, deleteMany or bulkWrite\n */\nCollection.prototype.remove = function(selector, options, callback) {\n  var self = this;\n\n  // Add ignoreUndfined\n  if(this.s.options.ignoreUndefined) {\n    options = shallowClone(options);\n    options.ignoreUndefined = this.s.options.ignoreUndefined;\n  }\n\n  // Execute using callback\n  if(typeof callback == 'function') return removeDocuments(self, selector, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    removeDocuments(self, selector, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\ndefine.classMethod('remove', {callback: true, promise:true});\n\n/**\n * Save a document. Simple full document replacement function. Not recommended for efficiency, use atomic\n * operators and update instead for more efficient operations.\n * @method\n * @param {object} doc Document to save\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {Collection~writeOpCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n * @deprecated use insertOne, insertMany, updateOne or updateMany\n */\nCollection.prototype.save = function(doc, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = options || {};\n\n  // Add ignoreUndfined\n  if(this.s.options.ignoreUndefined) {\n    options = shallowClone(options);\n    options.ignoreUndefined = this.s.options.ignoreUndefined;\n  }\n\n  // Execute using callback\n  if(typeof callback == 'function') return save(self, doc, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    save(self, doc, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar save = function(self, doc, options, callback) {\n  // Get the write concern options\n  var finalOptions = writeConcern(shallowClone(options), self.s.db, self, options);\n  // Establish if we need to perform an insert or update\n  if(doc._id != null) {\n    finalOptions.upsert = true;\n    return updateDocuments(self, {_id: doc._id}, doc, finalOptions, callback);\n  }\n\n  // Insert the document\n  insertDocuments(self, [doc], options, function(err, r) {\n    if(callback == null) return;\n    if(doc == null) return handleCallback(callback, null, null);\n    if(err) return handleCallback(callback, err, null);\n    handleCallback(callback, null, r);\n  });\n}\n\ndefine.classMethod('save', {callback: true, promise:true});\n\n/**\n * The callback format for results\n * @callback Collection~resultCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {object} result The result object if the command was executed successfully.\n */\n\n/**\n * Fetches the first document that matches the query\n * @method\n * @param {object} query Query for find Operation\n * @param {object} [options=null] Optional settings.\n * @param {number} [options.limit=0] Sets the limit of documents returned in the query.\n * @param {(array|object)} [options.sort=null] Set to sort the documents coming back from the query. Array of indexes, [['a', 1]] etc.\n * @param {object} [options.fields=null] The fields to return in the query. Object of fields to include or exclude (not both), {'a':1}\n * @param {number} [options.skip=0] Set to skip N documents ahead in your query (useful for pagination).\n * @param {Object} [options.hint=null] Tell the query to use specific indexes in the query. Object of indexes to use, {'_id':1}\n * @param {boolean} [options.explain=false] Explain the query instead of returning the data.\n * @param {boolean} [options.snapshot=false] Snapshot query.\n * @param {boolean} [options.timeout=false] Specify if the cursor can timeout.\n * @param {boolean} [options.tailable=false] Specify if the cursor is tailable.\n * @param {number} [options.batchSize=0] Set the batchSize for the getMoreCommand when iterating over the query results.\n * @param {boolean} [options.returnKey=false] Only return the index key.\n * @param {number} [options.maxScan=null] Limit the number of items to scan.\n * @param {number} [options.min=null] Set index bounds.\n * @param {number} [options.max=null] Set index bounds.\n * @param {boolean} [options.showDiskLoc=false] Show disk location of results.\n * @param {string} [options.comment=null] You can put a $comment field on a query to make looking in the profiler logs simpler.\n * @param {boolean} [options.raw=false] Return all BSON documents as Raw Buffer documents.\n * @param {(ReadPreference|string)} [options.readPreference=null] The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n * @param {boolean} [options.partial=false] Specify if the cursor should return partial results when querying against a sharded system\n * @param {number} [options.maxTimeMS=null] Number of miliseconds to wait before aborting the query.\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n * @deprecated use find().limit(1).next(function(err, doc){})\n */\nCollection.prototype.findOne = function() {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 0);\n  var callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n\n  // Execute using callback\n  if(typeof callback == 'function') return findOne(self, args, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    findOne(self, args, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar findOne = function(self, args, callback) {\n  var cursor = self.find.apply(self, args).limit(-1).batchSize(1);\n  // Return the item\n  cursor.next(function(err, item) {\n    if(err != null) return handleCallback(callback, toError(err), null);\n    handleCallback(callback, null, item);\n  });\n}\n\ndefine.classMethod('findOne', {callback: true, promise:true});\n\n/**\n * The callback format for the collection method, must be used if strict is specified\n * @callback Collection~collectionResultCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {Collection} collection The collection instance.\n */\n\n/**\n * Rename the collection.\n *\n * @method\n * @param {string} newName New name of of the collection.\n * @param {object} [options=null] Optional settings.\n * @param {boolean} [options.dropTarget=false] Drop the target name collection if it previously exists.\n * @param {Collection~collectionResultCallback} [callback] The results callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.rename = function(newName, opt, callback) {\n  var self = this;\n  if(typeof opt == 'function') callback = opt, opt = {};\n  opt = opt || {};\n\n  // Execute using callback\n  if(typeof callback == 'function') return rename(self, newName, opt, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    rename(self, newName, opt, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar rename = function(self, newName, opt, callback) {\n  // Check the collection name\n  checkCollectionName(newName);\n  // Build the command\n  var renameCollection = f(\"%s.%s\", self.s.dbName, self.s.name);\n  var toCollection =  f(\"%s.%s\", self.s.dbName, newName);\n  var dropTarget = typeof opt.dropTarget == 'boolean' ? opt.dropTarget : false;\n  var cmd = {'renameCollection':renameCollection, 'to':toCollection, 'dropTarget':dropTarget};\n\n  // Execute against admin\n  self.s.db.admin().command(cmd, opt, function(err, doc) {\n    if(err) return handleCallback(callback, err, null);\n    // We have an error\n    if(doc.errmsg) return handleCallback(callback, toError(doc), null);\n    try {\n      return handleCallback(callback, null, new Collection(self.s.db, self.s.topology, self.s.dbName, newName, self.s.pkFactory, self.s.options));\n    } catch(err) {\n      return handleCallback(callback, toError(err), null);\n    }\n  });\n}\n\ndefine.classMethod('rename', {callback: true, promise:true});\n\n/**\n * Drop the collection from the database, removing it permanently. New accesses will create a new collection.\n *\n * @method\n * @param {Collection~resultCallback} [callback] The results callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.drop = function(callback) {\n  var self = this;\n\n  // Execute using callback\n  if(typeof callback == 'function') return self.s.db.dropCollection(self.s.name, callback);\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    self.s.db.dropCollection(self.s.name, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\ndefine.classMethod('drop', {callback: true, promise:true});\n\n/**\n * Returns the options of the collection.\n *\n * @method\n * @param {Collection~resultCallback} [callback] The results callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.options = function(callback) {\n  var self = this;\n\n  // Execute using callback\n  if(typeof callback == 'function') return options(self, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    options(self, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar options = function(self, callback) {\n  self.s.db.listCollections({name: self.s.name}).toArray(function(err, collections) {\n    if(err) return handleCallback(callback, err);\n    if(collections.length == 0) {\n      return handleCallback(callback, MongoError.create({message: f(\"collection %s not found\", self.s.namespace), driver:true }));\n    }\n\n    handleCallback(callback, err, collections[0].options || null);\n  });\n}\n\ndefine.classMethod('options', {callback: true, promise:true});\n\n/**\n * Returns if the collection is a capped collection\n *\n * @method\n * @param {Collection~resultCallback} [callback] The results callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.isCapped = function(callback) {\n  var self = this;\n\n  // Execute using callback\n  if(typeof callback == 'function') return isCapped(self, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    isCapped(self, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar isCapped = function(self, callback) {\n  self.options(function(err, document) {\n    if(err) return handleCallback(callback, err);\n    handleCallback(callback, null, document && document.capped);\n  });\n}\n\ndefine.classMethod('isCapped', {callback: true, promise:true});\n\n/**\n * Creates an index on the db and collection collection.\n * @method\n * @param {(string|object)} fieldOrSpec Defines the index.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.unique=false] Creates an unique index.\n * @param {boolean} [options.sparse=false] Creates a sparse index.\n * @param {boolean} [options.background=false] Creates the index in the background, yielding whenever possible.\n * @param {boolean} [options.dropDups=false] A unique index cannot be created on a key that has pre-existing duplicate values. If you would like to create the index anyway, keeping the first document the database indexes and deleting all subsequent documents that have duplicate value\n * @param {number} [options.min=null] For geospatial indexes set the lower bound for the co-ordinates.\n * @param {number} [options.max=null] For geospatial indexes set the high bound for the co-ordinates.\n * @param {number} [options.v=null] Specify the format version of the indexes.\n * @param {number} [options.expireAfterSeconds=null] Allows you to expire data on indexes applied to a data (MongoDB 2.2 or higher)\n * @param {number} [options.name=null] Override the autogenerated index name (useful if the resulting name is larger than 128 bytes)\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.createIndex = function(fieldOrSpec, options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 1);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  options = args.length ? args.shift() || {} : {};\n  options = typeof callback === 'function' ? options : callback;\n  options = options == null ? {} : options;\n\n  // Execute using callback\n  if(typeof callback == 'function') return createIndex(self, fieldOrSpec, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    createIndex(self, fieldOrSpec, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar createIndex = function(self, fieldOrSpec, options, callback) {\n  self.s.db.createIndex(self.s.name, fieldOrSpec, options, callback);\n}\n\ndefine.classMethod('createIndex', {callback: true, promise:true});\n\n/**\n * Creates multiple indexes in the collection, this method is only supported for\n * MongoDB 2.6 or higher. Earlier version of MongoDB will throw a command not supported\n * error. Index specifications are defined at http://docs.mongodb.org/manual/reference/command/createIndexes/.\n * @method\n * @param {array} indexSpecs An array of index specifications to be created\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.createIndexes = function(indexSpecs, callback) {\n  var self = this;\n\n  // Execute using callback\n  if(typeof callback == 'function') return createIndexes(self, indexSpecs, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    createIndexes(self, indexSpecs, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar createIndexes = function(self, indexSpecs, callback) {\n  // Ensure we generate the correct name if the parameter is not set\n  for(var i = 0; i < indexSpecs.length; i++) {\n    if(indexSpecs[i].name == null) {\n      var keys = [];\n\n      for(var name in indexSpecs[i].key) {\n        keys.push(f('%s_%s', name, indexSpecs[i].key[name]));\n      }\n\n      // Set the name\n      indexSpecs[i].name = keys.join('_');\n    }\n  }\n\n  // Execute the index\n  self.s.db.command({\n    createIndexes: self.s.name, indexes: indexSpecs\n  }, { readPreference: ReadPreference.PRIMARY }, callback);\n}\n\ndefine.classMethod('createIndexes', {callback: true, promise:true});\n\n/**\n * Drops an index from this collection.\n * @method\n * @param {string} indexName Name of the index to drop.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.dropIndex = function(indexName, options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 1);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  options = args.length ? args.shift() || {} : {};\n  // Run only against primary\n  options.readPreference = ReadPreference.PRIMARY;\n\n  // Execute using callback\n  if(typeof callback == 'function') return dropIndex(self, indexName, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    dropIndex(self, indexName, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar dropIndex = function(self, indexName, options, callback) {\n  // Delete index command\n  var cmd = {'deleteIndexes':self.s.name, 'index':indexName};\n\n  // Execute command\n  self.s.db.command(cmd, options, function(err, result) {\n    if(typeof callback != 'function') return;\n    if(err) return handleCallback(callback, err, null);\n    handleCallback(callback, null, result);\n  });\n}\n\ndefine.classMethod('dropIndex', {callback: true, promise:true});\n\n/**\n * Drops all indexes from this collection.\n * @method\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.dropIndexes = function(callback) {\n  var self = this;\n\n  // Execute using callback\n  if(typeof callback == 'function') return dropIndexes(self, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    dropIndexes(self, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar dropIndexes = function(self, callback) {\n  self.dropIndex('*', function (err, result) {\n    if(err) return handleCallback(callback, err, false);\n    handleCallback(callback, null, true);\n  });\n}\n\ndefine.classMethod('dropIndexes', {callback: true, promise:true});\n\n/**\n * Drops all indexes from this collection.\n * @method\n * @deprecated use dropIndexes\n * @param {Collection~resultCallback} callback The command result callback\n * @return {Promise} returns Promise if no [callback] passed\n */\nCollection.prototype.dropAllIndexes = Collection.prototype.dropIndexes;\n\ndefine.classMethod('dropAllIndexes', {callback: true, promise:true});\n\n/**\n * Reindex all indexes on the collection\n * Warning: reIndex is a blocking operation (indexes are rebuilt in the foreground) and will be slow for large collections.\n * @method\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.reIndex = function(options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = options || {};\n\n  // Execute using callback\n  if(typeof callback == 'function') return reIndex(self, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    reIndex(self, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar reIndex = function(self, options, callback) {\n  // Reindex\n  var cmd = {'reIndex':self.s.name};\n\n  // Execute the command\n  self.s.db.command(cmd, options, function(err, result) {\n    if(callback == null) return;\n    if(err) return handleCallback(callback, err, null);\n    handleCallback(callback, null, result.ok ? true : false);\n  });\n}\n\ndefine.classMethod('reIndex', {callback: true, promise:true});\n\n/**\n * Get the list of all indexes information for the collection.\n *\n * @method\n * @param {object} [options=null] Optional settings.\n * @param {number} [options.batchSize=null] The batchSize for the returned command cursor or if pre 2.8 the systems batch collection\n * @param {(ReadPreference|string)} [options.readPreference=null] The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n * @return {CommandCursor}\n */\nCollection.prototype.listIndexes = function(options) {\n  options = options || {};\n  // Clone the options\n  options = shallowClone(options);\n  // Set the CommandCursor constructor\n  options.cursorFactory = CommandCursor;\n  // Set the promiseLibrary\n  options.promiseLibrary = this.s.promiseLibrary;\n\n  if(!this.s.topology.capabilities()) {\n    throw new MongoError('cannot connect to server');\n  }\n\n  // We have a list collections command\n  if(this.s.topology.capabilities().hasListIndexesCommand) {\n    // Cursor options\n    var cursor = options.batchSize ? {batchSize: options.batchSize} : {}\n    // Build the command\n    var command = { listIndexes: this.s.name, cursor: cursor };\n    // Execute the cursor\n    var cursor = this.s.topology.cursor(f('%s.$cmd', this.s.dbName), command, options);\n    // Do we have a readPreference, apply it\n    if(options.readPreference) cursor.setReadPreference(options.readPreference);\n    // Return the cursor\n    return cursor;\n  }\n\n  // Get the namespace\n  var ns = f('%s.system.indexes', this.s.dbName);\n  // Get the query\n  var cursor = this.s.topology.cursor(ns, {find: ns, query: {ns: this.s.namespace}}, options);\n  // Do we have a readPreference, apply it\n  if(options.readPreference) cursor.setReadPreference(options.readPreference);\n  // Set the passed in batch size if one was provided\n  if(options.batchSize) cursor = cursor.batchSize(options.batchSize);\n  // Return the cursor\n  return cursor;\n};\n\ndefine.classMethod('listIndexes', {callback: false, promise:false, returns: [CommandCursor]});\n\n/**\n * Ensures that an index exists, if it does not it creates it\n * @method\n * @deprecated use createIndexes instead\n * @param {(string|object)} fieldOrSpec Defines the index.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.unique=false] Creates an unique index.\n * @param {boolean} [options.sparse=false] Creates a sparse index.\n * @param {boolean} [options.background=false] Creates the index in the background, yielding whenever possible.\n * @param {boolean} [options.dropDups=false] A unique index cannot be created on a key that has pre-existing duplicate values. If you would like to create the index anyway, keeping the first document the database indexes and deleting all subsequent documents that have duplicate value\n * @param {number} [options.min=null] For geospatial indexes set the lower bound for the co-ordinates.\n * @param {number} [options.max=null] For geospatial indexes set the high bound for the co-ordinates.\n * @param {number} [options.v=null] Specify the format version of the indexes.\n * @param {number} [options.expireAfterSeconds=null] Allows you to expire data on indexes applied to a data (MongoDB 2.2 or higher)\n * @param {number} [options.name=null] Override the autogenerated index name (useful if the resulting name is larger than 128 bytes)\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.ensureIndex = function(fieldOrSpec, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = options || {};\n\n  // Execute using callback\n  if(typeof callback == 'function') return ensureIndex(self, fieldOrSpec, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    ensureIndex(self, fieldOrSpec, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar ensureIndex = function(self, fieldOrSpec, options, callback) {\n  self.s.db.ensureIndex(self.s.name, fieldOrSpec, options, callback);\n}\n\ndefine.classMethod('ensureIndex', {callback: true, promise:true});\n\n/**\n * Checks if one or more indexes exist on the collection, fails on first non-existing index\n * @method\n * @param {(string|array)} indexes One or more index names to check.\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.indexExists = function(indexes, callback) {\n  var self = this;\n\n  // Execute using callback\n  if(typeof callback == 'function') return indexExists(self, indexes, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    indexExists(self, indexes, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar indexExists = function(self, indexes, callback) {\n  self.indexInformation(function(err, indexInformation) {\n    // If we have an error return\n    if(err != null) return handleCallback(callback, err, null);\n    // Let's check for the index names\n    if(!Array.isArray(indexes)) return handleCallback(callback, null, indexInformation[indexes] != null);\n    // Check in list of indexes\n    for(var i = 0; i < indexes.length; i++) {\n      if(indexInformation[indexes[i]] == null) {\n        return handleCallback(callback, null, false);\n      }\n    }\n\n    // All keys found return true\n    return handleCallback(callback, null, true);\n  });\n}\n\ndefine.classMethod('indexExists', {callback: true, promise:true});\n\n/**\n * Retrieves this collections index info.\n * @method\n * @param {object} [options=null] Optional settings.\n * @param {boolean} [options.full=false] Returns the full raw index information.\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.indexInformation = function(options, callback) {\n  var self = this;\n  // Unpack calls\n  var args = Array.prototype.slice.call(arguments, 0);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  options = args.length ? args.shift() || {} : {};\n\n  // Execute using callback\n  if(typeof callback == 'function') return indexInformation(self, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    indexInformation(self, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar indexInformation = function(self, options, callback) {\n  self.s.db.indexInformation(self.s.name, options, callback);\n}\n\ndefine.classMethod('indexInformation', {callback: true, promise:true});\n\n/**\n * The callback format for results\n * @callback Collection~countCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {number} result The count of documents that matched the query.\n */\n\n/**\n * Count number of matching documents in the db to a query.\n * @method\n * @param {object} query The query for the count.\n * @param {object} [options=null] Optional settings.\n * @param {boolean} [options.limit=null] The limit of documents to count.\n * @param {boolean} [options.skip=null] The number of documents to skip for the count.\n * @param {string} [options.hint=null] An index name hint for the query.\n * @param {(ReadPreference|string)} [options.readPreference=null] The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n * @param {Collection~countCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.count = function(query, options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 0);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  var queryOption = args.length ? args.shift() || {} : {};\n  var optionsOption = args.length ? args.shift() || {} : {};\n\n  // Execute using callback\n  if(typeof callback == 'function') return count(self, queryOption, optionsOption, callback);\n\n  // Check if query is empty\n  query = query || {};\n  options = options || {};\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    count(self, query, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n};\n\nvar count = function(self, query, options, callback) {\n  var skip = options.skip;\n  var limit = options.limit;\n  var hint = options.hint;\n  var maxTimeMS = options.maxTimeMS;\n\n  // Final query\n  var cmd = {\n    'count': self.s.name, 'query': query\n  };\n\n  // Add limit and skip if defined\n  if(typeof skip == 'number') cmd.skip = skip;\n  if(typeof limit == 'number') cmd.limit = limit;\n  if(hint) options.hint = hint;\n\n  options = shallowClone(options);\n  // Ensure we have the right read preference inheritance\n  options = getReadPreference(self, options, self.s.db, self);\n\n  // Do we have a readConcern specified\n  if(self.s.readConcern) {\n    cmd.readConcern = self.s.readConcern;\n  }\n\n  // Execute command\n  self.s.db.command(cmd, options, function(err, result) {\n    if(err) return handleCallback(callback, err);\n    handleCallback(callback, null, result.n);\n  });\n}\n\ndefine.classMethod('count', {callback: true, promise:true});\n\n/**\n * The distinct command returns returns a list of distinct values for the given key across a collection.\n * @method\n * @param {string} key Field of the document to find distinct values for.\n * @param {object} query The query for filtering the set of documents to which we apply the distinct filter.\n * @param {object} [options=null] Optional settings.\n * @param {(ReadPreference|string)} [options.readPreference=null] The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.distinct = function(key, query, options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 1);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  var queryOption = args.length ? args.shift() || {} : {};\n  var optionsOption = args.length ? args.shift() || {} : {};\n\n  // Execute using callback\n  if(typeof callback == 'function') return distinct(self, key, queryOption, optionsOption, callback);\n\n  // Ensure the query and options are set\n  query = query || {};\n  options = options || {};\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    distinct(self, key, query, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n};\n\nvar distinct = function(self, key, query, options, callback) {\n  // maxTimeMS option\n  var maxTimeMS = options.maxTimeMS;\n\n  // Distinct command\n  var cmd = {\n    'distinct': self.s.name, 'key': key, 'query': query\n  };\n\n  options = shallowClone(options);\n  // Ensure we have the right read preference inheritance\n  options = getReadPreference(self, options, self.s.db, self);\n\n  // Do we have a readConcern specified\n  if(self.s.readConcern) {\n    cmd.readConcern = self.s.readConcern;\n  }\n\n  // Execute the command\n  self.s.db.command(cmd, options, function(err, result) {\n    if(err) return handleCallback(callback, err);\n    handleCallback(callback, null, result.values);\n  });\n}\n\ndefine.classMethod('distinct', {callback: true, promise:true});\n\n/**\n * Retrieve all the indexes on the collection.\n * @method\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.indexes = function(callback) {\n  var self = this;\n  // Execute using callback\n  if(typeof callback == 'function') return indexes(self, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    indexes(self, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar indexes = function(self, callback) {\n  self.s.db.indexInformation(self.s.name, {full:true}, callback);\n}\n\ndefine.classMethod('indexes', {callback: true, promise:true});\n\n/**\n * Get all the collection statistics.\n *\n * @method\n * @param {object} [options=null] Optional settings.\n * @param {number} [options.scale=null] Divide the returned sizes by scale value.\n * @param {Collection~resultCallback} [callback] The collection result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.stats = function(options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 0);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  // Fetch all commands\n  options = args.length ? args.shift() || {} : {};\n\n  // Execute using callback\n  if(typeof callback == 'function') return stats(self, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    stats(self, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar stats = function(self, options, callback) {\n  // Build command object\n  var commandObject = {\n    collStats:self.s.name\n  }\n\n  // Check if we have the scale value\n  if(options['scale'] != null) commandObject['scale'] = options['scale'];\n\n  options = shallowClone(options);\n  // Ensure we have the right read preference inheritance\n  options = getReadPreference(self, options, self.s.db, self);\n\n  // Execute the command\n  self.s.db.command(commandObject, options, callback);\n}\n\ndefine.classMethod('stats', {callback: true, promise:true});\n\n/**\n * @typedef {Object} Collection~findAndModifyWriteOpResult\n * @property {object} value Document returned from findAndModify command.\n * @property {object} lastErrorObject The raw lastErrorObject returned from the command.\n * @property {Number} ok Is 1 if the command executed correctly.\n */\n\n/**\n * The callback format for inserts\n * @callback Collection~findAndModifyCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {Collection~findAndModifyWriteOpResult} result The result object if the command was executed successfully.\n */\n\n/**\n * Find a document and delete it in one atomic operation, requires a write lock for the duration of the operation.\n *\n * @method\n * @param {object} filter Document selection filter.\n * @param {object} [options=null] Optional settings.\n * @param {object} [options.projection=null] Limits the fields to return for all matching documents.\n * @param {object} [options.sort=null] Determines which document the operation modifies if the query selects multiple documents.\n * @param {number} [options.maxTimeMS=null] The maximum amount of time to allow the query to run.\n * @param {Collection~findAndModifyCallback} [callback] The collection result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.findOneAndDelete = function(filter, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = options || {};\n\n  // Basic validation\n  if(filter == null || typeof filter != 'object') throw toError('filter parameter must be an object');\n\n  // Execute using callback\n  if(typeof callback == 'function') return findOneAndDelete(self, filter, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    options = options || {};\n\n    findOneAndDelete(self, filter, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar findOneAndDelete = function(self, filter, options, callback) {\n  // Final options\n  var finalOptions = shallowClone(options);\n  finalOptions['fields'] = options.projection;\n  finalOptions['remove'] = true;\n  // Execute find and Modify\n  self.findAndModify(\n      filter\n    , options.sort\n    , null\n    , finalOptions\n    , callback\n  );\n}\n\ndefine.classMethod('findOneAndDelete', {callback: true, promise:true});\n\n/**\n * Find a document and replace it in one atomic operation, requires a write lock for the duration of the operation.\n *\n * @method\n * @param {object} filter Document selection filter.\n * @param {object} replacement Document replacing the matching document.\n * @param {object} [options=null] Optional settings.\n * @param {object} [options.projection=null] Limits the fields to return for all matching documents.\n * @param {object} [options.sort=null] Determines which document the operation modifies if the query selects multiple documents.\n * @param {number} [options.maxTimeMS=null] The maximum amount of time to allow the query to run.\n * @param {boolean} [options.upsert=false] Upsert the document if it does not exist.\n * @param {boolean} [options.returnOriginal=true] When false, returns the updated document rather than the original. The default is true.\n * @param {Collection~findAndModifyCallback} [callback] The collection result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.findOneAndReplace = function(filter, replacement, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = options || {};\n\n  // Basic validation\n  if(filter == null || typeof filter != 'object') throw toError('filter parameter must be an object');\n  if(replacement == null || typeof replacement != 'object') throw toError('replacement parameter must be an object');\n\n  // Execute using callback\n  if(typeof callback == 'function') return findOneAndReplace(self, filter, replacement, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    options = options || {};\n\n    findOneAndReplace(self, filter, replacement, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar findOneAndReplace = function(self, filter, replacement, options, callback) {\n  // Final options\n  var finalOptions = shallowClone(options);\n  finalOptions['fields'] = options.projection;\n  finalOptions['update'] = true;\n  finalOptions['new'] = typeof options.returnOriginal == 'boolean' ? !options.returnOriginal : false;\n  finalOptions['upsert'] = typeof options.upsert == 'boolean' ? options.upsert : false;\n\n  // Execute findAndModify\n  self.findAndModify(\n      filter\n    , options.sort\n    , replacement\n    , finalOptions\n    , callback\n  );\n}\n\ndefine.classMethod('findOneAndReplace', {callback: true, promise:true});\n\n/**\n * Find a document and update it in one atomic operation, requires a write lock for the duration of the operation.\n *\n * @method\n * @param {object} filter Document selection filter.\n * @param {object} update Update operations to be performed on the document\n * @param {object} [options=null] Optional settings.\n * @param {object} [options.projection=null] Limits the fields to return for all matching documents.\n * @param {object} [options.sort=null] Determines which document the operation modifies if the query selects multiple documents.\n * @param {number} [options.maxTimeMS=null] The maximum amount of time to allow the query to run.\n * @param {boolean} [options.upsert=false] Upsert the document if it does not exist.\n * @param {boolean} [options.returnOriginal=true] When false, returns the updated document rather than the original. The default is true.\n * @param {Collection~findAndModifyCallback} [callback] The collection result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.findOneAndUpdate = function(filter, update, options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {};\n  options = options || {};\n\n  // Basic validation\n  if(filter == null || typeof filter != 'object') throw toError('filter parameter must be an object');\n  if(update == null || typeof update != 'object') throw toError('update parameter must be an object');\n\n  // Execute using callback\n  if(typeof callback == 'function') return findOneAndUpdate(self, filter, update, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    options = options || {};\n\n    findOneAndUpdate(self, filter, update, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar findOneAndUpdate = function(self, filter, update, options, callback) {\n  // Final options\n  var finalOptions = shallowClone(options);\n  finalOptions['fields'] = options.projection;\n  finalOptions['update'] = true;\n  finalOptions['new'] = typeof options.returnOriginal == 'boolean' ? !options.returnOriginal : false;\n  finalOptions['upsert'] = typeof options.upsert == 'boolean' ? options.upsert : false;\n\n  // Execute findAndModify\n  self.findAndModify(\n      filter\n    , options.sort\n    , update\n    , finalOptions\n    , callback\n  );\n}\n\ndefine.classMethod('findOneAndUpdate', {callback: true, promise:true});\n\n/**\n * Find and update a document.\n * @method\n * @param {object} query Query object to locate the object to modify.\n * @param {array} sort If multiple docs match, choose the first one in the specified sort order as the object to manipulate.\n * @param {object} doc The fields/vals to be updated.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {boolean} [options.remove=false] Set to true to remove the object before returning.\n * @param {boolean} [options.upsert=false] Perform an upsert operation.\n * @param {boolean} [options.new=false] Set to true if you want to return the modified object rather than the original. Ignored for remove.\n * @param {object} [options.fields=null] Object containing the field projection for the result returned from the operation.\n * @param {Collection~findAndModifyCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n * @deprecated use findOneAndUpdate, findOneAndReplace or findOneAndDelete instead\n */\nCollection.prototype.findAndModify = function(query, sort, doc, options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 1);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  sort = args.length ? args.shift() || [] : [];\n  doc = args.length ? args.shift() : null;\n  options = args.length ? args.shift() || {} : {};\n\n  // Clone options\n  var options = shallowClone(options);\n  // Force read preference primary\n  options.readPreference = ReadPreference.PRIMARY;\n\n  // Execute using callback\n  if(typeof callback == 'function') return findAndModify(self, query, sort, doc, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    options = options || {};\n\n    findAndModify(self, query, sort, doc, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar findAndModify = function(self, query, sort, doc, options, callback) {\n  // Create findAndModify command object\n  var queryObject = {\n     'findandmodify': self.s.name\n   , 'query': query\n  };\n\n  sort = formattedOrderClause(sort);\n  if(sort) {\n    queryObject.sort = sort;\n  }\n\n  queryObject.new = options.new ? true : false;\n  queryObject.remove = options.remove ? true : false;\n  queryObject.upsert = options.upsert ? true : false;\n\n  if(options.fields) {\n    queryObject.fields = options.fields;\n  }\n\n  if(doc && !options.remove) {\n    queryObject.update = doc;\n  }\n\n  // Either use override on the function, or go back to default on either the collection\n  // level or db\n  if(options['serializeFunctions'] != null) {\n    options['serializeFunctions'] = options['serializeFunctions'];\n  } else {\n    options['serializeFunctions'] = self.s.serializeFunctions;\n  }\n\n  // No check on the documents\n  options.checkKeys = false;\n\n  // Get the write concern settings\n  var finalOptions = writeConcern(options, self.s.db, self, options);\n\n  // Decorate the findAndModify command with the write Concern\n  if(finalOptions.writeConcern) {\n    queryObject.writeConcern = finalOptions.writeConcern;\n  }\n\n  // Have we specified bypassDocumentValidation\n  if(typeof finalOptions.bypassDocumentValidation == 'boolean') {\n    queryObject.bypassDocumentValidation = finalOptions.bypassDocumentValidation;\n  }\n\n  // Execute the command\n  self.s.db.command(queryObject\n    , options, function(err, result) {\n      if(err) return handleCallback(callback, err, null);\n      return handleCallback(callback, null, result);\n  });\n}\n\ndefine.classMethod('findAndModify', {callback: true, promise:true});\n\n/**\n * Find and remove a document.\n * @method\n * @param {object} query Query object to locate the object to modify.\n * @param {array} sort If multiple docs match, choose the first one in the specified sort order as the object to manipulate.\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n * @deprecated use findOneAndDelete instead\n */\nCollection.prototype.findAndRemove = function(query, sort, options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 1);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  sort = args.length ? args.shift() || [] : [];\n  options = args.length ? args.shift() || {} : {};\n\n  // Execute using callback\n  if(typeof callback == 'function') return findAndRemove(self, query, sort, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    findAndRemove(self, query, sort, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar findAndRemove = function(self, query, sort, options, callback) {\n  // Add the remove option\n  options['remove'] = true;\n  // Execute the callback\n  self.findAndModify(query, sort, null, options, callback);\n}\n\ndefine.classMethod('findAndRemove', {callback: true, promise:true});\n\n/**\n * Execute an aggregation framework pipeline against the collection, needs MongoDB >= 2.2\n * @method\n * @param {object} pipeline Array containing all the aggregation framework commands for the execution.\n * @param {object} [options=null] Optional settings.\n * @param {(ReadPreference|string)} [options.readPreference=null] The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n * @param {object} [options.cursor=null] Return the query as cursor, on 2.6 > it returns as a real cursor on pre 2.6 it returns as an emulated cursor.\n * @param {number} [options.cursor.batchSize=null] The batchSize for the cursor\n * @param {boolean} [options.explain=false] Explain returns the aggregation execution plan (requires mongodb 2.6 >).\n * @param {boolean} [options.allowDiskUse=false] allowDiskUse lets the server know if it can use disk to store temporary results for the aggregation (requires mongodb 2.6 >).\n * @param {number} [options.maxTimeMS=null] maxTimeMS specifies a cumulative time limit in milliseconds for processing operations on the cursor. MongoDB interrupts the operation at the earliest following interrupt point.\n * @param {boolean} [options.bypassDocumentValidation=false] Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n * @param {Collection~resultCallback} callback The command result callback\n * @return {(null|AggregationCursor)}\n */\nCollection.prototype.aggregate = function(pipeline, options, callback) {\n  var self = this;\n  if(Array.isArray(pipeline)) {\n    // Set up callback if one is provided\n    if(typeof options == 'function') {\n      callback = options;\n      options = {};\n    }\n\n    // If we have no options or callback we are doing\n    // a cursor based aggregation\n    if(options == null && callback == null) {\n      options = {};\n    }\n  } else {\n    // Aggregation pipeline passed as arguments on the method\n    var args = Array.prototype.slice.call(arguments, 0);\n    // Get the callback\n    callback = args.pop();\n    // Get the possible options object\n    var opts = args[args.length - 1];\n    // If it contains any of the admissible options pop it of the args\n    options = opts && (opts.readPreference\n      || opts.explain || opts.cursor || opts.out\n      || opts.maxTimeMS || opts.allowDiskUse) ? args.pop() : {};\n      // Left over arguments is the pipeline\n    pipeline = args;\n  }\n\n  // Ignore readConcern option\n  var ignoreReadConcern = false;\n\n  // If out was specified\n  if(typeof options.out == 'string') {\n    pipeline.push({$out: options.out});\n    ignoreReadConcern = true;\n  } else if(pipeline.length > 0 && pipeline[pipeline.length - 1]['$out']) {\n    ignoreReadConcern = true;\n  }\n\n  // Build the command\n  var command = { aggregate : this.s.name, pipeline : pipeline};\n\n  // If we have bypassDocumentValidation set\n  if(typeof options.bypassDocumentValidation == 'boolean') {\n    command.bypassDocumentValidation = options.bypassDocumentValidation;\n  }\n\n  // Do we have a readConcern specified\n  if(!ignoreReadConcern && this.s.readConcern) {\n    command.readConcern = this.s.readConcern;\n  }\n\n  // If we have allowDiskUse defined\n  if(options.allowDiskUse) command.allowDiskUse = options.allowDiskUse;\n  if(typeof options.maxTimeMS == 'number') command.maxTimeMS = options.maxTimeMS;\n\n  options = shallowClone(options);\n  // Ensure we have the right read preference inheritance\n  options = getReadPreference(this, options, this.s.db, this);\n\n  // If explain has been specified add it\n  if(options.explain) command.explain = options.explain;\n\n  // Validate that cursor options is valid\n  if(options.cursor != null && typeof options.cursor != 'object') {\n    throw toError('cursor options must be an object');\n  }\n\n  // promiseLibrary\n  options.promiseLibrary = this.s.promiseLibrary;\n\n  // Set the AggregationCursor constructor\n  options.cursorFactory = AggregationCursor;\n  if(typeof callback != 'function') {\n    if(!this.s.topology.capabilities()) {\n      throw new MongoError('cannot connect to server');\n    }\n\n    if(this.s.topology.capabilities().hasAggregationCursor) {\n      options.cursor = options.cursor || { batchSize : 1000 };\n      command.cursor = options.cursor;\n    }\n\n    // Allow disk usage command\n    if(typeof options.allowDiskUse == 'boolean') command.allowDiskUse = options.allowDiskUse;\n    if(typeof options.maxTimeMS == 'number') command.maxTimeMS = options.maxTimeMS;\n\n    // Execute the cursor\n    return this.s.topology.cursor(this.s.namespace, command, options);\n  }\n\n  var cursor = null;\n  // We do not allow cursor\n  if(options.cursor) {\n    return this.s.topology.cursor(this.s.namespace, command, options);\n  }\n\n  // Execute the command\n  this.s.db.command(command, options, function(err, result) {\n    if(err) {\n      handleCallback(callback, err);\n    } else if(result['err'] || result['errmsg']) {\n      handleCallback(callback, toError(result));\n    } else if(typeof result == 'object' && result['serverPipeline']) {\n      handleCallback(callback, null, result['serverPipeline']);\n    } else if(typeof result == 'object' && result['stages']) {\n      handleCallback(callback, null, result['stages']);\n    } else {\n      handleCallback(callback, null, result.result);\n    }\n  });\n}\n\ndefine.classMethod('aggregate', {callback: true, promise:false});\n\n/**\n * The callback format for results\n * @callback Collection~parallelCollectionScanCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {Cursor[]} cursors A list of cursors returned allowing for parallel reading of collection.\n */\n\n/**\n * Return N number of parallel cursors for a collection allowing parallel reading of entire collection. There are\n * no ordering guarantees for returned results.\n * @method\n * @param {object} [options=null] Optional settings.\n * @param {(ReadPreference|string)} [options.readPreference=null] The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n * @param {number} [options.batchSize=null] Set the batchSize for the getMoreCommand when iterating over the query results.\n * @param {number} [options.numCursors=1] The maximum number of parallel command cursors to return (the number of returned cursors will be in the range 1:numCursors)\n * @param {boolean} [options.raw=false] Return all BSON documents as Raw Buffer documents.\n * @param {Collection~parallelCollectionScanCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.parallelCollectionScan = function(options, callback) {\n  var self = this;\n  if(typeof options == 'function') callback = options, options = {numCursors: 1};\n  // Set number of cursors to 1\n  options.numCursors = options.numCursors || 1;\n  options.batchSize = options.batchSize || 1000;\n\n  options = shallowClone(options);\n  // Ensure we have the right read preference inheritance\n  options = getReadPreference(this, options, this.s.db, this);\n\n  // Add a promiseLibrary\n  options.promiseLibrary = this.s.promiseLibrary;\n\n  // Execute using callback\n  if(typeof callback == 'function') return parallelCollectionScan(self, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    parallelCollectionScan(self, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar parallelCollectionScan = function(self, options, callback) {\n  // Create command object\n  var commandObject = {\n      parallelCollectionScan: self.s.name\n    , numCursors: options.numCursors\n  }\n\n  // Do we have a readConcern specified\n  if(self.s.readConcern) {\n    commandObject.readConcern = self.s.readConcern;\n  }\n\n  // Store the raw value\n  var raw = options.raw;\n  delete options['raw'];\n\n  // Execute the command\n  self.s.db.command(commandObject, options, function(err, result) {\n    if(err) return handleCallback(callback, err, null);\n    if(result == null) return handleCallback(callback, new Error(\"no result returned for parallelCollectionScan\"), null);\n\n    var cursors = [];\n    // Add the raw back to the option\n    if(raw) options.raw = raw;\n    // Create command cursors for each item\n    for(var i = 0; i < result.cursors.length; i++) {\n      var rawId = result.cursors[i].cursor.id\n      // Convert cursorId to Long if needed\n      var cursorId = typeof rawId == 'number' ? Long.fromNumber(rawId) : rawId;\n\n      // Command cursor options\n      var cmd = {\n          batchSize: options.batchSize\n        , cursorId: cursorId\n        , items: result.cursors[i].cursor.firstBatch\n      }\n\n      // Add a command cursor\n      cursors.push(self.s.topology.cursor(self.s.namespace, cursorId, options));\n    }\n\n    handleCallback(callback, null, cursors);\n  });\n}\n\ndefine.classMethod('parallelCollectionScan', {callback: true, promise:true});\n\n/**\n * Execute the geoNear command to search for items in the collection\n *\n * @method\n * @param {number} x Point to search on the x axis, ensure the indexes are ordered in the same order.\n * @param {number} y Point to search on the y axis, ensure the indexes are ordered in the same order.\n * @param {object} [options=null] Optional settings.\n * @param {(ReadPreference|string)} [options.readPreference=null] The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n * @param {number} [options.num=null] Max number of results to return.\n * @param {number} [options.minDistance=null] Include results starting at minDistance from a point (2.6 or higher)\n * @param {number} [options.maxDistance=null] Include results up to maxDistance from the point.\n * @param {number} [options.distanceMultiplier=null] Include a value to multiply the distances with allowing for range conversions.\n * @param {object} [options.query=null] Filter the results by a query.\n * @param {boolean} [options.spherical=false] Perform query using a spherical model.\n * @param {boolean} [options.uniqueDocs=false] The closest location in a document to the center of the search region will always be returned MongoDB > 2.X.\n * @param {boolean} [options.includeLocs=false] Include the location data fields in the top level of the results MongoDB > 2.X.\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.geoNear = function(x, y, options, callback) {\n  var self = this;\n  var point = typeof(x) == 'object' && x\n    , args = Array.prototype.slice.call(arguments, point?1:2);\n\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  // Fetch all commands\n  options = args.length ? args.shift() || {} : {};\n\n  // Execute using callback\n  if(typeof callback == 'function') return geoNear(self, x, y, point, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    geoNear(self, x, y, point, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar geoNear = function(self, x, y, point, options, callback) {\n  // Build command object\n  var commandObject = {\n    geoNear:self.s.name,\n    near: point || [x, y]\n  }\n\n  options = shallowClone(options);\n  // Ensure we have the right read preference inheritance\n  options = getReadPreference(self, options, self.s.db, self);\n\n  // Exclude readPreference and existing options to prevent user from\n  // shooting themselves in the foot\n  var exclude = {\n    readPreference: true,\n    geoNear: true,\n    near: true\n  };\n\n  // Filter out any excluded objects\n  commandObject = decorateCommand(commandObject, options, exclude);\n\n  // Do we have a readConcern specified\n  if(self.s.readConcern) {\n    commandObject.readConcern = self.s.readConcern;\n  }\n\n  // Execute the command\n  self.s.db.command(commandObject, options, function (err, res) {\n    if(err) return handleCallback(callback, err);\n    if(res.err || res.errmsg) return handleCallback(callback, toError(res));\n    // should we only be returning res.results here? Not sure if the user\n    // should see the other return information\n    handleCallback(callback, null, res);\n  });\n}\n\ndefine.classMethod('geoNear', {callback: true, promise:true});\n\n/**\n * Execute a geo search using a geo haystack index on a collection.\n *\n * @method\n * @param {number} x Point to search on the x axis, ensure the indexes are ordered in the same order.\n * @param {number} y Point to search on the y axis, ensure the indexes are ordered in the same order.\n * @param {object} [options=null] Optional settings.\n * @param {(ReadPreference|string)} [options.readPreference=null] The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n * @param {number} [options.maxDistance=null] Include results up to maxDistance from the point.\n * @param {object} [options.search=null] Filter the results by a query.\n * @param {number} [options.limit=false] Max number of results to return.\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.geoHaystackSearch = function(x, y, options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 2);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  // Fetch all commands\n  options = args.length ? args.shift() || {} : {};\n\n  // Execute using callback\n  if(typeof callback == 'function') return geoHaystackSearch(self, x, y, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    geoHaystackSearch(self, x, y, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar geoHaystackSearch = function(self, x, y, options, callback) {\n  // Build command object\n  var commandObject = {\n    geoSearch: self.s.name,\n    near: [x, y]\n  }\n\n  // Remove read preference from hash if it exists\n  commandObject = decorateCommand(commandObject, options, {readPreference: true});\n\n  options = shallowClone(options);\n  // Ensure we have the right read preference inheritance\n  options = getReadPreference(self, options, self.s.db, self);\n\n  // Do we have a readConcern specified\n  if(self.s.readConcern) {\n    commandObject.readConcern = self.s.readConcern;\n  }\n\n  // Execute the command\n  self.s.db.command(commandObject, options, function (err, res) {\n    if(err) return handleCallback(callback, err);\n    if(res.err || res.errmsg) handleCallback(callback, utils.toError(res));\n    // should we only be returning res.results here? Not sure if the user\n    // should see the other return information\n    handleCallback(callback, null, res);\n  });\n}\n\ndefine.classMethod('geoHaystackSearch', {callback: true, promise:true});\n\n/**\n * Group function helper\n * @ignore\n */\n// var groupFunction = function () {\n//   var c = db[ns].find(condition);\n//   var map = new Map();\n//   var reduce_function = reduce;\n//\n//   while (c.hasNext()) {\n//     var obj = c.next();\n//     var key = {};\n//\n//     for (var i = 0, len = keys.length; i < len; ++i) {\n//       var k = keys[i];\n//       key[k] = obj[k];\n//     }\n//\n//     var aggObj = map.get(key);\n//\n//     if (aggObj == null) {\n//       var newObj = Object.extend({}, key);\n//       aggObj = Object.extend(newObj, initial);\n//       map.put(key, aggObj);\n//     }\n//\n//     reduce_function(obj, aggObj);\n//   }\n//\n//   return { \"result\": map.values() };\n// }.toString();\nvar groupFunction = 'function () {\\nvar c = db[ns].find(condition);\\nvar map = new Map();\\nvar reduce_function = reduce;\\n\\nwhile (c.hasNext()) {\\nvar obj = c.next();\\nvar key = {};\\n\\nfor (var i = 0, len = keys.length; i < len; ++i) {\\nvar k = keys[i];\\nkey[k] = obj[k];\\n}\\n\\nvar aggObj = map.get(key);\\n\\nif (aggObj == null) {\\nvar newObj = Object.extend({}, key);\\naggObj = Object.extend(newObj, initial);\\nmap.put(key, aggObj);\\n}\\n\\nreduce_function(obj, aggObj);\\n}\\n\\nreturn { \"result\": map.values() };\\n}';\n\n/**\n * Run a group command across a collection\n *\n * @method\n * @param {(object|array|function|code)} keys An object, array or function expressing the keys to group by.\n * @param {object} condition An optional condition that must be true for a row to be considered.\n * @param {object} initial Initial value of the aggregation counter object.\n * @param {(function|Code)} reduce The reduce function aggregates (reduces) the objects iterated\n * @param {(function|Code)} finalize An optional function to be run on each item in the result set just before the item is returned.\n * @param {boolean} command Specify if you wish to run using the internal group command or using eval, default is true.\n * @param {object} [options=null] Optional settings.\n * @param {(ReadPreference|string)} [options.readPreference=null] The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n * @param {Collection~resultCallback} [callback] The command result callback\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.group = function(keys, condition, initial, reduce, finalize, command, options, callback) {\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 3);\n  callback = args.pop();\n  if(typeof callback != 'function') args.push(callback);\n  // Fetch all commands\n  reduce = args.length ? args.shift() : null;\n  finalize = args.length ? args.shift() : null;\n  command = args.length ? args.shift() : null;\n  options = args.length ? args.shift() || {} : {};\n\n  // Make sure we are backward compatible\n  if(!(typeof finalize == 'function')) {\n    command = finalize;\n    finalize = null;\n  }\n\n  if (!Array.isArray(keys) && keys instanceof Object && typeof(keys) !== 'function' && !(keys instanceof Code)) {\n    keys = Object.keys(keys);\n  }\n\n  if(typeof reduce === 'function') {\n    reduce = reduce.toString();\n  }\n\n  if(typeof finalize === 'function') {\n    finalize = finalize.toString();\n  }\n\n  // Set up the command as default\n  command = command == null ? true : command;\n\n  // Execute using callback\n  if(typeof callback == 'function') return group(self, keys, condition, initial, reduce, finalize, command, options, callback);\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    group(self, keys, condition, initial, reduce, finalize, command, options, function(err, r) {\n      if(err) return reject(err);\n      resolve(r);\n    });\n  });\n}\n\nvar group = function(self, keys, condition, initial, reduce, finalize, command, options, callback) {\n  // Execute using the command\n  if(command) {\n    var reduceFunction = reduce instanceof Code\n        ? reduce\n        : new Code(reduce);\n\n    var selector = {\n      group: {\n          'ns': self.s.name\n        , '$reduce': reduceFunction\n        , 'cond': condition\n        , 'initial': initial\n        , 'out': \"inline\"\n      }\n    };\n\n    // if finalize is defined\n    if(finalize != null) selector.group['finalize'] = finalize;\n    // Set up group selector\n    if ('function' === typeof keys || keys instanceof Code) {\n      selector.group.$keyf = keys instanceof Code\n        ? keys\n        : new Code(keys);\n    } else {\n      var hash = {};\n      keys.forEach(function (key) {\n        hash[key] = 1;\n      });\n      selector.group.key = hash;\n    }\n\n    options = shallowClone(options);\n    // Ensure we have the right read preference inheritance\n    options = getReadPreference(self, options, self.s.db, self);\n\n    // Do we have a readConcern specified\n    if(self.s.readConcern) {\n      selector.readConcern = self.s.readConcern;\n    }\n\n    // Execute command\n    self.s.db.command(selector, options, function(err, result) {\n      if(err) return handleCallback(callback, err, null);\n      handleCallback(callback, null, result.retval);\n    });\n  } else {\n    // Create execution scope\n    var scope = reduce != null && reduce instanceof Code\n      ? reduce.scope\n      : {};\n\n    scope.ns = self.s.name;\n    scope.keys = keys;\n    scope.condition = condition;\n    scope.initial = initial;\n\n    // Pass in the function text to execute within mongodb.\n    var groupfn = groupFunction.replace(/ reduce;/, reduce.toString() + ';');\n\n    self.s.db.eval(new Code(groupfn, scope), function (err, results) {\n      if (err) return handleCallback(callback, err, null);\n      handleCallback(callback, null, results.result || results);\n    });\n  }\n}\n\ndefine.classMethod('group', {callback: true, promise:true});\n\n/**\n * Functions that are passed as scope args must\n * be converted to Code instances.\n * @ignore\n */\nfunction processScope (scope) {\n  if(!isObject(scope)) {\n    return scope;\n  }\n\n  var keys = Object.keys(scope);\n  var i = keys.length;\n  var key;\n  var new_scope = {};\n\n  while (i--) {\n    key = keys[i];\n    if ('function' == typeof scope[key]) {\n      new_scope[key] = new Code(String(scope[key]));\n    } else {\n      new_scope[key] = processScope(scope[key]);\n    }\n  }\n\n  return new_scope;\n}\n\n/**\n * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n *\n * @method\n * @param {(function|string)} map The mapping function.\n * @param {(function|string)} reduce The reduce function.\n * @param {object} [options=null] Optional settings.\n * @param {(ReadPreference|string)} [options.readPreference=null] The preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).\n * @param {object} [options.out=null] Sets the output target for the map reduce job. *{inline:1} | {replace:'collectionName'} | {merge:'collectionName'} | {reduce:'collectionName'}*\n * @param {object} [options.query=null] Query filter object.\n * @param {object} [options.sort=null] Sorts the input objects using this key. Useful for optimization, like sorting by the emit key for fewer reduces.\n * @param {number} [options.limit=null] Number of objects to return from collection.\n * @param {boolean} [options.keeptemp=false] Keep temporary data.\n * @param {(function|string)} [options.finalize=null] Finalize function.\n * @param {object} [options.scope=null] Can pass in variables that can be access from map/reduce/finalize.\n * @param {boolean} [options.jsMode=false] It is possible to make the execution stay in JS. Provided in MongoDB > 2.0.X.\n * @param {boolean} [options.verbose=false] Provide statistics on job execution time.\n * @param {boolean} [options.bypassDocumentValidation=false] Allow driver to bypass schema validation in MongoDB 3.2 or higher.\n * @param {Collection~resultCallback} [callback] The command result callback\n * @throws {MongoError}\n * @return {Promise} returns Promise if no callback passed\n */\nCollection.prototype.mapReduce = function(map, reduce, options, callback) {\n  var self = this;\n  if('function' === typeof options) callback = options, options = {};\n  // Out must allways be defined (make sure we don't break weirdly on pre 1.8+ servers)\n  if(null == options.out) {\n    throw new Error(\"the out option parameter must be defined, see mongodb docs for possible values\");\n  }\n\n  if('function' === typeof map) {\n    map = map.toString();\n  }\n\n  if('function' === typeof reduce) {\n    reduce = reduce.toString();\n  }\n\n  if('function' === typeof options.finalize) {\n    options.finalize = options.finalize.toString();\n  }\n\n  // Execute using callback\n  if(typeof callback == 'function') return mapReduce(self, map, reduce, options, callback);\n\n  // Return a Promise\n  return new this.s.promiseLibrary(function(resolve, reject) {\n    mapReduce(self, map, reduce, options, function(err, r, r1) {\n      if(err) return reject(err);\n      if(!r1) return resolve(r);\n      resolve({results: r, stats: r1});\n    });\n  });\n}\n\nvar mapReduce = function(self, map, reduce, options, callback) {\n  var mapCommandHash = {\n      mapreduce: self.s.name\n    , map: map\n    , reduce: reduce\n  };\n\n  // Add any other options passed in\n  for(var n in options) {\n    if('scope' == n) {\n      mapCommandHash[n] = processScope(options[n]);\n    } else {\n      mapCommandHash[n] = options[n];\n    }\n  }\n\n  options = shallowClone(options);\n  // Ensure we have the right read preference inheritance\n  options = getReadPreference(self, options, self.s.db, self);\n\n  // If we have a read preference and inline is not set as output fail hard\n  if((options.readPreference != false && options.readPreference != 'primary')\n    && options['out'] && (options['out'].inline != 1 && options['out'] != 'inline')) {\n      options.readPreference = 'primary';\n  } else if(self.s.readConcern) {\n    mapCommandHash.readConcern = self.s.readConcern;\n  }\n\n  // Is bypassDocumentValidation specified\n  if(typeof options.bypassDocumentValidation == 'boolean') {\n    mapCommandHash.bypassDocumentValidation = options.bypassDocumentValidation;\n  }\n\n  // Execute command\n  self.s.db.command(mapCommandHash, {readPreference:options.readPreference}, function (err, result) {\n    if(err) return handleCallback(callback, err);\n    // Check if we have an error\n    if(1 != result.ok || result.err || result.errmsg) {\n      return handleCallback(callback, toError(result));\n    }\n\n    // Create statistics value\n    var stats = {};\n    if(result.timeMillis) stats['processtime'] = result.timeMillis;\n    if(result.counts) stats['counts'] = result.counts;\n    if(result.timing) stats['timing'] = result.timing;\n\n    // invoked with inline?\n    if(result.results) {\n      // If we wish for no verbosity\n      if(options['verbose'] == null || !options['verbose']) {\n        return handleCallback(callback, null, result.results);\n      }\n\n      return handleCallback(callback, null, result.results, stats);\n    }\n\n    // The returned collection\n    var collection = null;\n\n    // If we have an object it's a different db\n    if(result.result != null && typeof result.result == 'object') {\n      var doc = result.result;\n      collection = self.s.db.db(doc.db).collection(doc.collection);\n    } else {\n      // Create a collection object that wraps the result collection\n      collection = self.s.db.collection(result.result)\n    }\n\n    // If we wish for no verbosity\n    if(options['verbose'] == null || !options['verbose']) {\n      return handleCallback(callback, err, collection);\n    }\n\n    // Return stats as third set of values\n    handleCallback(callback, err, collection, stats);\n  });\n}\n\ndefine.classMethod('mapReduce', {callback: true, promise:true});\n\n/**\n * Initiate a Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n *\n * @method\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @return {UnorderedBulkOperation}\n */\nCollection.prototype.initializeUnorderedBulkOp = function(options) {\n  options = options || {};\n  options.promiseLibrary = this.s.promiseLibrary;\n  return unordered(this.s.topology, this, options);\n}\n\ndefine.classMethod('initializeUnorderedBulkOp', {callback: false, promise:false, returns: [ordered.UnorderedBulkOperation]});\n\n/**\n * Initiate an In order bulk write operation, operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n *\n * @method\n * @param {object} [options=null] Optional settings.\n * @param {(number|string)} [options.w=null] The write concern.\n * @param {number} [options.wtimeout=null] The write concern timeout.\n * @param {boolean} [options.j=false] Specify a journal write concern.\n * @param {OrderedBulkOperation} callback The command result callback\n * @return {null}\n */\nCollection.prototype.initializeOrderedBulkOp = function(options) {\n  options = options || {};\n  options.promiseLibrary = this.s.promiseLibrary;\n  return ordered(this.s.topology, this, options);\n}\n\ndefine.classMethod('initializeOrderedBulkOp', {callback: false, promise:false, returns: [ordered.OrderedBulkOperation]});\n\n// Get write concern\nvar writeConcern = function(target, db, col, options) {\n  if(options.w != null || options.j != null || options.fsync != null) {\n    var opts = {};\n    if(options.w != null) opts.w = options.w;\n    if(options.wtimeout != null) opts.wtimeout = options.wtimeout;\n    if(options.j != null) opts.j = options.j;\n    if(options.fsync != null) opts.fsync = options.fsync;\n    target.writeConcern = opts;\n  } else if(col.writeConcern.w != null || col.writeConcern.j != null || col.writeConcern.fsync != null) {\n    target.writeConcern = col.writeConcern;\n  } else if(db.writeConcern.w != null || db.writeConcern.j != null || db.writeConcern.fsync != null) {\n    target.writeConcern = db.writeConcern;\n  }\n\n  return target\n}\n\n// Figure out the read preference\nvar getReadPreference = function(self, options, db, coll) {\n  var r = null\n  if(options.readPreference) {\n    r = options.readPreference\n  } else if(self.s.readPreference) {\n    r = self.s.readPreference\n  } else if(db.readPreference) {\n    r = db.readPreference;\n  }\n\n  if(r instanceof ReadPreference) {\n    options.readPreference = new CoreReadPreference(r.mode, r.tags);\n  } else if(typeof r == 'string') {\n    options.readPreference = new CoreReadPreference(r);\n  } else if(r && !(r instanceof ReadPreference) && typeof r == 'object') {\n    var mode = r.mode || r.preference;\n    if (mode && typeof mode == 'string') {\n      options.readPreference = new CoreReadPreference(mode, r.tags);\n    }\n  }\n\n  return options;\n}\n\nvar testForFields = {\n    limit: 1, sort: 1, fields:1, skip: 1, hint: 1, explain: 1, snapshot: 1, timeout: 1, tailable: 1, tailableRetryInterval: 1\n  , numberOfRetries: 1, awaitdata: 1, awaitData: 1, exhaust: 1, batchSize: 1, returnKey: 1, maxScan: 1, min: 1, max: 1, showDiskLoc: 1\n  , comment: 1, raw: 1, readPreference: 1, partial: 1, read: 1, dbName: 1, oplogReplay: 1, connection: 1, maxTimeMS: 1, transforms: 1\n}\n\nmodule.exports = Collection;\n"]}